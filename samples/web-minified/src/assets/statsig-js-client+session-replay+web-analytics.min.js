!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).webVitals={})}(this,(function(e){"use strict";let t=-1;const n=e=>{addEventListener("pageshow",(n=>{n.persisted&&(t=n.timeStamp,e(n))}),!0)},i=(e,t,n,i)=>{let o,s;return r=>{t.value>=0&&(r||i)&&(s=t.value-(o??0),(s||void 0===o)&&(o=t.value,t.delta=s,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n),e(t)))}},o=e=>{requestAnimationFrame((()=>requestAnimationFrame((()=>e()))))},s=()=>{const e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},r=()=>{const e=s();return e?.activationStart??0},c=(e,n=-1)=>{const i=s();let o="navigate";t>=0?o="back-forward-cache":i&&(document.prerendering||r()>0?o="prerender":document.wasDiscarded?o="restore":i.type&&(o=i.type.replace(/_/g,"-")));return{name:e,value:n,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:o}},a=new WeakMap;function d(e,t){return a.get(e)||a.set(e,new t),a.get(e)}class h{t;i=0;o=[];h(e){if(e.hadRecentInput)return;const t=this.o[0],n=this.o.at(-1);this.i&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),this.t?.(e)}}const f=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const i=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))}));return i.observe({type:e,buffered:!0,...n}),i}}catch{}},u=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let l=-1;const m=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,p=e=>{"hidden"===document.visibilityState&&l>-1&&(l="visibilitychange"===e.type?e.timeStamp:0,v())},g=()=>{addEventListener("visibilitychange",p,!0),addEventListener("prerenderingchange",p,!0)},v=()=>{removeEventListener("visibilitychange",p,!0),removeEventListener("prerenderingchange",p,!0)},y=()=>{if(l<0){const e=r(),t=document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter((t=>"hidden"===t.name&&t.startTime>e))[0]?.startTime;l=t??m(),g(),n((()=>{setTimeout((()=>{l=m(),g()}))}))}return{get firstHiddenTime(){return l}}},b=e=>{document.prerendering?addEventListener("prerenderingchange",(()=>e()),!0):e()},T=[1800,3e3],P=(e,t={})=>{b((()=>{const s=y();let a,d=c("FCP");const h=f("paint",(e=>{for(const t of e)"first-contentful-paint"===t.name&&(h.disconnect(),t.startTime<s.firstHiddenTime&&(d.value=Math.max(t.startTime-r(),0),d.entries.push(t),a(!0)))}));h&&(a=i(e,d,T,t.reportAllChanges),n((n=>{d=c("FCP"),a=i(e,d,T,t.reportAllChanges),o((()=>{d.value=performance.now()-n.timeStamp,a(!0)}))})))}))},E=[.1,.25];let _=0,L=1/0,M=0;const C=e=>{for(const t of e)t.interactionId&&(L=Math.min(L,t.interactionId),M=Math.max(M,t.interactionId),_=M?(M-L)/7+1:0)};let I;const w=()=>I?_:performance.interactionCount??0,F=()=>{"interactionCount"in performance||I||(I=f("event",C,{type:"event",buffered:!0,durationThreshold:0}))};let k=0;class x{u=[];l=new Map;m;p;v(){k=w(),this.u.length=0,this.l.clear()}T(){const e=Math.min(this.u.length-1,Math.floor((w()-k)/50));return this.u[e]}h(e){if(this.m?.(e),!e.interactionId&&"first-input"!==e.entryType)return;const t=this.u.at(-1);let n=this.l.get(e.interactionId);if(n||this.u.length<10||e.duration>t.P){if(n?e.duration>n.P?(n.entries=[e],n.P=e.duration):e.duration===n.P&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],P:e.duration},this.l.set(n.id,n),this.u.push(n)),this.u.sort(((e,t)=>t.P-e.P)),this.u.length>10){const e=this.u.splice(10);for(const t of e)this.l.delete(t.id)}this.p?.(n)}}}const A=e=>{const t=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(e=u(e),document.addEventListener("visibilitychange",e,{once:!0}),t((()=>{e(),document.removeEventListener("visibilitychange",e)})))},B=[200,500];class N{m;h(e){this.m?.(e)}}const S=[2500,4e3],q=[800,1800],O=e=>{document.prerendering?b((()=>O(e))):"complete"!==document.readyState?addEventListener("load",(()=>O(e)),!0):setTimeout(e)};e.CLSThresholds=E,e.FCPThresholds=T,e.INPThresholds=B,e.LCPThresholds=S,e.TTFBThresholds=q,e.onCLS=(e,t={})=>{P(u((()=>{let s,r=c("CLS",0);const a=d(t,h),u=e=>{for(const t of e)a.h(t);a.i>r.value&&(r.value=a.i,r.entries=a.o,s())},l=f("layout-shift",u);l&&(s=i(e,r,E,t.reportAllChanges),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(u(l.takeRecords()),s(!0))})),n((()=>{a.i=0,r=c("CLS",0),s=i(e,r,E,t.reportAllChanges),o((()=>s()))})),setTimeout(s))})))},e.onFCP=P,e.onINP=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&b((()=>{F();let o,s=c("INP");const r=d(t,x),a=e=>{A((()=>{for(const t of e)r.h(t);const t=r.T();t&&t.P!==s.value&&(s.value=t.P,s.entries=t.entries,o())}))},h=f("event",a,{durationThreshold:t.durationThreshold??40});o=i(e,s,B,t.reportAllChanges),h&&(h.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(a(h.takeRecords()),o(!0))})),n((()=>{r.v(),s=c("INP"),o=i(e,s,B,t.reportAllChanges)})))}))},e.onLCP=(e,t={})=>{b((()=>{const s=y();let a,h=c("LCP");const l=d(t,N),m=e=>{t.reportAllChanges||(e=e.slice(-1));for(const t of e)l.h(t),t.startTime<s.firstHiddenTime&&(h.value=Math.max(t.startTime-r(),0),h.entries=[t],a())},p=f("largest-contentful-paint",m);if(p){a=i(e,h,S,t.reportAllChanges);const s=u((()=>{m(p.takeRecords()),p.disconnect(),a(!0)}));for(const e of["keydown","click","visibilitychange"])addEventListener(e,(()=>A(s)),{capture:!0,once:!0});n((n=>{h=c("LCP"),a=i(e,h,S,t.reportAllChanges),o((()=>{h.value=performance.now()-n.timeStamp,a(!0)}))}))}}))},e.onTTFB=(e,t={})=>{let o=c("TTFB"),a=i(e,o,q,t.reportAllChanges);O((()=>{const d=s();d&&(o.value=Math.max(d.responseStart-r(),0),o.entries=[d],a(!0),n((()=>{o=c("TTFB",0),a=i(e,o,q,t.reportAllChanges),a(!0)})))}))}}));
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Statsig=t():e.Statsig=t()}(this,()=>{return n={1845:(e,n,t)=>{"use strict";var r;Object.defineProperty(n,"__esModule",{value:!0}),n._getInstance=n._getStatsigGlobalFlag=n._getStatsigGlobal=void 0;const i=t(7512);n._getStatsigGlobal=()=>{try{return"undefined"!=typeof __STATSIG__?__STATSIG__:l}catch(e){return l}},n._getStatsigGlobalFlag=e=>(0,n._getStatsigGlobal)()[e];n._getInstance=e=>{var t=(0,n._getStatsigGlobal)();return e?t.instances&&t.instances[e]:(t.instances&&1<Object.keys(t.instances).length&&i.Log.warn("Call made to Statsig global instance without an SDK key but there is more than one client instance. If you are using mulitple clients, please specify the SDK key."),t.firstInstance)};var s="__STATSIG__",a="undefined"!=typeof window?window:{},t=void 0!==t.g?t.g:{},o="undefined"!=typeof globalThis?globalThis:{};const l=null!=(r=null!=(r=null!=(r=a[s])?r:t[s])?r:o[s])?r:{instance:n._getInstance};a[s]=l,t[s]=l,o[s]=l},2137:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._getStorageKey=t._getUserStorageKey=void 0;const i=n(1406);function r(e,t,n){if(n)return n(e,t);const r=t&&t.customIDs?t.customIDs:{};t=["uid:"+(null!=(n=null==t?void 0:t.userID)?n:""),"cids:"+Object.keys(r).sort((e,t)=>e.localeCompare(t)).map(e=>e+"-"+r[e]).join(","),"k:"+e];return(0,i._DJB2)(t.join("|"))}t._getUserStorageKey=r,t._getStorageKey=function(e,t,n){return t?r(e,t,n):(0,i._DJB2)("k:"+e)}},6427:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},694:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,a,o,l){return new(o=o||Promise)(function(n,t){function r(e){try{s(l.next(e))}catch(e){t(e)}}function i(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(r,i)}s((l=l.apply(e,a||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t._makeDataAdapterResult=t.DataAdapterCore=void 0;const l=n(7512),u=n(9122),s=n(8578),a=n(4534),c=n(3401);function d(e,t,n,r){return{source:e,data:t,receivedAt:Date.now(),stableID:n,fullUserHash:(0,s._getFullUserHash)(r)}}t.DataAdapterCore=class{constructor(e,t){this._adapterName=e,this._cacheSuffix=t,this._options=null,this._sdkKey=null,this._lastModifiedStoreKey="statsig.last_modified_time."+t,this._inMemoryCache=new r}attach(e,t,n){this._sdkKey=e,this._options=t}getDataSync(e){var e=e&&(0,s._normalizeUser)(e,this._options),t=this._getCacheKey(e),n=this._inMemoryCache.get(t,e);return n&&this._getIsCacheValueValid(n)?n:(n=this._loadFromCache(t))&&this._getIsCacheValueValid(n)?(this._inMemoryCache.add(t,n),this._inMemoryCache.get(t,e)):null}setData(e,t){var t=t&&(0,s._normalizeUser)(t,this._options),n=this._getCacheKey(t);this._inMemoryCache.add(n,d("Bootstrap",e,null,t))}_getIsCacheValueValid(e){return null==e.stableID||e.stableID===u.StableID.get(this._getSdkKey())}_getDataAsyncImpl(t,n,r){return i(this,void 0,void 0,function*(){a.Storage.isReady()||(yield a.Storage.isReadyResolver());var e=null!=t?t:this.getDataSync(n),e=[this._fetchAndPrepFromNetwork(e,n,r)];return null!=r&&r.timeoutMs&&e.push(new Promise(e=>setTimeout(e,r.timeoutMs)).then(()=>(l.Log.debug("Fetching latest value timed out"),null))),yield Promise.race(e)})}_prefetchDataImpl(n,r){return i(this,void 0,void 0,function*(){var e=n&&(0,s._normalizeUser)(n,this._options),t=this._getCacheKey(e),e=yield this._getDataAsyncImpl(null,e,r);e&&this._inMemoryCache.add(t,Object.assign(Object.assign({},e),{source:"Prefetch"}))})}_fetchAndPrepFromNetwork(s,a,o){return i(this,void 0,void 0,function*(){var e=null!=(e=null==s?void 0:s.data)?e:null,t=null!=s&&this._isCachedResultValidFor204(s,a),t=yield this._fetchFromNetwork(e,a,o,t);if(!t)return l.Log.debug("No response returned for latest value"),null;var n=(0,c._typedJsonParse)(t,"has_updates","Response"),r=this._getSdkKey(),r=u.StableID.get(r);let i=null;if(!0===(null==n?void 0:n.has_updates))i=d("Network",t,r,a);else{if(!e||!1!==(null==n?void 0:n.has_updates))return null;i=d("NetworkNotModified",e,r,a)}t=this._getCacheKey(a);return this._inMemoryCache.add(t,i),this._writeToCache(t,i),i})}_getSdkKey(){return null!=this._sdkKey?this._sdkKey:(l.Log.error(this._adapterName+" is not attached to a Client"),"")}_loadFromCache(e){var t=null==(t=a.Storage.getItem)?void 0:t.call(a.Storage,e);return null!=t&&(e=(0,c._typedJsonParse)(t,"source","Cached Result"))?Object.assign(Object.assign({},e),{source:"Cache"}):null}_writeToCache(e,t){a.Storage.setItem(e,JSON.stringify(t)),this._runLocalStorageCacheEviction(e)}_runLocalStorageCacheEviction(e){var t=null!=(t=(0,a._getObjectFromStorage)(this._lastModifiedStoreKey))?t:{},e=(t[e]=Date.now(),o(t,10));e&&(delete t[e],a.Storage.removeItem(e)),(0,a._setObjectInStorage)(this._lastModifiedStoreKey,t)}},t._makeDataAdapterResult=d;class r{constructor(){this._data={}}get(e,t){var e=this._data[e],n=null==e?void 0:e.stableID,t=null==(t=null==t?void 0:t.customIDs)?void 0:t.stableID;return t&&n&&t!==n?(l.Log.warn("'StatsigUser.customIDs.stableID' mismatch"),null):e}add(e,t){var n=o(this._data,9);n&&delete this._data[n],this._data[e]=t}merge(e){this._data=Object.assign(Object.assign({},this._data),e)}}function o(i,e){var t=Object.keys(i);return t.length<=e?null:t.reduce((e,t)=>{var n=i[e],r=i[t];return"object"==typeof n&&"object"==typeof r?r.receivedAt<n.receivedAt?t:e:r<n?t:e})}},8962:(e,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Diagnostics=void 0;const r=new Map,n="start";function i(e,t,n,r){return Object.assign({key:n,action:t,step:r,timestamp:Date.now()},e)}function s(e,t){var n=null!=(n=r.get(e))?n:[];n.push(t),r.set(e,n)}function t(e,t){if(t in e)return e[t]}a.Diagnostics={_getMarkers:e=>r.get(e),_markInitOverallStart:e=>{s(e,i({},n,"overall"))},_markInitOverallEnd:(e,t,n)=>{s(e,i({success:t,error:t?void 0:{name:"InitializeError",message:"Failed to initialize"},evaluationDetails:n},"end","overall"))},_markInitNetworkReqStart:(e,t)=>{s(e,i(t,n,"initialize","network_request"))},_markInitNetworkReqEnd:(e,t)=>{s(e,i(t,"end","initialize","network_request"))},_markInitProcessStart:e=>{s(e,i({},n,"initialize","process"))},_markInitProcessEnd:(e,t)=>{s(e,i(t,"end","initialize","process"))},_clearMarkers:e=>{r.delete(e)},_formatError(e){if(e&&"object"==typeof e)return{code:t(e,"code"),name:t(e,"name"),message:t(e,"message")}},_getDiagnosticsData(e,t,n,r){return{success:!0===(null==e?void 0:e.ok),statusCode:null==e?void 0:e.status,sdkRegion:null==(e=null==e?void 0:e.headers)?void 0:e.get("x-statsig-region"),isDelta:!0===n.includes('"is_delta":true')||void 0,attempt:t,error:a.Diagnostics._formatError(r)}},_enqueueDiagnosticsEvent(e,t,n,r){var i,s=a.Diagnostics._getMarkers(n);return null==s||s.length<=0?-1:(i=s[s.length-1].timestamp-s[0].timestamp,a.Diagnostics._clearMarkers(n),n=function(e,t){e={eventName:"statsig::diagnostics",user:e,value:null,metadata:t,time:Date.now()};return e}(e,{context:"initialize",markers:s.slice(),statsigOptions:r}),t.enqueue(n),i)}}},8809:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,a,o,l){return new(o=o||Promise)(function(n,t){function r(e){try{s(l.next(e))}catch(e){t(e)}}function i(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(r,i)}s((l=l.apply(e,a||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t._fetchTxtRecords=void 0;const i=new Uint8Array([0,0,1,0,0,1,0,0,0,0,0,0,13,102,101,97,116,117,114,101,97,115,115,101,116,115,3,111,114,103,0,0,16,0,1]),s="https://cloudflare-dns.com/dns-query",a=["i","e","d"],o=200;t._fetchTxtRecords=function(t){return n(this,void 0,void 0,function*(){var n=yield t(s,{method:"POST",headers:{"Content-Type":"application/dns-message",Accept:"application/dns-message"},body:i});if(n.ok){var e,n=yield n.arrayBuffer(),n=new Uint8Array(n);{var r=n,n=r.findIndex((e,t)=>t<o&&"="===String.fromCharCode(e)&&a.includes(String.fromCharCode(r[t-1])));if(-1===n)throw(e=new Error("Failed to parse TXT records from DNS")).name="DnsTxtParseError",e;let t="";for(let e=n-1;e<r.length;e++)t+=String.fromCharCode(r[e]);return t.split(",")}}throw(e=new Error("Failed to fetch TXT records from DNS")).name="DnsTxtFetchError",e})}},3539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5542:function(e,o,t){"use strict";var n=this&&this.__awaiter||function(e,a,o,l){return new(o=o||Promise)(function(n,t){function r(e){try{s(l.next(e))}catch(e){t(e)}}function i(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(r,i)}s((l=l.apply(e,a||[])).next())})};Object.defineProperty(o,"__esModule",{value:!0}),o.ErrorBoundary=o.EXCEPTION_ENDPOINT=void 0;const r=t(7512),l=t(5902),u=t(8e3),c=(o.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception","[Statsig] UnknownError");function d(e){return e instanceof Error?e:"string"==typeof e?new Error(e):new Error("An unknown error occurred.")}o.ErrorBoundary=class{constructor(e,t,n,r){this._sdkKey=e,this._options=t,this._emitter=n,this._lastSeenError=r,this._seen=new Set}wrap(r,i){try{const e=r;!function(e){const t=new Set;let n=Object.getPrototypeOf(e);for(;n&&n!==Object.prototype;)Object.getOwnPropertyNames(n).filter(e=>"function"==typeof(null===n||void 0===n?void 0:n[e])).forEach(e=>t.add(e)),n=Object.getPrototypeOf(n);return Array.from(t)}(e).forEach(t=>{const n=e[t];"$EB"in n||(e[t]=(...e)=>this._capture(i?i+":"+t:t,()=>n.apply(r,e)),e[t].$EB=!0)})}catch(e){this._onError("eb:wrap",e)}}logError(e,t){this._onError(e,t)}getLastSeenErrorAndReset(){var e=this._lastSeenError;return this._lastSeenError=void 0,null!=e?e:null}attachErrorIfNoneExists(e){this._lastSeenError||(this._lastSeenError=d(e))}_capture(t,e){try{var n=e();return n&&n instanceof Promise?n.catch(e=>this._onError(t,e)):n}catch(e){return this._onError(t,e),null}}_onError(s,a){try{r.Log.warn("Caught error in "+s,{error:a});n(this,void 0,void 0,function*(){var e,t=a||Error(c),n=t instanceof Error,r=n?t.name:"No Name",i=d(t);this._lastSeenError=i,this._seen.has(r)||(this._seen.add(r),null!=(i=null==(i=this._options)?void 0:i.networkConfig)&&i.preventAllNetworkTraffic?null!=(i=this._emitter)&&i.call(this,{name:"error",error:a,tag:s}):(i=l.SDKType._get(this._sdkKey),e=u.StatsigMetadataProvider.get(),n=n?t.stack:function(e){try{return JSON.stringify(e)}catch(e){return c}}(t),t=Object.assign({tag:s,exception:r,info:n,statsigOptions:function(r){if(!r)return{};const i={};return Object.keys(r).forEach(e=>{var t=e,n=r[t];switch(typeof n){case"number":case"bigint":case"boolean":i[String(t)]=n;break;case"string":n.length<50?i[String(t)]=n:i[String(t)]="set";break;case"object":"environment"===t?i.environment=n:"networkConfig"===t?i.networkConfig=n:i[String(t)]=null!=n?"set":"unset"}}),i}(this._options)},Object.assign(Object.assign({},e),{sdkType:i})),yield(null!=(r=null==(n=null==(r=this._options)?void 0:r.networkConfig)?void 0:n.networkOverrideFunc)?r:fetch)(o.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this._sdkKey,"STATSIG-SDK-TYPE":String(i),"STATSIG-SDK-VERSION":String(e.sdkVersion),"Content-Type":"application/json"},body:JSON.stringify(t)}),null!=(n=this._emitter)&&n.call(this,{name:"error",error:a,tag:s})))}).then(()=>{}).catch(()=>{})}catch(e){}}}},2922:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2417:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7770:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,a,o,l){return new(o=o||Promise)(function(n,t){function r(e){try{s(l.next(e))}catch(e){t(e)}}function i(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(r,i)}s((l=l.apply(e,a||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.EventLogger=void 0;const i=n(2137),s=n(1406),a=n(7512),o=n(7410),l=n(6830),u=n(1637),c=n(586),d=n(4534),h=n(1881),g=n(2397),p={},m={Startup:"startup",GainedFocus:"gained_focus"};class _{static _safeFlushAndForget(e){null!=(e=p[e])&&e.flush().catch(()=>{})}static _safeRetryFailedLogs(e){null!=(e=p[e])&&e._retryFailedLogs(m.GainedFocus)}constructor(e,t,n,r){this._sdkKey=e,this._emitter=t,this._network=n,this._options=r,this._queue=[],this._lastExposureTimeMap={},this._nonExposedChecks={},this._hasRunQuickFlush=!1,this._creationTime=Date.now(),this._loggingEnabled=null!=(e=null==r?void 0:r.loggingEnabled)?e:!0===(null==r?void 0:r.disableLogging)?c.LoggingEnabledOption.disabled:c.LoggingEnabledOption.browserOnly,null!=r&&r.loggingEnabled&&void 0!==r.disableLogging&&a.Log.warn("Detected both loggingEnabled and disableLogging options. loggingEnabled takes precedence - please remove disableLogging."),this._maxQueueSize=null!=(t=null==r?void 0:r.loggingBufferMaxSize)?t:100;n=null==r?void 0:r.networkConfig;this._logEventUrlConfig=new h.UrlConfiguration(o.Endpoint._rgstr,null==n?void 0:n.logEventUrl,null==n?void 0:n.api,null==n?void 0:n.logEventFallbackUrls)}setLogEventCompressionMode(e){this._network.setLogEventCompressionMode(e)}setLoggingEnabled(e){this._loggingEnabled=e}enqueue(e){this._shouldLogEvent(e)&&(this._normalizeAndAppendEvent(e),this._quickFlushIfNeeded(),this._queue.length>this._maxQueueSize)&&_._safeFlushAndForget(this._sdkKey)}incrementNonExposureCount(e){var t=null!=(t=this._nonExposedChecks[e])?t:0;this._nonExposedChecks[e]=t+1}reset(){this.flush().catch(()=>{}),this._lastExposureTimeMap={}}start(){var e,t=(0,l._isServerEnv)();t&&"always"!==(null==(e=this._options)?void 0:e.loggingEnabled)||(p[this._sdkKey]=this,t||(0,g._subscribeToVisiblityChanged)(e=>{"background"===e?_._safeFlushAndForget(this._sdkKey):"foreground"===e&&_._safeRetryFailedLogs(this._sdkKey)}),this._retryFailedLogs(m.Startup),this._startBackgroundFlushInterval())}stop(){return r(this,void 0,void 0,function*(){this._flushIntervalId&&(clearInterval(this._flushIntervalId),this._flushIntervalId=null),delete p[this._sdkKey],yield this.flush()})}flush(){return r(this,void 0,void 0,function*(){var e;this._appendAndResetNonExposedChecks(),0!==this._queue.length&&(e=this._queue,this._queue=[],yield this._sendEvents(e))})}_quickFlushIfNeeded(){this._hasRunQuickFlush||(this._hasRunQuickFlush=!0,200<Date.now()-this._creationTime)||setTimeout(()=>_._safeFlushAndForget(this._sdkKey),200)}_shouldLogEvent(e){if("always"!==(null==(t=this._options)?void 0:t.loggingEnabled)&&(0,l._isServerEnv)())return!1;if((0,u._isExposureEvent)(e)){var t=e.user||{statsigEnvironment:void 0},t=(0,i._getUserStorageKey)(this._sdkKey,t),n=e.metadata||{},e=[e.eventName,t,n.gate,n.config,n.ruleID,n.allocatedExperiment,n.parameterName,String(n.isExplicitParameter),n.reason].join("|"),t=this._lastExposureTimeMap[e],n=Date.now();if(t&&n-t<6e5)return!1;1e3<Object.keys(this._lastExposureTimeMap).length&&(this._lastExposureTimeMap={}),this._lastExposureTimeMap[e]=n}return!0}_sendEvents(i){return r(this,void 0,void 0,function*(){var e,t;if("disabled"===this._loggingEnabled)return this._saveFailedLogsToStorage(i),!1;try{var n=(0,g._isUnloading)()&&this._network.isBeaconSupported()&&null==(null==(t=null==(e=this._options)?void 0:e.networkConfig)?void 0:t.networkOverrideFunc),r=(this._emitter({name:"pre_logs_flushed",events:i}),n?this._sendEventsViaBeacon(i):yield this._sendEventsViaPost(i));return r.success?(this._emitter({name:"logs_flushed",events:i}),!0):(a.Log.warn("Failed to flush events."),this._saveFailedLogsToStorage(i),!1)}catch(e){return a.Log.warn("Failed to flush events."),!1}})}_sendEventsViaPost(t){return r(this,void 0,void 0,function*(){var e=yield this._network.post(this._getRequestData(t)),e=null!=(e=null==e?void 0:e.code)?e:-1;return{success:200<=e&&e<300}})}_sendEventsViaBeacon(e){return{success:this._network.beacon(this._getRequestData(e))}}_getRequestData(e){return{sdkKey:this._sdkKey,data:{events:e},urlConfig:this._logEventUrlConfig,retries:3,isCompressable:!0,params:{[o.NetworkParam.EventCount]:String(e.length)},credentials:"same-origin"}}_saveFailedLogsToStorage(e){for(;500<e.length;)e.shift();var t=this._getStorageKey();try{(0,d._setObjectInStorage)(t,e)}catch(e){a.Log.warn("Unable to save failed logs to storage")}}_retryFailedLogs(t){const n=this._getStorageKey();r(this,void 0,void 0,function*(){d.Storage.isReady()||(yield d.Storage.isReadyResolver());var e=(0,d._getObjectFromStorage)(n);e&&(t===m.Startup&&d.Storage.removeItem(n),yield this._sendEvents(e))&&t===m.GainedFocus&&d.Storage.removeItem(n)}).catch(()=>{a.Log.warn("Failed to flush stored logs")})}_getStorageKey(){return"statsig.failed_logs."+(0,s._DJB2)(this._sdkKey)}_normalizeAndAppendEvent(e){e.user&&(e.user=Object.assign({},e.user),delete e.user.privateAttributes);var t={},n=this._getCurrentPageUrl(),n=(n&&(t.statsigMetadata={currentPage:n}),Object.assign(Object.assign({},e),t));a.Log.debug("Enqueued Event:",n),this._queue.push(n)}_appendAndResetNonExposedChecks(){0!==Object.keys(this._nonExposedChecks).length&&(this._normalizeAndAppendEvent({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:Object.assign({},this._nonExposedChecks)}}),this._nonExposedChecks={})}_getCurrentPageUrl(){var e;if(!1!==(null==(e=this._options)?void 0:e.includeCurrentPageUrlWithEvents))return(0,l._getCurrentPageUrlSafe)()}_startBackgroundFlushInterval(){var e=null!=(e=null==(e=this._options)?void 0:e.loggingIntervalMs)?e:1e4;const t=setInterval(()=>{var e=p[this._sdkKey];e&&e._flushIntervalId===t?_._safeFlushAndForget(this._sdkKey):clearInterval(t)},e);this._flushIntervalId=t}}t.EventLogger=_},1406:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s._getSortedObject=s._DJB2Object=s._DJB2=void 0;const a=t(6634);s._DJB2=t=>{let n=0;for(let e=0;e<t.length;e++){var r=t.charCodeAt(e);n=(n<<5)-n+r,n&=n}return String(n>>>0)},s._DJB2Object=(e,t)=>(0,s._DJB2)(JSON.stringify((0,s._getSortedObject)(e,t)));s._getSortedObject=(n,r)=>{if(null==n)return null;var e=Object.keys(n).sort();const i={};return e.forEach(e=>{var t=n[e];0===r||"object"!==(0,a._typeOf)(t)?i[e]=t:i[e]=(0,s._getSortedObject)(t,null!=r?r-1:r)}),i}},1333:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7512:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Log=t.LogLevel=void 0;function n(e){return e.unshift("[Statsig]"),e}t.LogLevel={None:0,Error:1,Warn:2,Info:3,Debug:4};class r{static info(...e){r.level>=t.LogLevel.Info&&console.info("  INFO ",...n(e))}static debug(...e){r.level>=t.LogLevel.Debug&&console.debug(" DEBUG ",...n(e))}static warn(...e){r.level>=t.LogLevel.Warn&&console.warn("  WARN ",...n(e))}static error(...e){r.level>=t.LogLevel.Error&&console.error(" ERROR ",...n(e))}}(t.Log=r).level=t.LogLevel.Warn},7787:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMemoKey=t.MemoPrefix=void 0,t.MemoPrefix={_gate:"g",_dynamicConfig:"c",_experiment:"e",_configList:"cl",_layer:"l",_paramStore:"p"};const s=new Set([]),a=new Set(["userPersistedValues"]);t.createMemoKey=function(e,t,n){let r=e+"|"+t;if(n)for(const i of Object.keys(n)){if(a.has(i))return;s.has(i)?r+=`|${i}=true`:r+=`|${i}=`+n[i]}return r}},7410:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkParam=t.NetworkDefault=t.Endpoint=void 0,t.Endpoint={_initialize:"initialize",_rgstr:"rgstr",_download_config_specs:"download_config_specs"},t.NetworkDefault={[t.Endpoint._rgstr]:"https://prodregistryv2.org/v1",[t.Endpoint._initialize]:"https://featureassets.org/v1",[t.Endpoint._download_config_specs]:"https://api.statsigcdn.com/v1"},t.NetworkParam={EventCount:"ec",SdkKey:"k",SdkType:"st",SdkVersion:"sv",Time:"t",SessionID:"sid",StatsigEncoded:"se",IsGzipped:"gz"}},7023:function(e,t,n){"use strict";var S=this&&this.__awaiter||function(e,a,o,l){return new(o=o||Promise)(function(n,t){function r(e){try{s(l.next(e))}catch(e){t(e)}}function i(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(r,i)}s((l=l.apply(e,a||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkCore=void 0,n(1845);const g=n(1845),b=n(8962),C=n(7512),I=n(7410),r=n(308),p=n(3091),a=n(5902),i=n(6830),o=n(4143),l=n(9122),w=n(2636),u=n(8e3),m=n(586),k=n(2397),E=500,M=3e4;const T=new Set([408,500,502,503,504,522,524,599]);t.NetworkCore=class{constructor(e,t){this._emitter=t,this._errorBoundary=null,this._timeout=1e4,this._netConfig={},this._options={},this._leakyBucket={},this._lastUsedInitUrl=null,e&&(this._options=e),this._options.networkConfig&&(this._netConfig=this._options.networkConfig),this._netConfig.networkTimeoutMs&&(this._timeout=this._netConfig.networkTimeoutMs),this._fallbackResolver=new r.NetworkFallbackResolver(this._options),this.setLogEventCompressionMode(this._getLogEventCompressionMode(e))}setLogEventCompressionMode(e){this._options.logEventCompressionMode=e}setErrorBoundary(e){this._errorBoundary=e,this._errorBoundary.wrap(this),this._errorBoundary.wrap(this._fallbackResolver),this._fallbackResolver.setErrorBoundary(e)}isBeaconSupported(){return"undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon}getLastUsedInitUrlAndReset(){var e=this._lastUsedInitUrl;return this._lastUsedInitUrl=null,e}beacon(e){var t,n;return!!O(e)&&(e=this._getInternalRequestArgs("POST",e),t=this._getPopulatedURL(e),(n=navigator).sendBeacon.bind(n)(t,e.body))}post(t){return S(this,void 0,void 0,function*(){var e=this._getInternalRequestArgs("POST",t);return this._tryEncodeBody(e),yield this._tryToCompressBody(e),this._sendRequest(e)})}get(e){e=this._getInternalRequestArgs("GET",e);return this._sendRequest(e)}_sendRequest(y){return S(this,void 0,void 0,function*(){var t;if(!O(y))return null;if(this._netConfig.preventAllNetworkTraffic)return null;var{method:n,body:r,retries:i,attempt:s}=y,a=y.urlConfig.endpoint;if(this._isRateLimited(a))return C.Log.warn(`Request to ${a} was blocked because you are making requests too frequently.`),null;s=null!=s?s:1;const o="undefined"!=typeof AbortController?new AbortController:null;var e=setTimeout(()=>{null!==o&&void 0!==o&&o.abort(`Timeout of ${this._timeout}ms expired.`)},this._timeout),l=this._getPopulatedURL(y);let u=null;var c,d=(0,k._isUnloading)();try{var h,g,p,m={method:n,body:r,headers:Object.assign({},y.headers),signal:null===o||void 0===o?void 0:o.signal,priority:y.priority,keepalive:d},_=(c=s,(v=y).urlConfig.endpoint===I.Endpoint._initialize&&b.Diagnostics._markInitNetworkReqStart(v.sdkKey,{attempt:c}),this._leakyBucket[a]),f=(_&&(_.lastRequestTime=Date.now(),this._leakyBucket[a]=_),null!=(t=this._netConfig.networkOverrideFunc)?t:fetch);if(u=yield f(l,m),clearTimeout(e),u.ok)return p=yield u.text(),D(y,u,s,p),this._fallbackResolver.tryBumpExpiryTime(y.sdkKey,y.urlConfig),{body:p,code:u.status};throw h=yield u.text().catch(()=>"No Text"),(g=new Error(`NetworkError: ${l} `+h)).name="NetworkError",g}catch(e){var r=function(e,t){if(null!=e&&e.signal.aborted&&"string"==typeof e.signal.reason)return e.signal.reason;if("string"==typeof t)return t;if(t instanceof Error)return t.name+": "+t.message;return"Unknown Error"}(o,e),d=function(e){e=(null==e?void 0:e.signal.aborted)&&"string"==typeof e.signal.reason&&e.signal.reason.includes("Timeout");return e||!1}(o),v=(D(y,u,s,"",e),yield this._fallbackResolver.tryFetchUpdatedFallbackInfo(y.sdkKey,y.urlConfig,r,d));return(v&&(y.fallbackUrl=this._fallbackResolver.getActiveFallbackUrl(y.sdkKey,y.urlConfig)),!i||i<s||!T.has(null!=(c=null===u||void 0===u?void 0:u.status)?c:500))?(null!=(a=this._emitter)&&a.call(this,{name:"error",error:e,tag:w.ErrorTag.NetworkError,requestArgs:y}),_=`A networking error occurred during ${n} request to ${l}.`,C.Log.error(_,r,e),null!=(t=this._errorBoundary)&&t.attachErrorIfNoneExists(_),null):(yield function(t){return S(this,void 0,void 0,function*(){yield new Promise(e=>setTimeout(e,Math.min(E*(t*t),M)))})}(s),this._sendRequest(Object.assign(Object.assign({},y),{retries:i,attempt:s+1})))}})}_getLogEventCompressionMode(e){let t=null==e?void 0:e.logEventCompressionMode;return t=(t=t||!0!==(null==e?void 0:e.disableCompression)?t:m.LogEventCompressionMode.Disabled)||m.LogEventCompressionMode.Enabled}_isRateLimited(e){var t=Date.now(),n=null!=(n=this._leakyBucket[e])?n:{count:0,lastRequestTime:t},r=t-n.lastRequestTime,r=Math.floor(.05*r);return n.count=Math.max(0,n.count-r),50<=n.count||(n.count+=1,n.lastRequestTime=t,this._leakyBucket[e]=n,!1)}_getPopulatedURL(e){var t=null!=(t=e.fallbackUrl)?t:e.urlConfig.getUrl();e.urlConfig.endpoint!==I.Endpoint._initialize&&e.urlConfig.endpoint!==I.Endpoint._download_config_specs||(this._lastUsedInitUrl=t);const n=Object.assign({[I.NetworkParam.SdkKey]:e.sdkKey,[I.NetworkParam.SdkType]:a.SDKType._get(e.sdkKey),[I.NetworkParam.SdkVersion]:u.SDK_VERSION,[I.NetworkParam.Time]:String(Date.now()),[I.NetworkParam.SessionID]:o.SessionID.get(e.sdkKey)},e.params);e=Object.keys(n).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(n[e])).join("&");return t+(e?"?"+e:"")}_tryEncodeBody(t){var e,n=(0,i._getWindowSafe)(),r=t.body;if(t.isStatsigEncodable&&!this._options.disableStatsigEncoding&&"string"==typeof r&&null==(0,g._getStatsigGlobalFlag)("no-encode")&&null!=n&&n.btoa)try{t.body=n.btoa(r).split("").reverse().join(""),t.params=Object.assign(Object.assign({},null!=(e=t.params)?e:{}),{[I.NetworkParam.StatsigEncoded]:"1"})}catch(e){C.Log.warn("Request encoding failed for "+t.urlConfig.getUrl(),e)}}_tryToCompressBody(h){return S(this,void 0,void 0,function*(){var t,n=h.body;if("string"==typeof n&&function(e,t){if(!e.isCompressable)return;if(null!=(0,g._getStatsigGlobalFlag)("no-compress")||"undefined"==typeof CompressionStream||"undefined"==typeof TextEncoder)return;var n=null!=e.urlConfig.customUrl||null!=e.urlConfig.fallbackUrls,r=!0===p.SDKFlags.get(e.sdkKey,"enable_log_event_compression");switch(t.logEventCompressionMode){case m.LogEventCompressionMode.Disabled:return;case m.LogEventCompressionMode.Enabled:return n&&!r?void 0:1;case m.LogEventCompressionMode.Forced:return 1;default:return}}(h,this._options))try{for(var r,i=(new TextEncoder).encode(n),s=new CompressionStream("gzip"),a=s.writable.getWriter(),o=(a.write(i).catch(C.Log.error),a.close().catch(C.Log.error),s.readable.getReader()),l=[];!(r=yield o.read()).done;)l.push(r.value);var u=l.reduce((e,t)=>e+t.length,0),c=new Uint8Array(u);let e=0;for(const d of l)c.set(d,e),e+=d.length;h.body=c,h.params=Object.assign(Object.assign({},null!=(t=h.params)?t:{}),{[I.NetworkParam.IsGzipped]:"1"})}catch(e){C.Log.warn("Request compression failed for "+h.urlConfig.getUrl(),e)}})}_getInternalRequestArgs(e,t){var n=this._fallbackResolver.getActiveFallbackUrl(t.sdkKey,t.urlConfig),e=Object.assign(Object.assign({},t),{method:e,fallbackUrl:n});return"data"in t&&s(e,t.data),e}};const O=e=>!!e.sdkKey||(C.Log.warn("Unable to make request without an SDK key"),!1),s=(e,t)=>{var{sdkKey:n,fallbackUrl:r}=e,i=l.StableID.get(n),s=o.SessionID.get(n),n=a.SDKType._get(n);e.body=JSON.stringify(Object.assign(Object.assign({},t),{statsigMetadata:Object.assign(Object.assign({},u.StatsigMetadataProvider.get()),{stableID:i,sessionID:s,sdkType:n,fallbackUrl:r})}))};function D(e,t,n,r,i){e.urlConfig.endpoint===I.Endpoint._initialize&&b.Diagnostics._markInitNetworkReqEnd(e.sdkKey,b.Diagnostics._getDiagnosticsData(t,n,r,i))}},308:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,a,o,l){return new(o=o||Promise)(function(n,t){function r(e){try{s(l.next(e))}catch(e){t(e)}}function i(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(r,i)}s((l=l.apply(e,a||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t._isDomainFailure=t.NetworkFallbackResolver=void 0;const a=n(8809),r=n(1406),s=n(7512),l=n(4534);function u(e,t){e=null!=(e=null==e?void 0:e.toLowerCase())?e:"";return t||e.includes("uncaught exception")||e.includes("failed to fetch")||e.includes("networkerror when attempting to fetch resource")}function c(e){return"statsig.network_fallback."+(0,r._DJB2)(e)}function d(e,t){e=c(e);t&&0!==Object.keys(t).length?l.Storage.setItem(e,JSON.stringify(t)):l.Storage.removeItem(e)}t.NetworkFallbackResolver=class{constructor(e){this._fallbackInfo=null,this._errorBoundary=null,this._dnsQueryCooldowns={},this._networkOverrideFunc=null==(e=e.networkConfig)?void 0:e.networkOverrideFunc}setErrorBoundary(e){this._errorBoundary=e}tryBumpExpiryTime(e,t){var n=null==(n=this._fallbackInfo)?void 0:n[t.endpoint];n&&(n.expiryTime=Date.now()+6048e5,d(e,Object.assign(Object.assign({},this._fallbackInfo),{[t.endpoint]:n})))}getActiveFallbackUrl(e,t){var n;if(null!=t.customUrl&&null!=t.fallbackUrls)return null;let r=this._fallbackInfo;null==r&&(r=null!=(i=function(e){e=c(e),e=l.Storage.getItem(e);if(!e)return null;try{return JSON.parse(e)}catch(e){return s.Log.error("Failed to parse FallbackInfo"),null}}(e))?i:{},this._fallbackInfo=r);var i=r[t.endpoint];return!i||Date.now()>(null!=(n=i.expiryTime)?n:0)||t.getChecksum()!==i.urlConfigChecksum?(delete r[t.endpoint],this._fallbackInfo=r,d(e,this._fallbackInfo),null):i.url||null}tryFetchUpdatedFallbackInfo(r,i,s,a){return o(this,void 0,void 0,function*(){var t,e,n;try{return u(s,a)?(e=null==i.customUrl&&null==i.fallbackUrls?yield this._tryFetchFallbackUrlsFromNetwork(i):i.fallbackUrls,!!(n=this._pickNewFallbackUrl(null==(t=this._fallbackInfo)?void 0:t[i.endpoint],e))&&(this._updateFallbackInfoWithNewUrl(r,i,n),!0)):!1}catch(e){return null!=(t=this._errorBoundary)&&t.logError("tryFetchUpdatedFallbackInfo",e),!1}})}_updateFallbackInfoWithNewUrl(e,t,n){var n={urlConfigChecksum:t.getChecksum(),url:n,expiryTime:Date.now()+6048e5,previous:[]},t=t.endpoint,r=null==(r=this._fallbackInfo)?void 0:r[t],r=(r&&n.previous.push(...r.previous),10<n.previous.length&&(n.previous=[]),null==(r=null==(r=this._fallbackInfo)?void 0:r[t])?void 0:r.url);null!=r&&n.previous.push(r),this._fallbackInfo=Object.assign(Object.assign({},this._fallbackInfo),{[t]:n}),d(e,this._fallbackInfo)}_tryFetchFallbackUrlsFromNetwork(s){return o(this,void 0,void 0,function*(){var e=this._dnsQueryCooldowns[s.endpoint];if(e&&Date.now()<e)return null;this._dnsQueryCooldowns[s.endpoint]=Date.now()+144e5;var t=[],e=yield(0,a._fetchTxtRecords)(null!=(e=this._networkOverrideFunc)?e:fetch),n=function(e){try{return new URL(e).pathname}catch(e){return null}}(s.defaultUrl);for(const i of e)if(i.startsWith(s.endpointDnsKey+"=")){var r=i.split("=");if(1<r.length){let e=r[1];e.endsWith("/")&&(e=e.slice(0,-1)),t.push("https://"+e+n)}}return t})}_pickNewFallbackUrl(e,t){var n;if(null==t)return null;var r=new Set(null!=(n=null==e?void 0:e.previous)?n:[]),i=null==e?void 0:e.url;let s=null;for(const o of t){var a=o.endsWith("/")?o.slice(0,-1):o;if(!r.has(o)&&a!==i){s=a;break}}return s}},t._isDomainFailure=u},1405:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1361:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3091:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDKFlags=void 0;const n={};t.SDKFlags={setFlags:(e,t)=>{n[e]=t},get:(e,t)=>{return null!=(e=null==(e=n[e])?void 0:e[t])&&e}}},5902:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDKType=void 0;const n={};let r;t.SDKType={_get:e=>{return(null!=(e=n[e])?e:"js-mono")+(null!==r&&void 0!==r?r:"")},_setClientType(e,t){n[e]=t},_setBindingType(e){r&&"-react"!==r||(r="-"+e)}}},6830:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r._getUnloadEvent=r._getCurrentPageUrlSafe=r._addDocumentEventListenerSafe=r._addWindowEventListenerSafe=r._isServerEnv=r._getDocumentSafe=r._getWindowSafe=void 0;r._getWindowSafe=()=>"undefined"!=typeof window?window:null,r._getDocumentSafe=()=>{var e=(0,r._getWindowSafe)();return null!=(e=null==e?void 0:e.document)?e:null},r._isServerEnv=()=>{var e;return null===(0,r._getDocumentSafe)()&&(e="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,"string"==typeof EdgeRuntime||e)},r._addWindowEventListenerSafe=(e,t)=>{var n=(0,r._getWindowSafe)();"function"==typeof(null==n?void 0:n.addEventListener)&&n.addEventListener(e,t)},r._addDocumentEventListenerSafe=(e,t)=>{var n=(0,r._getDocumentSafe)();"function"==typeof(null==n?void 0:n.addEventListener)&&n.addEventListener(e,t)},r._getCurrentPageUrlSafe=()=>{var e;try{return null==(e=(0,r._getWindowSafe)())?void 0:e.location.href.split(/[?#]/)[0]}catch(e){}};r._getUnloadEvent=()=>{var e=(0,r._getWindowSafe)();return e&&"onpagehide"in e?"pagehide":"beforeunload"}},4143:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigSession=t.SessionID=void 0;const r=n(1845),i=n(2137),o=n(7512),l=n(4534),u=n(8023),c=18e5,d=144e5,h={};function g(t,e){return setTimeout(()=>{var e=null==(e=(0,r._getStatsigGlobal)())?void 0:e.instance(t);e&&e.$emt({name:"session_expired"})},e)}function p(e){return"statsig.session_id."+(0,i._getStorageKey)(e)}t.SessionID={get:e=>t.StatsigSession.get(e).data.sessionID},t.StatsigSession={get:e=>{null==h[e]&&(h[e]=function(e){let t=function(e){e=p(e);return(0,l._getObjectFromStorage)(e)}(e);var n=Date.now();t=t||{sessionID:(0,u.getUUID)(),startTime:n,lastUpdate:n};return{data:t,sdkKey:e}}(e));var e=h[e],t=Date.now(),n=e.data,r=e.sdkKey,i=((function({lastUpdate:e}){return Date.now()-e>c}(n)||function({startTime:e}){return Date.now()-e>d}(n))&&(n.sessionID=(0,u.getUUID)(),n.startTime=t,a=null===__STATSIG__||void 0===__STATSIG__?void 0:__STATSIG__.instance(r))&&a.$emt({name:"session_expired"}),n.lastUpdate=t,n),s=e.sdkKey;s=p(s);try{(0,l._setObjectInStorage)(s,i)}catch(e){o.Log.warn("Failed to save SessionID")}clearTimeout(e.idleTimeoutID),clearTimeout(e.ageTimeoutID);var a=t-n.startTime;return e.idleTimeoutID=g(r,c),e.ageTimeoutID=g(r,d-a),e},overrideInitialSessionID:(e,t)=>{var n;h[t]=(e=e,t=t,n=Date.now(),{data:{sessionID:e,startTime:n,lastUpdate:n},sdkKey:t})}}},2176:(e,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o._fastApproxSizeOf=void 0;o._fastApproxSizeOf=(t,n)=>{let r=0;var i=Object.keys(t);for(let e=0;e<i.length;e++){var s=i[e],a=t[s];if((r=(r+=s.length)+("object"==typeof a&&null!==a?(0,o._fastApproxSizeOf)(a,n)+2:String(a).length+1))>=n)return r}return r}},9122:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCookieName=t.StableID=void 0;const r=n(2137),i=n(7512),s=n(6830),a=n(4534),o=n(8023),l={},u={},c={};function d(e){return"statsig.stable_id."+(0,r._getStorageKey)(e)}function h(e,t){t=d(t);try{(0,a._setObjectInStorage)(t,e)}catch(e){i.Log.warn("Failed to save StableID to storage")}}function g(e,t){var n;u[t]&&null!=(0,s._getDocumentSafe)()&&((n=new Date).setFullYear(n.getFullYear()+1),document.cookie=`${p(t)}=${encodeURIComponent(e)}; expires=${n.toUTCString()}; path=/`)}function p(e){return"statsig.stable_id."+(0,r._getStorageKey)(e)}t.StableID={cookiesEnabled:!1,randomID:Math.random().toString(36),get:e=>{if(c[e])return null;if(null!=l[e])return l[e];let t=null;return null!=(t=function(e){if(u[e]&&null!=(0,s._getDocumentSafe)())for(const r of document.cookie.split(";")){var[t,n]=r.trim().split("=");if(t===p(e))return decodeURIComponent(n)}return null}(e))?h(l[e]=t,e):(h(t=null==(t=function(e){e=d(e);return(0,a._getObjectFromStorage)(e)}(e))?(0,o.getUUID)():t,e),g(t,e),l[e]=t),t},setOverride:(e,t)=>{h(l[t]=e,t),g(e,t)},_setCookiesEnabled:(e,t)=>{u[e]=t},_setDisabled:(e,t)=>{c[e]=t}},t.getCookieName=p},1375:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,a,o,l){return new(o=o||Promise)(function(n,t){function r(e){try{s(l.next(e))}catch(e){t(e)}}function i(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(r,i)}s((l=l.apply(e,a||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigClientBase=void 0,n(1845);const a=n(1845),o=n(5542),l=n(7770),u=n(7512),s=n(7787),c=n(6830),d=n(4143),h=n(9122),i=n(586),g=n(4534);t.StatsigClientBase=class{constructor(e,t,n,r){this.loadingStatus="Uninitialized",this._initializePromise=null,this._listeners={};var i,s=this.$emt.bind(this);null!=(null==r?void 0:r.logLevel)&&(u.Log.level=r.logLevel),null!=r&&r.disableStorage&&g.Storage._setDisabled(!0),null!=r&&r.initialSessionID&&d.StatsigSession.overrideInitialSessionID(r.initialSessionID,e),null!=r&&r.storageProvider&&g.Storage._setProvider(r.storageProvider),null!=r&&r.enableCookies&&h.StableID._setCookiesEnabled(e,r.enableCookies),null!=r&&r.disableStableID&&h.StableID._setDisabled(e,!0),this._sdkKey=e,this._options=null!=r?r:{},this._memoCache={},this.overrideAdapter=null!=(i=null==r?void 0:r.overrideAdapter)?i:null,this._logger=new l.EventLogger(e,s,n,r),this._errorBoundary=new o.ErrorBoundary(e,r,s),this._errorBoundary.wrap(this),this._errorBoundary.wrap(t),this._errorBoundary.wrap(this._logger),n.setErrorBoundary(this._errorBoundary),this.dataAdapter=t,this.dataAdapter.attach(e,r,n),this.storageProvider=g.Storage,null!=(t=null==(s=null==(i=this.overrideAdapter)?void 0:i.loadFromStorage)?void 0:s.call(i))&&t.catch(e=>this._errorBoundary.logError("OA::loadFromStorage",e)),this._primeReadyRipcord(),r=e,n=this,(0,c._isServerEnv)()||(s=(0,a._getStatsigGlobal)(),i=null!=(i=s.instances)?i:{},n=n,null!=i[r]&&u.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys."),i[r]=n,s.firstInstance||(s.firstInstance=n),s.instances=i,__STATSIG__=s)}updateRuntimeOptions(e){e.loggingEnabled?(this._options.loggingEnabled=e.loggingEnabled,this._logger.setLoggingEnabled(e.loggingEnabled)):null!=e.disableLogging&&(this._options.disableLogging=e.disableLogging,this._logger.setLoggingEnabled(e.disableLogging?"disabled":"browser-only")),null!=e.disableStorage&&(this._options.disableStorage=e.disableStorage,g.Storage._setDisabled(e.disableStorage)),null!=e.enableCookies&&(this._options.enableCookies=e.enableCookies,h.StableID._setCookiesEnabled(this._sdkKey,e.enableCookies)),e.logEventCompressionMode?this._logger.setLogEventCompressionMode(e.logEventCompressionMode):e.disableCompression&&this._logger.setLogEventCompressionMode(i.LogEventCompressionMode.Disabled)}flush(){return this._logger.flush()}shutdown(){return r(this,void 0,void 0,function*(){this.$emt({name:"pre_shutdown"}),this._setStatus("Uninitialized",null),this._initializePromise=null,yield this._logger.stop()})}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]&&-1!==(t=this._listeners[e].indexOf(t))&&this._listeners[e].splice(t,1)}$on(e,t){t.__isInternal=!0,this.on(e,t)}$emt(n){var e;const t=t=>{try{t(n)}catch(e){!0===t.__isInternal?this._errorBoundary.logError("__emit:"+n.name,e):u.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",n)}};this._listeners[n.name]&&this._listeners[n.name].forEach(e=>t(e)),null!=(e=this._listeners["*"])&&e.forEach(t)}_setStatus(e,t){this.loadingStatus=e,this._memoCache={},this.$emt({name:"values_updated",status:e,values:t})}_enqueueExposure(e,t,n){!0===(null==n?void 0:n.disableExposureLog)?this._logger.incrementNonExposureCount(e):this._logger.enqueue(t)}_memoize(r,i){return(e,t)=>{var n;return!this._options.disableEvaluationMemoization&&(n=(0,s.createMemoKey)(r,e,t))?(n in this._memoCache||(3e3<=Object.keys(this._memoCache).length&&(this._memoCache={}),this._memoCache[n]=i(e,t)),this._memoCache[n]):i(e,t)}}}},2636:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTag=void 0,t.ErrorTag={NetworkError:"NetworkError"}},3206:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataAdapterCachePrefix=void 0,t.DataAdapterCachePrefix="statsig.cached"},1637:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._createLayerParameterExposure=t._createConfigExposure=t._mapExposures=t._createGateExposure=t._isExposureEvent=void 0;const s="statsig::config_exposure",a="statsig::gate_exposure",u="statsig::layer_exposure",c=(e,t,n,r,i)=>(n.bootstrapMetadata&&(r.bootstrapMetadata=n.bootstrapMetadata),{eventName:e,user:t,value:null,metadata:o(n,r),secondaryExposures:i,time:Date.now()});t._isExposureEvent=({eventName:e})=>e===a||e===s||e===u;function d(e,t){return e.map(e=>"string"==typeof e?(null!=t?t:{})[e]:e).filter(e=>null!=e)}t._createGateExposure=(e,t,n)=>{var r,i={gate:t.name,gateValue:String(t.value),ruleID:t.ruleID};return null!=(null==(r=t.__evaluation)?void 0:r.version)&&(i.configVersion=t.__evaluation.version),c(a,e,t.details,i,d(null!=(e=null==(r=t.__evaluation)?void 0:r.secondary_exposures)?e:[],n))},t._mapExposures=d;t._createConfigExposure=(e,t,n)=>{var r,i={config:t.name,ruleID:t.ruleID};return null!=(null==(r=t.__evaluation)?void 0:r.version)&&(i.configVersion=t.__evaluation.version),null!=(null==(r=t.__evaluation)?void 0:r.passed)&&(i.rulePassed=String(t.__evaluation.passed)),c(s,e,t.details,i,d(null!=(e=null==(r=t.__evaluation)?void 0:r.secondary_exposures)?e:[],n))};t._createLayerParameterExposure=(e,t,n,r)=>{var i=t.__evaluation,s=!0===(null==(s=null==i?void 0:i.explicit_parameters)?void 0:s.includes(n));let a="",o=null!=(l=null==i?void 0:i.undelegated_secondary_exposures)?l:[];s&&(a=null!=(l=i.allocated_experiment_name)?l:"",o=null!=(l=i.secondary_exposures)?l:[]);var l=null==(i=t.__evaluation)?void 0:i.parameter_rule_ids,l={config:t.name,parameterName:n,ruleID:null!=(i=null==l?void 0:l[n])?i:t.ruleID,allocatedExperiment:a,isExplicitParameter:String(s)};return null!=(null==(n=t.__evaluation)?void 0:n.version)&&(l.configVersion=t.__evaluation.version),c(u,e,t.details,l,d(o,r))};const o=(e,t)=>(t.reason=e.reason,e.lcut&&(t.lcut=String(e.lcut)),e.receivedAt&&(t.receivedAt=String(e.receivedAt)),t)},8e3:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigMetadataProvider=t.SDK_VERSION=void 0,t.SDK_VERSION="3.24.4";let n={sdkVersion:t.SDK_VERSION,sdkType:"js-mono"};t.StatsigMetadataProvider={get:()=>n,add:e=>{n=Object.assign(Object.assign({},n),e)}}},586:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingEnabledOption=t.LogEventCompressionMode=void 0,t.LogEventCompressionMode={Disabled:"d",Enabled:"e",Forced:"f"},t.LoggingEnabledOption={disabled:"disabled",browserOnly:"browser-only",always:"always"}},1098:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2059:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._makeTypedGet=t._mergeOverride=t._makeLayer=t._makeExperiment=t._makeDynamicConfig=t._makeFeatureGate=void 0;const a=n(7512),o=n(6634);function i(e,t,n,r){return{name:e,details:t,ruleID:null!=(e=null==n?void 0:n.rule_id)?e:"",__evaluation:n,value:r}}function r(e,t,n){var r=null!=(r=null==n?void 0:n.value)?r:{};return Object.assign(Object.assign({},i(e,t,n,r)),{get:s(e,null==n?void 0:n.value)})}function s(r,i,s){return(e,t)=>{var n=null!=(n=null==i?void 0:i[e])?n:null;return null==n?null!=t?t:null:null==t||(0,o._isTypeMatch)(n,t)?(null!=s&&s(e),n):(a.Log.warn(`Parameter type mismatch. '${r}.${e}' was found to be type '${typeof n}' but fallback/return type is '${typeof t}'. See https://docs.statsig.com/client/javascript-sdk/#typed-getters`),null!=t?t:null)}}t._makeFeatureGate=function(e,t,n){return Object.assign(Object.assign({},i(e,t,n,!0===(null==n?void 0:n.value))),{idType:null!=(e=null==n?void 0:n.id_type)?e:null})},t._makeDynamicConfig=r,t._makeExperiment=function(e,t,n){return e=r(e,t,n),Object.assign(Object.assign({},e),{groupName:null!=(t=null==n?void 0:n.group_name)?t:null})},t._makeLayer=function(e,t,n,r){return Object.assign(Object.assign({},i(e,t,n,void 0)),{get:s(e,null==n?void 0:n.value,r),groupName:null!=(t=null==n?void 0:n.group_name)?t:null,__value:null!=(e=null==n?void 0:n.value)?e:{}})},t._mergeOverride=function(e,t,n,r){return Object.assign(Object.assign(Object.assign({},e),t),{get:s(e.name,n,r)})},t._makeTypedGet=s},1812:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3932:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_DETAIL_ERROR_MESSAGES=t.createUpdateDetails=void 0;t.createUpdateDetails=(e,t,n,r,i,s)=>({duration:n,source:t,success:e,error:r,sourceUrl:i,warnings:s}),t.UPDATE_DETAIL_ERROR_MESSAGES={NO_NETWORK_DATA:"No data was returned from the network. This may be due to a network timeout if a timeout value was specified in the options or ad blocker error."}},8578:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._getFullUserHash=t._normalizeUser=void 0;const r=n(1406),i=n(7512);t._normalizeUser=function(e,t,n){try{var r=JSON.parse(JSON.stringify(e));return null!=t&&null!=t.environment?r.statsigEnvironment=t.environment:null!=n&&(r.statsigEnvironment={tier:n}),r}catch(e){return i.Log.error("Failed to JSON.stringify user"),{statsigEnvironment:void 0}}},t._getFullUserHash=function(e){return e?(0,r._DJB2Object)(e):null}},4534:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n._setObjectInStorage=n._getObjectFromStorage=n.Storage=void 0;var r=t(7512),t=t(6830);const i={},s={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"InMemory",getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]},getAllKeys:()=>Object.keys(i)};let a=null;try{const c=(0,t._getWindowSafe)();c&&c.localStorage&&"function"==typeof c.localStorage.getItem&&(a={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"LocalStorage",getItem:e=>c.localStorage.getItem(e),setItem:(e,t)=>c.localStorage.setItem(e,t),removeItem:e=>c.localStorage.removeItem(e),getAllKeys:()=>Object.keys(c.localStorage)})}catch(e){r.Log.warn("Failed to setup localStorageProvider.")}let o=null!==a&&void 0!==a?a:s,l=o;function u(t){try{return t()}catch(e){if(e instanceof Error&&"SecurityError"===e.name)return n.Storage._setProvider(s),null;throw e instanceof Error&&"QuotaExceededError"===e.name&&(t=n.Storage.getAllKeys().filter(e=>e.startsWith("statsig.")),e.message=e.message+". Statsig Keys: "+t.length),e}}n.Storage={isReady:()=>l.isReady(),isReadyResolver:()=>l.isReadyResolver(),getProviderName:()=>l.getProviderName(),getItem:e=>u(()=>l.getItem(e)),setItem:(e,t)=>u(()=>l.setItem(e,t)),removeItem:e=>l.removeItem(e),getAllKeys:()=>l.getAllKeys(),_setProvider:e=>{o=e,l=e},_setDisabled:e=>{l=e?s:o}},n._getObjectFromStorage=function(e){return e=n.Storage.getItem(e),JSON.parse(null!=e?e:"null")},n._setObjectInStorage=function(e,t){n.Storage.setItem(e,JSON.stringify(t))}},3401:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._typedJsonParse=void 0;const i=n(7512);t._typedJsonParse=function(e,t,n){try{var r=JSON.parse(e);if(r&&"object"==typeof r&&t in r)return r}catch(e){}return i.Log.error("Failed to parse "+n),null}},6634:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._isTypeMatch=t._typeOf=void 0,t._typeOf=function(e){return Array.isArray(e)?"array":typeof e},t._isTypeMatch=function(e,t){var n=e=>Array.isArray(e)?"array":null===e?"null":typeof e;return n(e)===n(t)}},8023:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUUID=void 0,t.getUUID=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();let n=(new Date).getTime(),r="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return`xxxxxxxx-xxxx-4xxx-${"89ab"[Math.floor(4*Math.random())]}xxx-xxxxxxxxxxxx`.replace(/[xy]/g,e=>{let t=16*Math.random();return 0<n?(t=(n+t)%16|0,n=Math.floor(n/16)):(t=(r+t)%16|0,r=Math.floor(r/16)),("x"===e?t:7&t|8).toString(16)})}},1881:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlConfiguration=void 0;const r=n(1406),i=n(7410),s={[i.Endpoint._initialize]:"i",[i.Endpoint._rgstr]:"e",[i.Endpoint._download_config_specs]:"d"};t.UrlConfiguration=class{constructor(e,t,n,r){this.customUrl=null,this.fallbackUrls=null,this.endpoint=e,this.endpointDnsKey=s[e],t&&(this.customUrl=t),!t&&n&&(this.customUrl=n.endsWith("/")?""+n+e:n+"/"+e),r&&(this.fallbackUrls=r);t=i.NetworkDefault[e];this.defaultUrl=t+"/"+e}getUrl(){var e;return null!=(e=this.customUrl)?e:this.defaultUrl}getChecksum(){var e=(null!=(e=this.fallbackUrls)?e:[]).sort().join(",");return(0,r._DJB2)(this.customUrl+e)}}},2397:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._notifyVisibilityChanged=t._subscribeToVisiblityChanged=t._isUnloading=t._isCurrentlyVisible=void 0;n=n(6830);const r="foreground",i="background",s=[];let a=r,o=!1;t._isCurrentlyVisible=()=>a===r,t._isUnloading=()=>o,t._subscribeToVisiblityChanged=e=>{s.unshift(e)};t._notifyVisibilityChanged=t=>{t!==a&&(a=t,s.forEach(e=>e(t)))},(0,n._addWindowEventListenerSafe)("focus",()=>{(o=!1,t._notifyVisibilityChanged)(r)}),(0,n._addWindowEventListenerSafe)("blur",()=>(0,t._notifyVisibilityChanged)(i)),(0,n._addDocumentEventListenerSafe)("visibilitychange",()=>{(0,t._notifyVisibilityChanged)("visible"===document.visibilityState?r:i)}),(0,n._addWindowEventListenerSafe)((0,n._getUnloadEvent)(),()=>{o=!0,(0,t._notifyVisibilityChanged)(i)})},6914:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.Log=t.EventLogger=t.Diagnostics=void 0,n(1845),n(1845));const a=n(8962),o=(Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return a.Diagnostics}}),n(7770)),l=(Object.defineProperty(t,"EventLogger",{enumerable:!0,get:function(){return o.EventLogger}}),n(7512));Object.defineProperty(t,"Log",{enumerable:!0,get:function(){return l.Log}});var u=n(8e3);const c=n(4534);Object.defineProperty(t,"Storage",{enumerable:!0,get:function(){return c.Storage}}),i(n(1845),t),i(n(2137),t),i(n(6427),t),i(n(694),t),i(n(8962),t),i(n(3539),t),i(n(5542),t),i(n(2922),t),i(n(2417),t),i(n(1406),t),i(n(1333),t),i(n(7512),t),i(n(7787),t),i(n(7410),t),i(n(7023),t),i(n(1405),t),i(n(1361),t),i(n(6830),t),i(n(5902),t),i(n(4143),t),i(n(2176),t),i(n(9122),t),i(n(1375),t),i(n(2636),t),i(n(3206),t),i(n(1637),t),i(n(8e3),t),i(n(586),t),i(n(1098),t),i(n(2059),t),i(n(1812),t),i(n(8578),t),i(n(4534),t),i(n(3401),t),i(n(6634),t),i(n(1881),t),i(n(8023),t),i(n(2397),t),i(n(3932),t),i(n(3091),t),Object.assign((0,s._getStatsigGlobal)(),{Log:l.Log,SDK_VERSION:u.SDK_VERSION})},2016:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoInit=void 0;const v=n(6914),y=n(2018);function S(e,t){var n;return null!=(n=t.get(e))?n:t.get(e.toLowerCase())}t.AutoInit=class{static attempt(t){var e,n,r,i,s;try{var a=(0,v._getWindowSafe)(),o=(0,v._getDocumentSafe)();if(a&&o&&o.currentScript){var l=o.currentScript.getAttribute("src"),u=null==(e=a.location)?void 0:e.href;if(l&&u){var c=new URL(l,u).searchParams,d=null!=(n=S("sdkKey",c))?n:S("apiKey",c);if(d){var h={},g=S("proxy",c),p=(g&&(h.networkConfig={api:g}),null==(i=null==(r=(0,v._getStatsigGlobal)())?void 0:r.instances)?void 0:i[d]);let e=null;if(e=p instanceof y.StatsigClient?p:e)t({sdkKey:d,client:e});else{var m=o.currentScript.dataset;const _=function(e,t){if(e)if(e in t&&"function"==typeof t[e])return t[e];return null}(null!=(s=m.onstatsiginit)?s:m.onStatsigInit,a),f=new y.StatsigClient(d,function(){var e=(0,v._getWindowSafe)();if(!e)return{};let t=e.statsigUser||{};var n=(t="object"!=typeof t?{}:t).custom||{},r=t.customIDs||{};return Object.assign(Object.assign({},t),{customIDs:Object.assign({},r),custom:Object.assign(Object.assign({},n),{useragent:e.navigator.userAgent,page_url:(0,v._getCurrentPageUrlSafe)()||"",language:null==(r=e.navigator)?void 0:r.language})})}(),h);f.initializeAsync().then(()=>{_&&_(f)}).catch(e=>{v.Log.error(e)}),t({sdkKey:d,client:f})}}}}}catch(e){v.Log.error("AutoInit failed",e)}}}},7262:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._resolveDeltasResponse=void 0;const r=n(6914);function i(e,t){null!=e&&e.forEach(e=>{delete t[e]})}t._resolveDeltasResponse=function(e,t){var n;return(t=(0,r._typedJsonParse)(t,"checksum","DeltasEvaluationResponse"))?(e=e,n=t,e=Object.assign(Object.assign(Object.assign({},e),n),{feature_gates:Object.assign(Object.assign({},e.feature_gates),n.feature_gates),layer_configs:Object.assign(Object.assign({},e.layer_configs),n.layer_configs),dynamic_configs:Object.assign(Object.assign({},e.dynamic_configs),n.dynamic_configs)}),i((e=n=e).deleted_gates,e.feature_gates),delete e.deleted_gates,i(n.deleted_configs,e.dynamic_configs),delete e.deleted_configs,i(n.deleted_layers,e.layer_configs),delete e.deleted_layers,n=e,(e=(0,r._DJB2Object)({feature_gates:n.feature_gates,dynamic_configs:n.dynamic_configs,layer_configs:n.layer_configs},2))===t.checksumV2?JSON.stringify(n):{hadBadDeltaChecksum:!0,badChecksum:e,badMergedConfigs:n,badFullResponse:t.deltas_full_response}):{hadBadDeltaChecksum:!0}}},4845:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6914);t.default=class{constructor(e){this._sdkKey=e,this._rawValues=null,this._values=null,this._source="Uninitialized",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings=new Set}reset(){this._values=null,this._rawValues=null,this._source="Loading",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings.clear()}finalize(){this._values||(this._source="NoValues")}getValues(){return this._rawValues?(0,i._typedJsonParse)(this._rawValues,"has_updates","EvaluationStoreValues"):null}setValues(e,t){var n;return!!e&&null!=(n=(0,i._typedJsonParse)(e.data,"has_updates","EvaluationResponse"))&&(this._source=e.source,!0===(null==n?void 0:n.has_updates)&&(this._rawValues=e.data,this._lcut=n.time,this._receivedAt=e.receivedAt,this._values=n,this._bootstrapMetadata=this._extractBootstrapMetadata(e.source,n),e.source&&n.user&&this._setWarningState(t,n),i.SDKFlags.setFlags(this._sdkKey,null!=(e=n.sdk_flags)?e:{})),!0)}getWarnings(){if(0!==this._warnings.size)return Array.from(this._warnings)}getGate(e){var t;return this._getDetailedStoreResult(null==(t=this._values)?void 0:t.feature_gates,e)}getConfig(e){var t;return this._getDetailedStoreResult(null==(t=this._values)?void 0:t.dynamic_configs,e)}getConfigList(){var e;return null!=(e=this._values)&&e.dynamic_configs?Object.values(this._values.dynamic_configs).map(e=>e.name):[]}getLayer(e){var t;return this._getDetailedStoreResult(null==(t=this._values)?void 0:t.layer_configs,e)}getParamStore(e){var t;return this._getDetailedStoreResult(null==(t=this._values)?void 0:t.param_stores,e)}getSource(){return this._source}getExposureMapping(){var e;return null==(e=this._values)?void 0:e.exposures}_extractBootstrapMetadata(e,t){return"Bootstrap"!==e?null:(e={},t.user&&(e.user=t.user),t.sdkInfo&&(e.generatorSDKInfo=t.sdkInfo),e.lcut=t.time,e)}_getDetailedStoreResult(e,t){let n=null;return{result:n=e?e[t]||e[(0,i._DJB2)(t)]:n,details:this._getDetails(null==n)}}_setWarningState(e,t){var n,r=i.StableID.get(this._sdkKey);(null==(n=e.customIDs)?void 0:n.stableID)!==r&&(null!=(n=e.customIDs)&&n.stableID||r)?this._warnings.add("StableIDMismatch"):"user"in t&&(n=t.user,r=Object.assign(Object.assign({},e),{analyticsOnlyMetadata:void 0,privateAttributes:void 0}),(0,i._getFullUserHash)(r)!==(0,i._getFullUserHash)(n))&&this._warnings.add("PartialUserMatch")}getCurrentSourceDetails(){var e;return"Uninitialized"===this._source||"NoValues"===this._source?{reason:this._source}:(e={reason:this._source,lcut:this._lcut,receivedAt:this._receivedAt},0<this._warnings.size&&(e.warnings=Array.from(this._warnings)),e)}_getDetails(e){var t=this.getCurrentSourceDetails();let n=t.reason;var r=null!=(r=t.warnings)?r:[],e=("Bootstrap"===this._source&&0<r.length&&(n+=r[0]),"Uninitialized"!==n&&"NoValues"!==n&&(n=n+":"+(e?"Unrecognized":"Recognized")),"Bootstrap"===this._source&&null!=(r=this._bootstrapMetadata)?r:void 0);return e&&(t.bootstrapMetadata=e),Object.assign(Object.assign({},t),{reason:n})}}},8448:function(e,t,n){"use strict";var l=this&&this.__awaiter||function(e,a,o,l){return new(o=o||Promise)(function(n,t){function r(e){try{s(l.next(e))}catch(e){t(e)}}function i(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(r,i)}s((l=l.apply(e,a||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const u=n(6914),a=n(7262);class r extends u.NetworkCore{constructor(e,t){super(e,t);t=null==e?void 0:e.networkConfig;this._option=e,this._initializeUrlConfig=new u.UrlConfiguration(u.Endpoint._initialize,null==t?void 0:t.initializeUrl,null==t?void 0:t.api,null==t?void 0:t.initializeFallbackUrls)}fetchEvaluations(r,i,s,a,o){return l(this,void 0,void 0,function*(){var e,t=i?(0,u._typedJsonParse)(i,"has_updates","InitializeResponse"):null;let n={user:a,hash:null!=(e=null==(e=null==(e=this._option)?void 0:e.networkConfig)?void 0:e.initializeHashAlgorithm)?e:"djb2",deltasResponseRequested:!1,full_checksum:null};return null!=t&&t.has_updates&&(e=(null==t?void 0:t.hash_used)!==(null!=(e=null==(e=null==(e=this._option)?void 0:e.networkConfig)?void 0:e.initializeHashAlgorithm)?e:"djb2"),n=Object.assign(Object.assign({},n),{sinceTime:o&&!e?t.time:0,previousDerivedFields:"derived_fields"in t&&o?t.derived_fields:{},deltasResponseRequested:!0,full_checksum:t.full_checksum,partialUserMatchSinceTime:e?0:t.time})),this._fetchEvaluations(r,t,n,s)})}_fetchEvaluations(n,r,i,s){return l(this,void 0,void 0,function*(){var e,t=yield this.post({sdkKey:n,urlConfig:this._initializeUrlConfig,data:i,retries:2,isStatsigEncodable:!0,priority:s});return 204===(null==t?void 0:t.code)?'{"has_updates": false}':200!==(null==t?void 0:t.code)?null!=(e=null==t?void 0:t.body)?e:null:!0!==(null==r?void 0:r.has_updates)||!0!==(null==(e=t.body)?void 0:e.includes('"is_delta":true'))||!0!==i.deltasResponseRequested?t.body:"string"==typeof(e=(0,a._resolveDeltasResponse)(r,t.body))?e:this._fetchEvaluations(n,r,Object.assign(Object.assign(Object.assign({},i),e),{deltasResponseRequested:!1}),s)})}}t.default=r},3583:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._makeParamStoreGetter=void 0;const h=n(6914),g={disableExposureLog:!0};function p(e){return null==e||!1===e.disableExposureLog}function m(e,t){return null!=t&&!(0,h._isTypeMatch)(e,t)}t._makeParamStoreGetter=function(u,c,d){return(e,t)=>{if(null==c)return t;var n,r,i,s,a,o,l=c[e];if(null==l||null!=t&&(0,h._typeOf)(t)!==l.param_type)return t;switch(l.ref_type){case"static":return l.value;case"gate":return o=l,u.getFeatureGate(o.gate_name,p(d)?void 0:g).value?o.pass_value:o.fail_value;case"dynamic_config":return o=l,a=t,m(s=(s=u).getDynamicConfig(o.config_name,p(d)?void 0:g).get(o.param_name),a)?a:s;case"experiment":return a=l,s=t,m(i=(i=u).getExperiment(a.experiment_name,p(d)?void 0:g).get(a.param_name),s)?s:i;case"layer":return i=l,r=t,m(n=(n=u).getLayer(i.layer_name,p(d)?void 0:g).get(i.param_name),r)?r:n;default:return t}}}},8198:function(e,t,n){"use strict";var s=this&&this.__awaiter||function(e,a,o,l){return new(o=o||Promise)(function(n,t){function r(e){try{s(l.next(e))}catch(e){t(e)}}function i(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(r,i)}s((l=l.apply(e,a||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const a=n(6914),o=n(4845),l=n(8448),i=n(3583),u=n(4131);class r extends a.StatsigClientBase{static instance(e){var t=(0,a._getStatsigGlobal)().instance(e);return t instanceof r?t:(a.Log.warn((0,a._isServerEnv)()?"StatsigClient.instance is not supported in server environments":"Unable to find StatsigClient instance"),new r(null!=e?e:"",{}))}constructor(e,t,n=null){a.SDKType._setClientType(e,"javascript-client");var r,i=new l.default(n,e=>{this.$emt(e)}),e=(super(e,null!=(r=null==n?void 0:n.dataAdapter)?r:new u.StatsigEvaluationsDataAdapter,i,n),this._possibleFirstTouchMetadata={},this.getFeatureGate=this._memoize(a.MemoPrefix._gate,this._getFeatureGateImpl.bind(this)),this.getDynamicConfig=this._memoize(a.MemoPrefix._dynamicConfig,this._getDynamicConfigImpl.bind(this)),this.getExperiment=this._memoize(a.MemoPrefix._experiment,this._getExperimentImpl.bind(this)),this.getConfigList=this._memoize(a.MemoPrefix._configList,this._getConfigListImpl.bind(this)),this.getLayer=this._memoize(a.MemoPrefix._layer,this._getLayerImpl.bind(this)),this.getParameterStore=this._memoize(a.MemoPrefix._paramStore,this._getParameterStoreImpl.bind(this)),this._store=new o.default(e),this._network=i,this._user=this._configureUser(t,n),this._sdkInstanceID=(0,a.getUUID)(),null!=(r=null==n?void 0:n.plugins)?r:[]);for(const s of e)s.bind(this)}initializeSync(e){var t;return"Uninitialized"!==this.loadingStatus?(0,a.createUpdateDetails)(!0,this._store.getSource(),-1,null,null,["MultipleInitializations",...null!=(t=this._store.getWarnings())?t:[]]):(this._logger.start(),this.updateUserSync(this._user,e))}initializeAsync(e){return s(this,void 0,void 0,function*(){return this._initializePromise||(this._initializePromise=this._initializeAsyncImpl(e)),this._initializePromise})}updateUserSync(t,e){var n=performance.now();try{return this._updateUserSyncImpl(t,e,n)}catch(e){t=e instanceof Error?e:new Error(String(e));return this._createErrorUpdateDetails(t,n)}}_updateUserSyncImpl(e,t,n){var r=[...null!=(r=this._store.getWarnings())?r:[]],e=(this._resetForUser(e),this.dataAdapter.getDataSync(this._user)),t=(null==e&&r.push("NoCachedValues"),this._store.setValues(e,this._user),this._finalizeUpdate(e),null==t?void 0:t.disableBackgroundCacheRefresh);return!0===t||null==t&&"Bootstrap"===(null==e?void 0:e.source)||this._runPostUpdate(null!=e?e:null,this._user),(0,a.createUpdateDetails)(!0,this._store.getSource(),performance.now()-n,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),r)}updateUserAsync(e,r){return s(this,void 0,void 0,function*(){var t=performance.now();try{return yield this._updateUserAsyncImpl(e,r)}catch(e){var n=e instanceof Error?e:new Error(String(e));return this._createErrorUpdateDetails(n,t)}})}_updateUserAsyncImpl(r,i){return s(this,void 0,void 0,function*(){this._resetForUser(r);var e=this._user,t=(a.Diagnostics._markInitOverallStart(this._sdkKey),this.dataAdapter.getDataSync(e));if(this._store.setValues(t,this._user),this._setStatus("Loading",t),t=yield this.dataAdapter.getDataAsync(t,e,i),e!==this._user)return(0,a.createUpdateDetails)(!1,this._store.getSource(),-1,new Error("User changed during update"),this._network.getLastUsedInitUrlAndReset());let n=!1;null!=t&&(a.Diagnostics._markInitProcessStart(this._sdkKey),n=this._store.setValues(t,this._user),a.Diagnostics._markInitProcessEnd(this._sdkKey,{success:n})),this._finalizeUpdate(t),n||(this._errorBoundary.attachErrorIfNoneExists(a.UPDATE_DETAIL_ERROR_MESSAGES.NO_NETWORK_DATA),this.$emt({name:"initialization_failure"})),a.Diagnostics._markInitOverallEnd(this._sdkKey,n,this._store.getCurrentSourceDetails());e=a.Diagnostics._enqueueDiagnosticsEvent(this._user,this._logger,this._sdkKey,this._options);return(0,a.createUpdateDetails)(n,this._store.getSource(),e,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),this._store.getWarnings())})}getContext(){return{sdkKey:this._sdkKey,options:this._options,values:this._store.getValues(),user:JSON.parse(JSON.stringify(this._user)),errorBoundary:this._errorBoundary,session:a.StatsigSession.get(this._sdkKey),stableID:a.StableID.get(this._sdkKey),sdkInstanceID:this._sdkInstanceID}}checkGate(e,t){return this.getFeatureGate(e,t).value}logEvent(e,t,n){t="string"==typeof e?{eventName:e,value:t,metadata:n}:e;this.$emt({name:"log_event_called",event:t}),this._logger.enqueue(Object.assign(Object.assign({},t),{user:this._user,time:Date.now()}))}updateUserWithAnalyticsOnlyMetadata(e){this._user=this._configureUser(Object.assign(Object.assign({},this._user),{analyticsOnlyMetadata:e}),this._options)}_primeReadyRipcord(){this.$on("error",()=>{"Loading"===this.loadingStatus&&this._finalizeUpdate(null)})}_initializeAsyncImpl(e){return s(this,void 0,void 0,function*(){return a.Storage.isReady()||(yield a.Storage.isReadyResolver()),this._logger.start(),this.updateUserAsync(this._user,e)})}_createErrorUpdateDetails(e,t){return(0,a.createUpdateDetails)(!1,this._store.getSource(),performance.now()-t,e,null,[...null!=(t=this._store.getWarnings())?t:[]])}_finalizeUpdate(e){this._store.finalize(),this._setStatus("Ready",e)}_runPostUpdate(e,t){this.dataAdapter.getDataAsync(e,t,{priority:"low"}).catch(e=>{a.Log.error("An error occurred after update.",e)})}_resetForUser(e){this._logger.reset(),this._store.reset(),this._user=this._configureUser(e,this._options)}_configureUser(e,t){e=(0,a._normalizeUser)(e,t),t=null==(t=e.customIDs)?void 0:t.stableID;return t&&a.StableID.setOverride(t,this._sdkKey),0<Object.keys(this._possibleFirstTouchMetadata).length&&(e.analyticsOnlyMetadata=Object.assign(Object.assign({},e.analyticsOnlyMetadata),this._possibleFirstTouchMetadata)),e}_getFeatureGateImpl(e,t){var{result:n,details:r}=this._store.getGate(e),r=(0,a._makeFeatureGate)(e,r,n),i=null==(i=null==(n=this.overrideAdapter)?void 0:n.getGateOverride)?void 0:i.call(n,r,this._user,t),n=null!=i?i:r;return this._enqueueExposure(e,(0,a._createGateExposure)(this._user,n,this._store.getExposureMapping()),t),this.$emt({name:"gate_evaluation",gate:n}),n}_getDynamicConfigImpl(e,t){var{result:n,details:r}=this._store.getConfig(e),r=(0,a._makeDynamicConfig)(e,r,n),i=null==(i=null==(n=this.overrideAdapter)?void 0:n.getDynamicConfigOverride)?void 0:i.call(n,r,this._user,t),n=null!=i?i:r;return this._enqueueExposure(e,(0,a._createConfigExposure)(this._user,n,this._store.getExposureMapping()),t),this.$emt({name:"dynamic_config_evaluation",dynamicConfig:n}),n}_getExperimentImpl(e,t){var{result:n,details:r}=this._store.getConfig(e),r=(0,a._makeExperiment)(e,r,n),i=(null!=r.__evaluation&&(r.__evaluation.secondary_exposures=(0,a._mapExposures)(null!=(n=null==(n=r.__evaluation)?void 0:n.secondary_exposures)?n:[],this._store.getExposureMapping())),null==(i=null==(n=this.overrideAdapter)?void 0:n.getExperimentOverride)?void 0:i.call(n,r,this._user,t)),n=null!=i?i:r;return this._enqueueExposure(e,(0,a._createConfigExposure)(this._user,n,this._store.getExposureMapping()),t),this.$emt({name:"experiment_evaluation",experiment:n}),n}_getConfigListImpl(){return this._store.getConfigList()}_getLayerImpl(t,n){var{result:e,details:r}=this._store.getLayer(t),r=(0,a._makeLayer)(t,r,e),i=null==(i=null==(e=this.overrideAdapter)?void 0:e.getLayerOverride)?void 0:i.call(e,r,this._user,n);null!=n&&n.disableExposureLog&&this._logger.incrementNonExposureCount(t);const s=(0,a._mergeOverride)(r,i,null!=(e=null==i?void 0:i.__value)?e:r.__value,e=>{null!=n&&n.disableExposureLog||this._enqueueExposure(t,(0,a._createLayerParameterExposure)(this._user,s,e,this._store.getExposureMapping()),n)});return this.$emt({name:"layer_evaluation",layer:s}),s}_getParameterStoreImpl(e,t){var{result:n,details:r}=this._store.getParamStore(e),e=(this._logger.incrementNonExposureCount(e),{name:e,details:r,__configuration:n,get:(0,i._makeParamStoreGetter)(this,n,t)}),n=null==(n=null==(r=this.overrideAdapter)?void 0:r.getParamStoreOverride)?void 0:n.call(r,e,t);return null!=n&&(e.__configuration=n.config,e.details=n.details,e.get=(0,i._makeParamStoreGetter)(this,n.config,t)),e}}t.default=r},4131:function(e,t,n){"use strict";var s=this&&this.__awaiter||function(e,a,o,l){return new(o=o||Promise)(function(n,t){function r(e){try{s(l.next(e))}catch(e){t(e)}}function i(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(r,i)}s((l=l.apply(e,a||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigEvaluationsDataAdapter=void 0;const r=n(6914),i=n(8448);class a extends r.DataAdapterCore{constructor(){super("EvaluationsDataAdapter","evaluations"),this._network=null,this._options=null}attach(e,t,n){super.attach(e,t,n),null!==n&&n instanceof i.default?this._network=n:this._network=new i.default(null!=t?t:{})}getDataAsync(e,t,n){return this._getDataAsyncImpl(e,(0,r._normalizeUser)(t,this._options),n)}prefetchData(e,t){return this._prefetchDataImpl(e,t)}setData(e){var t=(0,r._typedJsonParse)(e,"has_updates","data");t&&"user"in t?super.setData(e,t.user):r.Log.error("StatsigUser not found. You may be using an older server SDK version. Please upgrade your SDK or use setDataLegacy.")}setDataLegacy(e,t){super.setData(e,t)}_fetchFromNetwork(t,n,r,i){return s(this,void 0,void 0,function*(){var e=yield null==(e=this._network)?void 0:e.fetchEvaluations(this._getSdkKey(),t,null==r?void 0:r.priority,n,i);return null!=e?e:null})}_getCacheKey(e){e=(0,r._getStorageKey)(this._getSdkKey(),e,null==(e=this._options)?void 0:e.customUserCacheKeyFunc);return`${r.DataAdapterCachePrefix}.${this._cacheSuffix}.`+e}_isCachedResultValidFor204(e,t){return null!=e.fullUserHash&&e.fullUserHash===(0,r._getFullUserHash)(t)}}t.StatsigEvaluationsDataAdapter=a},2018:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigClient=void 0,n(6914)),a=n(8198),i=(t.StatsigClient=a.default,i(n(6914),t),Object.assign((0,s._getStatsigGlobal)(),{StatsigClient:a.default}));t.default=i},8788:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionReplay=t.runStatsigSessionReplay=t.StatsigSessionReplayPlugin=void 0;const r=n(6914);var i=n(4069);const s=n(5967);function a(e,t){new o(e,t)}t.StatsigSessionReplayPlugin=class{constructor(e){this.options=e,this.__plugin="session-replay"}bind(e){a(e,this.options)}},t.runStatsigSessionReplay=a;class o extends i.SessionReplayBase{constructor(e,t){super(e,t),this._client.$on("values_updated",()=>{var e;this._wasStopped||this._attemptToStartRecording(null==(e=this._options)?void 0:e.forceRecording)}),this._attemptToStartRecording(null==(e=this._options)?void 0:e.forceRecording)}_shutdown(e){super._shutdownImpl(e)}_attemptToStartRecording(e=!1){var t;this._totalLogs>=s.MAX_LOGS||(!0===(null==(t=this._client.getContext().values)?void 0:t.recording_blocked)||!e&&!0!==(null==t?void 0:t.can_record_session)||!1===(null==t?void 0:t.passes_session_recording_targeting)?this._shutdown():this._replayer.isRecording()||(this._wasStopped=!1,r.StatsigMetadataProvider.add({isRecordingSession:"true"}),this._replayer.record((e,t)=>this._onRecordingEvent(e,t),null!=(t=null==(e=this._options)?void 0:e.rrwebConfig)?t:{},()=>{this._shutdown()})))}}t.SessionReplay=o},4069:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionReplayBase=t.forceStartRecording=t.startRecording=t.stopRecording=void 0;const u=n(6914),r=n(759),c=n(5967);function i(e){var t=null==e?(0,u._getStatsigGlobal)().firstSRInstance:null==(t=null==(t=(0,u._getStatsigGlobal)())?void 0:t.srInstances)?void 0:t[e];return t instanceof s?t:null}t.stopRecording=function(e){null!=(e=i(e))&&e.stopRecording()},t.startRecording=function(e){null!=(e=i(e))&&e.startRecording()},t.forceStartRecording=function(e){null!=(e=i(e))&&e.forceStartRecording()};class s{constructor(e,t){this._sessionData={startTime:-1,endTime:0,clickCount:0},this._events=[],this._wasStopped=!1,this._currentEventIndex=0,this._totalLogs=0,this._client=e,this._options=t;var{sdkKey:e,errorBoundary:t}=this._client.getContext();this._errorBoundary=t,this._errorBoundary.wrap(this),this._replayer=new r.SessionReplayClient,this._client.$on("pre_shutdown",()=>this._shutdown()),this._client.on("session_expired",()=>{this._shutdown("session_expired")}),(0,u._isServerEnv)()||((t=(0,u._getStatsigGlobal)()).srInstances=Object.assign(Object.assign({},t.srInstances),{[e]:this}),t.firstSRInstance)||(t.firstSRInstance=this),this._currentSessionID=this._getSessionIdFromClient(),this._subscribeToVisibilityChanged()}forceStartRecording(){this._wasStopped=!1,this._attemptToStartRecording(!0)}stopRecording(){this._wasStopped=!0,this._shutdown()}startRecording(){var e;this._wasStopped=!1,this._attemptToStartRecording(null==(e=this._options)?void 0:e.forceRecording)}isRecording(){return this._replayer.isRecording()}_logRecording(e){0!==this._events.length&&(e=(0,u._isUnloading)()?"is_leaving_page":e,this._logRecordingWithSessionID(this._currentSessionID,e))}_onVisibilityChanged(e){"background"===e&&(this._logRecording(),this._client.flush().catch(e=>{this._errorBoundary.logError("SR::visibility",e)}))}_subscribeToVisibilityChanged(){const n=this._client.getContext()["sdkKey"];(0,u._subscribeToVisiblityChanged)(e=>{var t=null==(t=null==(t=(0,u._getStatsigGlobal)())?void 0:t.srInstances)?void 0:t[n];t instanceof s&&t._onVisibilityChanged(e)})}_logRecordingWithSessionID(t,n){var r=this._sessionData;if(0!==this._events.length){var i=JSON.stringify(this._events),s=(0,c._slicePayload)(i),a=1<s.length?(0,u.getUUID)():null;for(let e=0;e<s.length;e++){var o=s[e],l=(0,c._makeLoggableRrwebEvent)(o,i,t,r,this._client.getContext().sdkInstanceID);null!=a&&(0,c._appendSlicedMetadata)(l.metadata,a,e,s.length,o.length),n&&(l.metadata[n]="true"),this._totalLogs++,this._client.logEvent(l),null!=a&&this._client.flush().catch(e=>{u.Log.error(e)})}this._events=[],this._totalLogs>c.MAX_LOGS&&this._shutdown()}}_bumpSessionIdleTimerAndLogRecording(){this._getSessionIdFromClient(),this._logRecording()}_getSessionIdFromClient(){return this._client.getContext().session.data.sessionID}_shutdownImpl(e){if(this._replayer.isRecording()){this._replayer.stop();const t=()=>{u.StatsigMetadataProvider.add({isRecordingSession:"false"}),this._client.off("logs_flushed",t)};this._client.$on("logs_flushed",t)}0!==this._events.length&&this._logRecording(e),"session_expired"===e&&(this._currentEventIndex=0,this._sessionData=this._makeEmptySessionData())}_makeEmptySessionData(){return{startTime:-1,endTime:0,clickCount:0}}_onRecordingEvent(e,t){var n;this._currentSessionID!==this._getSessionIdFromClient()?this._shutdown("session_expired"):this._totalLogs>=c.MAX_LOGS?this._shutdown():(e.eventIndex=this._currentEventIndex++,this._sessionData.clickCount+=t.clickCount,this._sessionData.startTime=-1===this._sessionData.startTime?t.startTime:Math.min(this._sessionData.startTime,t.startTime),this._sessionData.endTime=Math.max(this._sessionData.endTime,t.endTime),(t=(0,u._fastApproxSizeOf)(e,c.MAX_INDIVIDUAL_EVENT_BYTES))>c.MAX_INDIVIDUAL_EVENT_BYTES?u.Log.warn(`SessionReplay event is too large (~${t} bytes) and will not be logged`,e):(n=(0,u._fastApproxSizeOf)(this._events,c.REPLAY_ENQUEUE_TRIGGER_BYTES),this._events.push(e),n+t<c.REPLAY_ENQUEUE_TRIGGER_BYTES||((0,u._isCurrentlyVisible)()?this._bumpSessionIdleTimerAndLogRecording():this._logRecording())))}}t.SessionReplayBase=s},759:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionReplayClient=void 0;const r=n(670),a=n(6914);t.SessionReplayClient=class{constructor(){this._startTimestamp=null,this._endTimestamp=null}record(i,e,t,s=!1){null==(0,a._getDocumentSafe)()||(this._startTimestamp=null,this._endTimestamp=null,this._stopCallback=t,this._stopFn)||(this._stopFn=(t=(e,t)=>{var n;s?this._startTimestamp=!t&&null!=(n=this._startTimestamp)?n:e.timestamp:null==this._startTimestamp&&(this._startTimestamp=e.timestamp),this._endTimestamp=e.timestamp;let r=0;3!==(n=e).type||2!==n.data.source||2!==n.data.type&&4!==n.data.type||r++,i(Object.assign(Object.assign({},e),{eventIndex:0}),{startTime:this._startTimestamp,endTime:this._endTimestamp,clickCount:r},null!=t&&t),144e5<this._endTimestamp-this._startTimestamp&&(null!=(e=this._stopFn)&&e.call(this),this._stopCallback)&&this._stopCallback()},e=e,s?(0,r.record)(Object.assign(Object.assign({},e),{emit:t,checkoutEveryNms:3e4})):(0,r.record)(Object.assign(Object.assign({},e),{emit:t}))))}stop(){this._stopFn&&(this._stopFn(),this._stopFn=void 0)}isRecording(){return null!=this._stopFn}}},5967:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._appendSlicedMetadata=t._slicePayload=t._makeLoggableRrwebEvent=t.MAX_LOGS=t.MAX_INDIVIDUAL_EVENT_BYTES=t.REPLAY_ENQUEUE_TRIGGER_BYTES=void 0;const s=n(6914);t.REPLAY_ENQUEUE_TRIGGER_BYTES=10240,t.MAX_INDIVIDUAL_EVENT_BYTES=10485760,t.MAX_LOGS=1e4,t._makeLoggableRrwebEvent=function(e,t,n,r,i){return{eventName:"statsig::session_recording",value:n,metadata:{session_start_ts:String(r.startTime),session_end_ts:String(r.endTime),clicks_captured_cumulative:String(r.clickCount),rrweb_events:e,rrweb_payload_size:String(t.length),session_replay_sdk_version:s.SDK_VERSION,sdk_instance_id:i}}},t._slicePayload=function(t){var n=[];for(let e=0;e<t.length;e+=1048576)n.push(t.slice(e,e+1048576));return n},t._appendSlicedMetadata=function(e,t,n,r,i){e.sliced_id=t,e.slice_index=String(n),e.slice_count=String(r),e.slice_byte_size=String(i)}},3691:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TriggeredSessionReplay=t.runStatsigTriggeredSessionReplay=t.StatsigTriggeredSessionReplayPlugin=void 0;const i=n(6914);var r=n(4069);const s=n(5967);function a(e,t){new o(e,t)}t.StatsigTriggeredSessionReplayPlugin=class{constructor(e){this.options=e,this.__plugin="triggered-session-replay"}bind(e){a(e,this.options)}},t.runStatsigTriggeredSessionReplay=a;class o extends r.SessionReplayBase{constructor(e,t){super(e,t),this._runningEventData=[],this._isActiveRecording=!1,this._subscribeToClientEvents(t),null!=t&&t.autoStartRecording?this._attemptToStartRecording(null==(e=this._options)?void 0:e.forceRecording):null!=t&&t.keepRollingWindow&&this._attemptToStartRollingWindow()}_subscribeToClientEvents(e){this._subscribeToValuesUpdated(e),this._subscribeToLogEventCalled(),this._subscribeToGateEvaluation(),this._subscribeToExperimentEvaluation()}_subscribeToValuesUpdated(t){this._client.$on("values_updated",()=>{var e;this._wasStopped||(null!=t&&t.autoStartRecording?this._attemptToStartRecording(null==(e=this._options)?void 0:e.forceRecording):null!=t&&t.keepRollingWindow&&this._attemptToStartRollingWindow())})}_subscribeToLogEventCalled(){this._client.$on("log_event_called",e=>{var t;this._wasStopped||!1===(null==(t=this._client.getContext().values)?void 0:t.passes_session_recording_targeting)||null==(null==t?void 0:t.session_recording_event_triggers)||null==(t=t.session_recording_event_triggers[e.event.eventName])||!1===t.passes_sampling||null!=(t=t.values)&&!t.includes(String(null!=(t=e.event.value)?t:""))||this._attemptToStartRecording(!0)})}_subscribeToGateEvaluation(){this._client.$on("gate_evaluation",e=>{this._tryStartExposureRecording(e.gate.name,String(e.gate.value))})}_subscribeToExperimentEvaluation(){this._client.$on("experiment_evaluation",e=>{this._tryStartExposureRecording(e.experiment.name,null!=(e=e.experiment.groupName)?e:"")})}_tryStartExposureRecording(e,t){var n,r;this._wasStopped||!1===(null==(r=this._client.getContext().values)?void 0:r.passes_session_recording_targeting)||null==(null==r?void 0:r.session_recording_exposure_triggers)||null==(n=null!=(n=r.session_recording_exposure_triggers[e])?n:r.session_recording_exposure_triggers[(0,i._DJB2)(e)])||!1===n.passes_sampling||null!=(r=n.values)&&!r.includes(t)||this._attemptToStartRecording(!0)}forceStartRecording(){super.forceStartRecording()}stopRecording(){this._isActiveRecording=!1,this._runningEventData=[],super.stopRecording()}_handleStartActiveRecording(){if(this._isActiveRecording=!0,0!==this._runningEventData.length){var t=this._runningEventData.map(e=>e.events).flat();for(let e=0;e<t.length;e++)t[e].event.eventIndex=e,this._sessionData.clickCount+=t[e].data.clickCount,this._sessionData.startTime=-1===this._sessionData.startTime?t[e].data.startTime:Math.min(this._sessionData.startTime,t[e].data.startTime),this._sessionData.endTime=Math.max(this._sessionData.endTime,t[e].data.endTime);this._events=t.map(e=>e.event),this._currentEventIndex=t.length,(0,i._isCurrentlyVisible)()?this._bumpSessionIdleTimerAndLogRecording():this._logRecording(),this._replayer.stop()}}_shutdown(e){this._isActiveRecording=!1,this._runningEventData=[],super._shutdownImpl(e)}_onRecordingEvent(e,t,n){if(!this._isActiveRecording)return this._currentSessionID!==this._getSessionIdFromClient()?void this._shutdown("session_expired"):void(n&&4===e.type||0===this._runningEventData.length?(1<this._runningEventData.length&&this._runningEventData.shift(),this._runningEventData.push({events:[{event:e,data:t}]})):this._runningEventData[this._runningEventData.length-1].events.push({event:e,data:t}));super._onRecordingEvent(e,t)}_attemptToStartRollingWindow(){var e=this._client.getContext().values;!1===(null==e?void 0:e.passes_session_recording_targeting)?this._shutdown():this._replayer.isRecording()||this._replayer.record((e,t,n)=>this._onRecordingEvent(e,t,n),null!=(e=null==(e=this._options)?void 0:e.rrwebConfig)?e:{},()=>{this._shutdown()},!0)}_attemptToStartRecording(e=!1){var t;this._totalLogs>=s.MAX_LOGS||(!0===(null==(t=this._client.getContext().values)?void 0:t.recording_blocked)||!e&&!0!==(null==t?void 0:t.can_record_session)||!1===(null==t?void 0:t.passes_session_recording_targeting)?this._shutdown():(this._handleStartActiveRecording(),this._wasStopped=!1,i.StatsigMetadataProvider.add({isRecordingSession:"true"}),this._replayer.isRecording()||this._replayer.record((e,t,n)=>this._onRecordingEvent(e,t,n),null!=(t=null==(e=this._options)?void 0:e.rrwebConfig)?t:{},()=>{this._shutdown()})))}}t.TriggeredSessionReplay=o},3447:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forceStartRecording=t.stopRecording=t.startRecording=t.StatsigTriggeredSessionReplayPlugin=t.StatsigSessionReplayPlugin=t.runStatsigTriggeredSessionReplay=t.runStatsigSessionReplay=t.SessionReplay=t.SessionReplayClient=void 0;var r=n(6914);const i=n(8788),s=(Object.defineProperty(t,"SessionReplay",{enumerable:!0,get:function(){return i.SessionReplay}}),Object.defineProperty(t,"StatsigSessionReplayPlugin",{enumerable:!0,get:function(){return i.StatsigSessionReplayPlugin}}),Object.defineProperty(t,"runStatsigSessionReplay",{enumerable:!0,get:function(){return i.runStatsigSessionReplay}}),n(4069)),a=(Object.defineProperty(t,"forceStartRecording",{enumerable:!0,get:function(){return s.forceStartRecording}}),Object.defineProperty(t,"startRecording",{enumerable:!0,get:function(){return s.startRecording}}),Object.defineProperty(t,"stopRecording",{enumerable:!0,get:function(){return s.stopRecording}}),n(759)),o=(Object.defineProperty(t,"SessionReplayClient",{enumerable:!0,get:function(){return a.SessionReplayClient}}),n(3691));Object.defineProperty(t,"StatsigTriggeredSessionReplayPlugin",{enumerable:!0,get:function(){return o.StatsigTriggeredSessionReplayPlugin}}),Object.defineProperty(t,"runStatsigTriggeredSessionReplay",{enumerable:!0,get:function(){return o.runStatsigTriggeredSessionReplay}}),Object.assign((0,r._getStatsigGlobal)(),{SessionReplayClient:a.SessionReplayClient,SessionReplay:i.SessionReplay,runStatsigSessionReplay:i.runStatsigSessionReplay,runStatsigTriggeredSessionReplay:o.runStatsigTriggeredSessionReplay,StatsigSessionReplayPlugin:i.StatsigSessionReplayPlugin,StatsigTriggeredSessionReplayPlugin:o.StatsigTriggeredSessionReplayPlugin,startRecording:s.startRecording,stopRecording:s.stopRecording,forceStartRecording:s.forceStartRecording})},4535:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoCapture=t.runStatsigAutoCapture=t.StatsigAutoCapturePlugin=void 0;const c=n(6914),s=n(5423),i=n(8872),a=n(7875),o=n(6714),l=n(4716),u=n(2678),d=n(5864),h=n(3769),g=n(9900),p={submit:s.AutoCaptureEventName.FORM_SUBMIT,click:s.AutoCaptureEventName.CLICK,copy:s.AutoCaptureEventName.COPY,cut:s.AutoCaptureEventName.COPY};function r(e,t){var n=e.getContext()["sdkKey"];if(!(0,c._isServerEnv)()){var r=null!=(r=(0,c._getStatsigGlobal)().acInstances)?r:{};if(r[n])return r[n]}return new m(e,t)}t.StatsigAutoCapturePlugin=class{constructor(e){this._options=e,this.__plugin="auto-capture"}bind(e){r(e,this._options)}},t.runStatsigAutoCapture=r;class m{constructor(e,t){this._client=e,this._disabledEvents={},this._previousLoggedPageViewUrl=null,this._hasLoggedPageViewEnd=!1,this._pageViewLogged=!1;var{sdkKey:e,errorBoundary:n,values:r}=e.getContext(),n=(this._disabledEvents=null!=(r=null==(r=null==r?void 0:r.auto_capture_settings)?void 0:r.disabled_events)?r:{},this._errorBoundary=n,this._errorBoundary.wrap(this,"autoCapture:"),this._client.$on("values_updated",()=>{var e=this._client.getContext().values;this._disabledEvents=null!=(e=null==(e=null==e?void 0:e.auto_capture_settings)?void 0:e.disabled_events)?e:this._disabledEvents}),this._engagementManager=new o.EngagementManager,this._rageClickManager=new l.default,this._webVitalsManager=new u.WebVitalsManager(this._enqueueAutoCapture.bind(this),n),this._deadClickManager=new a.default(this._enqueueAutoCapture.bind(this),n),this._consoleLogManager=new i.ConsoleLogManager(this._enqueueAutoCapture.bind(this),n,null!=(r=null==t?void 0:t.consoleLogAutoCaptureSettings)?r:{enabled:!1}),this._eventFilterFunc=null==t?void 0:t.eventFilterFunc,(0,c._getDocumentSafe)());(0,c._isServerEnv)()||((t=null!=(r=(__STATSIG__=(0,c._getStatsigGlobal)()).acInstances)?r:{})[e]=this,__STATSIG__.acInstances=t),"loading"===(null==n?void 0:n.readyState)?n.addEventListener("DOMContentLoaded",()=>this._initialize()):this._initialize()}_addEventHandlers(){var e=(0,c._getWindowSafe)(),t=(0,c._getDocumentSafe)();if(e&&t){const n=(e,t=!0)=>{e=e||(null==(e=(0,c._getWindowSafe)())?void 0:e.event);this._autoLogEvent(e),t&&this._engagementManager.bumpInactiveTimer(),"click"===e.type&&e instanceof MouseEvent&&this._rageClickManager.isRageClick(e.clientX,e.clientY,Date.now())&&this._logRageClick(e)};(0,d._registerEventHandler)(t,"click",e=>n(e)),(0,d._registerEventHandler)(t,"submit",e=>n(e)),(0,d._registerEventHandler)(t,"copy",e=>n(e)),(0,d._registerEventHandler)(t,"cut",e=>n(e)),(0,d._registerEventHandler)(e,"error",e=>n(e,!1)),(0,d._registerEventHandler)(e,"pagehide",()=>this._tryLogPageViewEnd()),(0,d._registerEventHandler)(e,"beforeunload",()=>this._tryLogPageViewEnd())}}_addPageViewTracking(){var e=(0,c._getWindowSafe)(),t=(0,c._getDocumentSafe)();e&&t&&((0,d._registerEventHandler)(e,"popstate",()=>this._tryLogPageView()),window.history.pushState=new Proxy(window.history.pushState,{apply:(e,t,[n,r,i])=>{e.apply(t,[n,r,i]),this._tryLogPageView()}}),window.history.replaceState=new Proxy(window.history.replaceState,{apply:(e,t,[n,r,i])=>{e.apply(t,[n,r,i]),this._tryLogPageView()}}),this._tryLogPageView())}_autoLogEvent(e){var t=null==(t=e.type)?void 0:t.toLowerCase();if("error"===t&&e instanceof ErrorEvent)this._logError(e);else{var n=(0,d._getTargetNode)(e);if(n){t=p[t];if(t){var r=t===s.AutoCaptureEventName.COPY;if((0,d._shouldLogEvent)(e,n,r)){var i={};if(r){r=null==(r=null==(r=(0,c._getWindowSafe)())?void 0:r.getSelection())?void 0:r.toString();if(!r)return;i.selectedText=(0,d._sanitizeString)(r);r=e.type||"clipboard";i.clipType=r}var{value:e,metadata:r}=(0,h._gatherEventData)(n),n=(Object.assign(i,r),(0,g._gatherAllMetadata)((0,d._getSafeUrl)()));this._enqueueAutoCapture(t,e,Object.assign(Object.assign({},n),i))}}}}}_initialize(){this._webVitalsManager.startTracking(),this._deadClickManager.startTracking(),this._consoleLogManager.startTracking(),this._engagementManager.startInactivityTracking(()=>this._tryLogPageViewEnd(!0)),this._addEventHandlers(),this._addPageViewTracking(),this._logSessionStart(),this._logPerformance()}_logError(e){var t=(null==e?void 0:e.error)||{};let n=t;if("object"==typeof t)try{n=JSON.stringify(t)}catch(e){n="function"==typeof(null==t?void 0:t.toString)?t.toString():"Unknown Error"}this._enqueueAutoCapture(s.AutoCaptureEventName.ERROR,e.message,{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error_str:n})}_logSessionStart(){var e=this._getSessionFromClient();try{this._isNewSession(e)&&this._enqueueAutoCapture(s.AutoCaptureEventName.SESSION_START,(0,d._getSanitizedPageUrl)(),Object.assign({sessionID:e.data.sessionID},(0,g._gatherAllMetadata)((0,d._getSafeUrl)())),{flushImmediately:!0})}catch(e){this._errorBoundary.logError("AC::logSession",e)}}_tryLogPageView(){var e=(0,d._getSafeUrl)(),t=this._previousLoggedPageViewUrl;t&&e.href===t.href||(this._engagementManager.setLastPageViewTime(Date.now()),t=(this._hasLoggedPageViewEnd=!1,g._gatherAllMetadata)(e),this._previousLoggedPageViewUrl&&(t.last_page_view_url=this._previousLoggedPageViewUrl.href),this._pageViewLogged||(this._updateClientWithPossibleFirstTouchMetadata(),this._pageViewLogged=!0),this._enqueueAutoCapture(s.AutoCaptureEventName.PAGE_VIEW,(0,d._getSanitizedPageUrl)(),t,{flushImmediately:!0,addNewSessionMetadata:!0}),this._previousLoggedPageViewUrl=e,this._engagementManager.bumpInactiveTimer())}_tryLogPageViewEnd(e=!1){var t,n;this._hasLoggedPageViewEnd||(this._hasLoggedPageViewEnd=!0,t=this._engagementManager.getScrollMetrics(),n=this._engagementManager.getPageViewLength(),this._enqueueAutoCapture(s.AutoCaptureEventName.PAGE_VIEW_END,(0,d._getSanitizedPageUrl)(),Object.assign(Object.assign({},t),{pageViewLength:n,dueToInactivity:e}),{flushImmediately:!0}))}_logRageClick(e){var{value:t,metadata:n}=(0,h._gatherEventData)(e.target);this._enqueueAutoCapture(s.AutoCaptureEventName.RAGE_CLICK,t,Object.assign(Object.assign({x:e.clientX,y:e.clientY,timestamp:Date.now()},(0,g._gatherAllMetadata)((0,d._getSafeUrl)())),n))}_logPerformance(){const n=(0,c._getWindowSafe)();n&&n.performance&&void 0!==(null===n||void 0===n?void 0:n.performance)&&"function"==typeof n.performance.getEntriesByType&&"function"==typeof n.performance.getEntriesByName&&setTimeout(()=>{var e={},t=n.performance.getEntriesByType("navigation"),t=(t&&0<t.length&&t[0]instanceof PerformanceNavigationTiming&&(t=t[0],e.load_time_ms=t.duration,e.dom_interactive_time_ms=t.domInteractive-t.startTime,e.redirect_count=t.redirectCount,e.transfer_bytes=t.transferSize),n.performance.getEntriesByName("first-contentful-paint"));t&&0<t.length&&t[0]instanceof PerformancePaintTiming&&(e.first_contentful_paint_time_ms=t[0].startTime),this._enqueueAutoCapture(s.AutoCaptureEventName.PERFORMANCE,(0,d._getSanitizedPageUrl)(),Object.assign(Object.assign({},e),(0,g._getNetworkInfo)()))},1)}_enqueueAutoCapture(e,t,n,r){var i,s,a;if(t){var o=e.slice("auto_capture::".length);if(!this._disabledEvents[e]&&!this._disabledEvents[o]){o=this._getSessionFromClient();try{var l=Object.assign({sessionID:o.data.sessionID,page_url:null!=(a=null==(s=null==(i=(0,c._getWindowSafe)())?void 0:i.location)?void 0:s.href)?a:""},n),u=(null!=r&&r.addNewSessionMetadata&&(l.isNewSession=String(this._isNewSession(o))),{eventName:e,value:t,metadata:l});this._eventFilterFunc&&!this._eventFilterFunc(u)||(this._client.logEvent(u),null!=r&&r.flushImmediately&&this._flushImmediately())}catch(e){this._errorBoundary.logError("AC::enqueue",e)}}}}_updateClientWithPossibleFirstTouchMetadata(){var e=this._client;e._possibleFirstTouchMetadata=(0,g._getPossibleFirstTouchMetadata)((0,d._getSafeUrl)()),e._user=Object.assign(Object.assign({},e._user),{analyticsOnlyMetadata:Object.assign(Object.assign({},e._possibleFirstTouchMetadata),e._user.analyticsOnlyMetadata)})}_flushImmediately(){this._client.flush().catch(e=>{c.Log.error(e)})}_isNewSession(e){return Math.abs(e.data.startTime-Date.now())<1e3}_getSessionFromClient(){return this._client.getContext().session}static getAllMetadata(){return(0,g._gatherAllMetadata)((0,d._getSafeUrl)())}}t.AutoCapture=m},5423:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoCaptureEventName=void 0,t.AutoCaptureEventName={PAGE_VIEW:"auto_capture::page_view",PAGE_VIEW_END:"auto_capture::page_view_end",ERROR:"auto_capture::error",SESSION_START:"auto_capture::session_start",PERFORMANCE:"auto_capture::performance",FORM_SUBMIT:"auto_capture::form_submit",CLICK:"auto_capture::click",RAGE_CLICK:"auto_capture::rage_click",WEB_VITALS:"auto_capture::web_vitals",DEAD_CLICK:"auto_capture::dead_click",COPY:"auto_capture::copy",CONSOLE_LOG:"statsig::log_line"}},8872:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLogManager=void 0;const r=n(6914),i=n(5423),o=n(5864),l=n(8135),s=n(9900),u={trace:10,debug:20,log:30,info:30,warn:40,error:50};t.ConsoleLogManager=class{constructor(e,t,n){this._enqueueFn=e,this._errorBoundary=t,this._options=n,this._restoreFns=[],this._isTracking=!1,this._logLevel="info",this.__source="js-auto-capture",this._logLevel=null!=(e=this._options.logLevel)?e:"info",this._maxKeys=null!=(t=this._options.maxKeys)?t:10,this._maxDepth=null!=(n=this._options.maxDepth)?n:10,this._maxStringLength=null!=(e=this._options.maxStringLength)?e:500}startTracking(){try{!this._isTracking&&this._options.enabled&&(0,r._getWindowSafe)()&&(this._patchConsole(),this._isTracking=!0)}catch(e){r.Log.error("Error starting console log tracking",e),this._errorBoundary.logError("autoCapture:ConsoleLogManager",e)}}stopTracking(){this._isTracking&&(this._restoreFns.forEach(e=>e()),this._restoreFns=[],this._isTracking=!1)}_patchConsole(){Object.entries(u).forEach(([s,e])=>{if(!(e<u[this._logLevel])&&console[s]){const a=console[s].bind(console);let i=!1;e=(0,o.wrapFunctionWithRestore)(console,s,r=>(...t)=>{if(r(...t),!i){i=!0;try{var e=t.map(e=>(0,l._safeStringify)(e,this._maxKeys,this._maxDepth,this._maxStringLength)),n=(0,l._getStackTrace)();this._enqueueConsoleLog(s,e,n)}catch(e){a("console observer error:",e,...t),this._errorBoundary.logError("autoCapture:ConsoleLogManager",e)}finally{i=!1}}});this._restoreFns.push(e)}})}_enqueueConsoleLog(e,t,n){this._shouldLog()&&(e=Object.assign({status:"log"===e?"info":e,log_level:e,payload:t,trace:n,timestamp:Date.now(),source:this.__source},(0,s._gatherAllMetadata)((0,o._getSafeUrl)())),this._enqueueFn(i.AutoCaptureEventName.CONSOLE_LOG,t.join(" "),e))}_shouldLog(){return!this._options.sampleRate||"number"!=typeof this._options.sampleRate||this._options.sampleRate<=0||1<=this._options.sampleRate||Math.random()<this._options.sampleRate}}},7875:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DeadClickConfig=void 0;const a=t(6914),i=t(5423),s=t(5864),o=t(3769),l=t(9900);n.DeadClickConfig={CLICK_CHECK_TIMEOUT:1e3,SCROLL_DELAY_MS:100,SELECTION_CHANGE_DELAY_MS:100,MUTATION_DELAY_MS:2500,ABSOLUTE_DEAD_CLICK_TIMEOUT:2750};n.default=class{constructor(e,t){this._enqueueFn=e,this._errorBoundary=t,this._lastMutationTime=0,this._lastSelectionChangeTime=0,this._clicks=[],this._deadClickConfig=n.DeadClickConfig,this._handleScroll=(0,s.throttle)(()=>{const t=Date.now();this._clicks.forEach(e=>{e.scrollDelayMs||(e.scrollDelayMs=t-e.timestamp)})},50)}startTracking(){try{var e=(0,a._getWindowSafe)();e&&(e.addEventListener("click",e=>this._handleClick(e),{capture:!0}),e.addEventListener("scroll",()=>this._handleScroll(),{capture:!0,passive:!0}),e.addEventListener("selectionchange",()=>this._handleSelectionChange()),this._setupMutationObserver())}catch(e){a.Log.error("Error starting dead click tracking",e),this._errorBoundary.logError("autoCapture:DeadClickManager",e)}}_handleClick(e){var t,e=e.target;e&&(t={timestamp:Date.now(),eventTarget:e},s.interactiveElements.includes(null==(e=null==e?void 0:e.tagName)?void 0:e.toLowerCase())||this._clicks.push(t),this._clicks.length)&&!this._clickCheckTimer&&(this._clickCheckTimer=null==(e=(0,a._getWindowSafe)())?void 0:e.setTimeout(()=>{this._checkForDeadClick()},this._deadClickConfig.CLICK_CHECK_TIMEOUT))}_handleSelectionChange(){this._lastSelectionChangeTime=Date.now()}_setupMutationObserver(){var e=(0,a._getDocumentSafe)();e&&(this._observer=new MutationObserver(()=>{this._lastMutationTime=Date.now()}),this._observer.observe(e.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0}))}_checkForDeadClick(){if(this._clicks.length){clearTimeout(this._clickCheckTimer),this._clickCheckTimer=void 0;var e=this._clicks;this._clicks=[];for(const s of e){this._updateClickDelayMs(s);var t,n=null!=s.scrollDelayMs&&s.scrollDelayMs<this._deadClickConfig.SCROLL_DELAY_MS,r=null!=s.selectionChangeDelayMs&&s.selectionChangeDelayMs<this._deadClickConfig.SELECTION_CHANGE_DELAY_MS,i=null!=s.mutationDelayMs&&s.mutationDelayMs<this._deadClickConfig.MUTATION_DELAY_MS;n||r||i||(n=null!=s.scrollDelayMs&&s.scrollDelayMs>this._deadClickConfig.SCROLL_DELAY_MS,r=null!=s.selectionChangeDelayMs&&s.selectionChangeDelayMs>this._deadClickConfig.SELECTION_CHANGE_DELAY_MS,i=null!=s.mutationDelayMs&&s.mutationDelayMs>this._deadClickConfig.MUTATION_DELAY_MS,t=null!=s.absoluteDelayMs&&s.absoluteDelayMs>this._deadClickConfig.ABSOLUTE_DEAD_CLICK_TIMEOUT,n||r||i||t?this._logDeadClick(s,{scrollTimeout:n,selectionChangeTimeout:r,mutationTimeout:i,absoluteTimeout:t}):null!=s.absoluteDelayMs&&s.absoluteDelayMs<this._deadClickConfig.ABSOLUTE_DEAD_CLICK_TIMEOUT&&this._clicks.push(s))}this._clicks.length&&!this._clickCheckTimer&&(this._clickCheckTimer=null==(e=(0,a._getWindowSafe)())?void 0:e.setTimeout(()=>{this._checkForDeadClick()},this._deadClickConfig.CLICK_CHECK_TIMEOUT))}}_logDeadClick(e,t){var{value:n,metadata:r}=(0,o._gatherEventData)(e.eventTarget);n&&this._enqueueFn(i.AutoCaptureEventName.DEAD_CLICK,n,Object.assign(Object.assign(Object.assign(Object.assign({},r),t),(0,l._gatherCommonMetadata)((0,s._getSafeUrl)())),{scrollDelayMs:e.scrollDelayMs,selectionChangeDelayMs:e.selectionChangeDelayMs,mutationDelayMs:e.mutationDelayMs,absoluteDelayMs:e.absoluteDelayMs}))}_updateClickDelayMs(e){!e.mutationDelayMs&&0<this._lastMutationTime&&e.timestamp<=this._lastMutationTime&&(e.mutationDelayMs=Date.now()-this._lastMutationTime),!e.selectionChangeDelayMs&&0<this._lastSelectionChangeTime&&e.timestamp<=this._lastSelectionChangeTime&&(e.selectionChangeDelayMs=Date.now()-this._lastSelectionChangeTime),e.absoluteDelayMs=Date.now()-e.timestamp}}},6714:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EngagementManager=void 0;const r=n(6914);t.EngagementManager=class{constructor(){this._lastScrollY=0,this._maxScrollY=0,this._lastScrollPercentage=0,this._maxScrollPercentage=0,this._lastPageViewTime=Date.now(),this._inactiveTimer=null,this._onInactivityCallback=null,this._initializeScrollTracking()}_initializeScrollTracking(){var e=(0,r._getWindowSafe)();e&&(e.addEventListener("scroll",()=>this._handleScroll()),e.addEventListener("scrollend",()=>this._handleScroll()),e.addEventListener("resize",()=>this._handleScroll()))}_handleScroll(){var e,t=(0,r._getWindowSafe)(),n=(0,r._getDocumentSafe)();t&&n&&(e=n.body.scrollHeight,n=t.scrollY||n.documentElement.scrollTop||0,t=t.innerHeight,this._lastScrollY=n,this._maxScrollY=Math.max(this._maxScrollY,n),n=Math.min(100,Math.round((n+t)/e*100)),this._lastScrollPercentage=n,this._maxScrollPercentage=Math.max(this._maxScrollPercentage,n),this.bumpInactiveTimer())}getScrollMetrics(){return{lastScrollY:this._lastScrollY,maxScrollY:this._maxScrollY,lastScrollPercentage:this._lastScrollPercentage,maxScrollPercentage:this._maxScrollPercentage,scrollDepth:this._maxScrollPercentage}}getPageViewLength(){return Date.now()-this._lastPageViewTime}setLastPageViewTime(e){this._lastPageViewTime=e}startInactivityTracking(e){this._onInactivityCallback=e}bumpInactiveTimer(){var e=(0,r._getWindowSafe)();e&&(this._inactiveTimer&&clearTimeout(this._inactiveTimer),this._inactiveTimer=e.setTimeout(()=>{this._onInactivityCallback&&this._onInactivityCallback()},6e5))}}},4716:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this._clicks=[]}isRageClick(e,t,n){this._clicks=this._clicks.filter(e=>n-e.timestamp<1e3);var r,i;return 0<this._clicks.length&&(r=this._clicks[this._clicks.length-1],i=e-r.x,r=t-r.y,!(Math.abs(i)+Math.abs(r)<=30))&&(this._clicks=[]),this._clicks.push({x:e,y:t,timestamp:n}),3<=this._clicks.length}}},2678:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebVitalsManager=void 0;const r=n(8572),i=n(6914),s=n(5423),a=n(5864),o=["CLS","FCP","LCP","TTFB"];t.WebVitalsManager=class{constructor(e,t){this._enqueueFn=e,this._errorBoundary=t,this._isInitialized=!1,this._metricEvent={url:(0,a._getSafeUrlString)(),sanitizedUrl:(0,a._getSanitizedPageUrl)(),metrics:[],firstMetricTimestamp:void 0}}startTracking(){var e,t,n;try{this._isInitialized||"https:"!==(n=null==(t=null==(e=(0,i._getWindowSafe)())?void 0:e.location)?void 0:t.protocol)&&"http:"!==n||((0,r.onCLS)(e=>this._handleMetric(e)),(0,r.onFCP)(e=>this._handleMetric(e)),(0,r.onLCP)(e=>this._handleMetric(e)),(0,r.onTTFB)(e=>this._handleMetric(e)),this._isInitialized=!0)}catch(e){i.Log.error("Error starting web vitals tracking",e),this._errorBoundary.logError("autoCapture:WebVitalsManager",e)}}_handleMetric(e){var t;void 0===this._metricEvent.firstMetricTimestamp&&(this._metricEvent.firstMetricTimestamp=Date.now()),void 0!==e&&void 0!==(null==e?void 0:e.name)&&""!==(t=(0,a._getSafeUrlString)())&&o.includes(e.name)&&(t!==this._metricEvent.url&&(this._enqueueWebVitalsAutoCaptureEvent(),this._metricEvent.url=t),this._metricEvent.metrics.push({name:e.name,value:e.value,delta:e.delta,id:e.id}),this._metricEvent.metrics.length===o.length)&&this._enqueueWebVitalsAutoCaptureEvent()}_enqueueWebVitalsAutoCaptureEvent(){if(""!==this._metricEvent.url&&0!==this._metricEvent.metrics.length){const n={};this._metricEvent.metrics.forEach(e=>{var t=e.name.toLowerCase();n[t+"_value"]=e.value,n[t+"_delta"]=e.delta,n[t+"_id"]=e.id}),this._enqueueFn(s.AutoCaptureEventName.WEB_VITALS,this._metricEvent.sanitizedUrl,Object.assign(Object.assign({},n),{first_metric_timestamp:this._metricEvent.firstMetricTimestamp})),this._metricEvent={url:(0,a._getSafeUrlString)(),sanitizedUrl:(0,a._getSanitizedPageUrl)(),metrics:[],firstMetricTimestamp:void 0}}}}},1964:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigAutoCapturePlugin=t.runStatsigAutoCapture=t.AutoCapture=t.AutoCaptureEventName=void 0;var r=n(6914);const i=n(4535);Object.defineProperty(t,"AutoCapture",{enumerable:!0,get:function(){return i.AutoCapture}}),Object.defineProperty(t,"StatsigAutoCapturePlugin",{enumerable:!0,get:function(){return i.StatsigAutoCapturePlugin}}),Object.defineProperty(t,"runStatsigAutoCapture",{enumerable:!0,get:function(){return i.runStatsigAutoCapture}});var s=n(5423),n=(Object.defineProperty(t,"AutoCaptureEventName",{enumerable:!0,get:function(){return s.AutoCaptureEventName}}),Object.assign((0,r._getStatsigGlobal)(),{AutoCapture:i.AutoCapture,runStatsigAutoCapture:i.runStatsigAutoCapture,StatsigAutoCapturePlugin:i.StatsigAutoCapturePlugin}));t.default=n},5864:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapFunctionWithRestore=t.throttle=t._sanitizeString=t._getAnchorNodeInHierarchy=t._getSafeTimezoneOffset=t._getSafeTimezone=t._getSafeNetworkInformation=t._registerEventHandler=t._getSanitizedPageUrl=t._getSafeUrlString=t._getSafeUrl=t._shouldLogEvent=t._getTargetNode=t._stripEmptyValues=t.interactiveElements=void 0;const r=n(6914);const i=new RegExp("^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$");const s=new RegExp("^(\\d{3}-?\\d{2}-?\\d{4})$");function a(){var e=null!=(e=null==(e=null==(e=(0,r._getWindowSafe)())?void 0:e.location)?void 0:e.href)?e:"";let t;try{t=new URL(e)}catch(e){t=new URL("error:")}return t}function o(t){if(t){let e=t;for(;e;){var n=e.tagName.toLowerCase();if(["body","document"].includes(n))return null;if("a"===e.tagName.toLowerCase())return e;e=e.parentElement}}return null}t.interactiveElements=["button","a","input","select","textarea","form","select","label"],t._stripEmptyValues=function(e){return Object.fromEntries(Object.entries(e).filter(([,e])=>null!=e&&""!==e&&void 0!==e))},t._getTargetNode=function(e){if(!e)return null;let t=e.target||e.srcElement;return t&&t instanceof Element?t=3===t.nodeType?t.parentNode||null:t:null},t._shouldLogEvent=function(e,t,n=!1){if(!e||!t||1!==t.nodeType)return!1;var r=t.tagName.toLowerCase(),i=e.type.toLowerCase();if(t.classList.contains("statsig-no-capture"))return!1;if(n)return!0;switch(r){case"html":return!1;case"form":return 0<=["submit"].indexOf(i);case"input":case"select":case"textarea":return 0<=["change","click"].indexOf(i);default:if("click"===i){if("button"===r)return!0;if(o(t))return!0}return!1}},t._getSafeUrl=a,t._getSafeUrlString=function(){var e=a().toString();return e.startsWith("error:")?"":e},t._getSanitizedPageUrl=function(){return(0,r._getCurrentPageUrlSafe)()||""},t._registerEventHandler=function(e,t,n){e&&e.addEventListener&&e.addEventListener(t,n,!0)},t._getSafeNetworkInformation=function(){var e=(0,r._getWindowSafe)();return e&&e.navigator&&e.navigator.connection||null},t._getSafeTimezone=function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return null}},t._getSafeTimezoneOffset=function(){try{return(new Date).getTimezoneOffset()}catch(e){return null}},t._getAnchorNodeInHierarchy=o,t._sanitizeString=function(e){return e?e.replace(/<[^>]*>/g,"").trim().split(/(\s+)/).filter(e=>{return!i.test((e||"").replace(/[- ]/g,""))&&!s.test((e||"").replace(/[- ]/g,""))}).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255):null},t.throttle=function(n,r){let i=0;return function(...e){var t=Date.now();t-i>=r&&(i=t,n(...e))}},t.wrapFunctionWithRestore=function(e,t,n){const r=e[t];if("function"!=typeof r)return()=>{};try{var i=n(r);return Object.defineProperty(i,"__statsig_original__",{enumerable:!1,value:r}),e[t]=i,()=>{e[t]=r}}catch(e){return()=>{}}}},8135:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._getStackTrace=t._safeStringify=void 0,t._safeStringify=function(e,t,n,r){try{return function(e,t,n){if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)){if(Object.keys(e).length>t)return 1;if(function t(n,r){if(r<=0)return!0;if("object"!=typeof n||null===n)return!1;return Object.keys(n).some(e=>t(n[e],r-1))}(e,n))return 1}return"function"==typeof e}(e,t,n)?(i=r,e.toString().slice(0,i)+"..."):"string"==typeof e?e:"object"==typeof e&&null!==e?JSON.stringify(e):String(e)}catch(e){return"[Unserializable]"}var i},t._getStackTrace=function(){var e,t;try{return null!=(t=null==(e=(new Error).stack)?void 0:e.split("\n").slice(2))?t:[]}catch(e){return[]}}},3769:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._getMetadataFromElement=t._gatherCopyEventData=t._gatherEventData=void 0;const r=n(6914),l=n(5864),i=1e3,s=100,a=50;function o(e,t){return e?e.length>t?e.substring(0,t)+"...":e:null}function u(e){var t={},n=Array.from(e.classList);return t.classList=0<n.length?n.slice(0,s):null,t.class=(o(e.getAttribute("class"),i)||"").replace(/\s+/g," ").trim(),t.id=o(e.getAttribute("id"),i),t.ariaLabel=o(e.getAttribute("aria-label"),i),t.selector=function(t){if(!t)return"";if(!t.parentNode){var n=t.tagName.toLowerCase();if(t.id)return"#"+t.id;let e=n;return t.className&&"string"==typeof t.className&&0<(n=t.className.trim().split(/\s+/)).length&&""!==n[0]&&(e+="."+n.join(".")),e}var e=[];let r=t,i=0;for(;r&&r.nodeType===Node.ELEMENT_NODE&&i<a;){var s=function(r){var e=r.tagName.toLowerCase();if(r.id)return"#"+r.id;let i=e;r.className&&"string"==typeof r.className&&0<(e=r.className.trim().split(/\s+/)).length&&""!==e[0]&&(i+="."+e.join("."));e=r.parentElement;if(e&&1<e.children.length){let e=1,t=1,n=r.previousElementSibling;for(;n;)e++,n.tagName===r.tagName&&t++,n=n.previousElementSibling;i+=`:nth-child(${e})`,(1<t||function(e){let t=e.nextElementSibling;for(;t;){if(t.tagName===e.tagName)return 1;t=t.nextElementSibling}return}(r))&&(i+=`:nth-of-type(${t})`)}return i}(r);if(e.unshift(s),r.id)break;if((r=r.parentElement)&&"body"===r.tagName.toLowerCase())break;i++}return e.join(" > ")}(e),t}t._gatherEventData=function(e){var t,n,r,i,s,a,o;return"input"===(a=e).tagName.toLowerCase()&&["button","checkbox","submit","reset"].includes(a.getAttribute("type")||"")||"textarea"===a.tagName.toLowerCase()||"select"===a.tagName.toLowerCase()||"true"===a.getAttribute("contenteditable")?{value:null,metadata:{}}:(a=e.tagName.toLowerCase(),t={},n=(0,l._getSanitizedPageUrl)()||"",t.tagName=a,s=u(e),Object.assign(t,s),"form"===a&&Object.assign(t,((s={}).action=(r=e).getAttribute("action"),s.method=null!=(i=r.getAttribute("method"))?i:"GET",s.formName=r.getAttribute("name"),s.formId=r.getAttribute("id"),s)),"input"===a&&Object.assign(t,((i={}).content=(r=e).value,i.inputName=r.getAttribute("name"),i)),(s=(0,l._getAnchorNodeInHierarchy)(e))&&Object.assign(t,((o={}).href=s.getAttribute("href"),o)),"button"!==a&&!s||Object.assign(t,((o={}).content=((a=s||e).textContent||"").trim(),a=function(e){var t={};if(e){var n=null==e?void 0:e.dataset;if(n)for(const r in n)t["data-"+r]=n[r]||""}return t}(a),Object.assign(o,a),o)),{value:n,metadata:t})},t._gatherCopyEventData=function(e){var t=null==(t=null==(t=(0,r._getWindowSafe)())?void 0:t.getSelection())?void 0:t.toString(),n={},t=(n.selectedText=(0,l._sanitizeString)(t),e.type||"clipboard");return n.clipType=t,n},t._getMetadataFromElement=u},9900:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._getPossibleFirstTouchMetadata=t._getNetworkInfo=t._gatherAllMetadata=t._gatherCommonMetadata=void 0;const a=n(6914),o=n(5864);function s(e){var t=(0,a._getDocumentSafe)(),n=(0,a._getWindowSafe)();return(0,o._stripEmptyValues)(Object.assign({title:null==t?void 0:t.title,current_url:null==(t=null==n?void 0:n.location)?void 0:t.href,user_agent:null!=(t=null==n?void 0:n.navigator)&&t.userAgent&&200<(null==(t=null==(t=null==n?void 0:n.navigator)?void 0:t.userAgent)?void 0:t.length)?n.navigator.userAgent.substring(0,200):null==(t=null==n?void 0:n.navigator)?void 0:t.userAgent,locale:null==(t=null==n?void 0:n.navigator)?void 0:t.language,hostname:e.hostname,pathname:e.pathname,screen_width:null==(t=null==n?void 0:n.screen)?void 0:t.width,screen_height:null==(e=null==n?void 0:n.screen)?void 0:e.height,viewport_width:null==n?void 0:n.innerWidth,viewport_height:null==n?void 0:n.innerHeight,viewport:`${null==n?void 0:n.innerWidth}x`+(null==n?void 0:n.innerHeight),timestamp:Date.now(),timezone:(0,o._getSafeTimezone)(),timezone_offset:(0,o._getSafeTimezoneOffset)()},r()))}function r(){var e=(0,o._getSafeNetworkInformation)(),t={};return void 0!==(null==e?void 0:e.effectiveType)&&(t.effective_connection_type=e.effectiveType),void 0!==(null==e?void 0:e.rtt)&&(t.rtt_ms=e.rtt),void 0!==(null==e?void 0:e.downlink)&&(t.downlink_mbps=e.downlink,t.downlink_kbps=1e3*e.downlink),void 0!==(null==e?void 0:e.saveData)&&(t.save_data=e.saveData),t}function l(e){e=(null==e?void 0:e.referrer)||"";if(!e)return{referrer:null,referrer_domain:null,referrer_path:null,searchEngine:"",searchQuery:""};try{var t=new URL(e);const i=t.hostname;var n=["google","bing","yahoo","duckduckgo","baidu"].find(e=>i.includes(e+"."))||"",r=t.searchParams.get("yahoo"===n?"p":"q")||"";return{referrer:e,referrer_domain:t.hostname,referrer_path:t.pathname,searchEngine:n,searchQuery:r}}catch(e){return{referrer:null,referrer_domain:null,referrer_path:null,searchEngine:"",searchQuery:""}}}function u(e){const n=e.searchParams,r={};return["utm_source","utm_medium","utm_campaign","utm_term","utm_content","msclkid","dclid","fbclid","gad_source","gclid","gclsrc","wbraid","utm_id","irclid","igshid","_kx","li_fat_id","mc_cid","mc_eid","epik","qclid","rdt_cid","sccid","ttc","ttclid","ttc_id","twclid"].forEach(e=>{var t=n.get(e);t&&(r[e]=t)}),r}t._gatherCommonMetadata=s,t._gatherAllMetadata=function(e){var t=(0,a._getDocumentSafe)(),n=(0,a._getWindowSafe)();if(!t||!n)return{};var n=l(t),t=s(e),r=u(e);const i={};return e.searchParams.forEach((e,t)=>{i[t]=e}),Object.assign(Object.assign({},t),(0,o._stripEmptyValues)(Object.assign(Object.assign(Object.assign({},n),r),i)))},t._getNetworkInfo=r,t._getPossibleFirstTouchMetadata=function(e){var t=(0,a._getDocumentSafe)(),n=(0,a._getWindowSafe)();if(!t||!n)return{};var r,i,n=l(t),t=u(e),e=(0,o._stripEmptyValues)(Object.assign(Object.assign({},n),t)),s={};for([r,i]of Object.entries(e))s["$s_"+r]=i;return s}},670:(t,n)=>{"use strict";Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});var i,u=Object.defineProperty,o=(e,t,n)=>{var r;return r=n,(t="symbol"!=typeof t?t+"":t)in(e=e)?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,n},c=Object.defineProperty,p=(e,t,n)=>{var r;return r=n,(t="symbol"!=typeof t?t+"":t)in(e=e)?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,n},J=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(J||{});function x(e){var t=null==e?void 0:e.host;return Boolean((null==t?void 0:t.shadowRoot)===e)}function N(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function q(e){try{var t=e.rules||e.cssRules;return t?n=(n=Array.from(t,m).join("")).includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")?n.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;"):n:null}catch(e){return null}var n}function m(e){let t;if("styleSheet"in e)try{t=q(e.styleSheet)||((r=(n=e).cssText).split('"').length<3?r:(r=["@import",`url(${JSON.stringify(n.href)})`],""===n.layerName?r.push("layer"):n.layerName&&r.push(`layer(${n.layerName})`),n.supportsText&&r.push(`supports(${n.supportsText})`),n.media.length&&r.push(n.media.mediaText),r.join(" ")+";"))}catch(e){}else if("selectorText"in e&&e.selectorText.includes(":"))return e.cssText.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2");var n,r;return t||e.cssText}class ce{constructor(){p(this,"idNodeMap",new Map),p(this,"nodeMetaMap",new WeakMap)}getId(e){return e?(null==(e=this.getMeta(e))?void 0:e.id)??-1:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){var t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){var n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){var n=this.getNode(e);n&&(n=this.nodeMetaMap.get(n))&&this.nodeMetaMap.set(t,n),this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function de({element:e,maskInputOptions:t,tagName:n,type:r,value:i,maskInputFn:s}){let a=i||"";i=r&&Z(r);return a=t[n.toLowerCase()]||i&&t[i]?s?s(a,e):"*".repeat(a.length):a}function Z(e){return e.toLowerCase()}const he="__rrweb_original__";function ge(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Z(t):null}function K(e,t){let n;try{n=new URL(e,t??window.location.href)}catch(e){return null}e=n.pathname.match(/\.([0-9a-z]+)(?:$)/i);return(null==e?void 0:e[1])??null}let Y=1;const pe=new RegExp("[^a-z0-9-_:]"),P=-2;function _(){return Y++}let X,me;const f=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,v=/^(?:[a-z+]+:)?\/\//i,y=/^www\..*/i,S=/^(data:)([^,]*),(.*)/i;function $(e,l){return(e||"").replace(f,(e,t,n,r,i,s)=>{n=n||i||s,i=t||r||"";if(!n)return e;if(v.test(n)||y.test(n))return`url(${i}${n}${i})`;if(S.test(n))return`url(${i}${n}${i})`;if("/"===n[0])return`url(${i}${function(e){let t="";return t=(t=-1<e.indexOf("//")?e.split("/").slice(0,3).join("/"):e.split("/")[0]).split("?")[0]}(l)+n}${i})`;var a=l.split("/"),s=n.split("/");a.pop();for(const o of s)"."!==o&&(".."===o?a.pop():a.push(o));return`url(${i}${a.join("/")}${i})`})}const b=/^[^ \t\n\r\u000c]+/,C=/^[, \t\n\r\u000c]+/;function I(r,i){if(""===i.trim())return i;let s=0;function e(e){var e=e.exec(i.substring(s));return e?(e=e[0],s+=e.length,e):""}for(var a=[];e(C),!(s>=i.length);){let n=e(b);if(","===n.slice(-1))n=l(r,n.substring(0,n.length-1)),a.push(n);else{let e="",t=(n=l(r,n),!1);for(;;){var o=i.charAt(s);if(""===o){a.push((n+e).trim());break}if(t)")"===o&&(t=!1);else{if(","===o){s+=1,a.push((n+e).trim());break}"("===o&&(t=!0)}e+=o,s+=1}}}return a.join(", ")}const w=new WeakMap;function l(e,t){return t&&""!==t.trim()?Q(e,t):t}function Q(e,t){let n=w.get(e);if(n||(n=e.createElement("a"),w.set(e,n)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return n.setAttribute("href",t),n.href}function _e(e,t,n,r){return r&&("src"!==n&&("href"!==n||"use"===t&&"#"===r[0])&&("xlink:href"!==n||"#"===r[0])&&("background"!==n||"table"!==t&&"td"!==t&&"th"!==t)?"srcset"===n?I(e,r):"style"===n?$(r,Q(e)):"object"===t&&"data"===n?l(e,r):r:l(e,r))}function fe(e,t){return("video"===e||"audio"===e)&&"autoplay"===t}function s(t,n,e){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return!!e&&s(t.parentNode,n,e);for(let e=t.classList.length;e--;){var r=t.classList[e];if(n.test(r))return!0}return!!e&&s(t.parentNode,n,e)}function H(e,t,n,r){try{var i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===i)return!1;if("string"==typeof t){if(r){if(i.closest("."+t))return!0}else if(i.classList.contains(t))return!0}else if(s(i,t,r))return!0;if(n)if(r){if(i.closest(n))return!0}else if(i.matches(n))return!0}catch(e){}return!1}function ve(n,e){var t,r,i,s,{doc:a,mirror:e,blockClass:o,blockSelector:l,needsMask:u,inlineStylesheet:P,maskInputOptions:F={},maskTextFn:j,maskInputFn:U,dataURLOptions:G={},inlineImages:B,recordCanvas:W,keepIframeSrcFn:V,newlyAddedElement:z=!1}=e,c=(t=a,!(e=e).hasNode(t)||1===(e=e.getId(t))?void 0:e);switch(n.nodeType){case n.DOCUMENT_NODE:return"CSS1Compat"!==n.compatMode?{type:J.Document,childNodes:[],compatMode:n.compatMode}:{type:J.Document,childNodes:[]};case n.DOCUMENT_TYPE_NODE:return{type:J.DocumentType,name:n.name,publicId:n.publicId,systemId:n.systemId,rootId:c};case n.ELEMENT_NODE:{var d=n;var h={doc:a,blockClass:o,blockSelector:l,inlineStylesheet:P,maskInputOptions:F,maskInputFn:U,dataURLOptions:G,inlineImages:B,recordCanvas:W,keepIframeSrcFn:V,newlyAddedElement:z,rootId:c};const{doc:v,blockClass:y,blockSelector:S,inlineStylesheet:b,maskInputOptions:C={},maskInputFn:I,dataURLOptions:w={},inlineImages:k,recordCanvas:E,keepIframeSrcFn:M,newlyAddedElement:T=!1,rootId:O}=h,D=function(t,n,e){try{if("string"==typeof n){if(t.classList.contains(n))return!0}else for(let e=t.classList.length;e--;){var r=t.classList[e];if(n.test(r))return!0}if(e)return t.matches(e)}catch(e){}return!1}(d,y,S),A=function(e){return e instanceof HTMLFormElement?"form":(e=Z(e.tagName),pe.test(e)?"div":e)}(d);let t={};var K=d.attributes.length;for(let e=0;e<K;e++){var g=d.attributes[e];fe(A,g.name,g.value)||(t[g.name]=_e(v,A,Z(g.name),g.value))}if("link"===A&&b){h=Array.from(v.styleSheets).find(e=>e.href===d.href);let e=null;(e=h?q(h):e)&&(delete t.rel,delete t.href,t._cssText=$(e,h.href))}"style"===A&&d.sheet&&!(d.innerText||d.textContent||"").trim().length&&(h=q(d.sheet))&&(t._cssText=$(h,Q(v)));"input"!==A&&"textarea"!==A&&"select"!==A||(h=d.value,r=d.checked,"radio"!==t.type&&"checkbox"!==t.type&&"submit"!==t.type&&"button"!==t.type&&h?t.value=de({element:d,type:ge(d),tagName:A,value:h,maskInputOptions:C,maskInputFn:I}):r&&(t.checked=r));"option"===A&&(d.selected&&!C.select?t.selected=!0:delete t.selected);"canvas"===A&&E&&("2d"===d.__context?function(n){var r=n.getContext("2d");if(r)for(let t=0;t<n.width;t+=50)for(let e=0;e<n.height;e+=50){var i=r.getImageData,i=he in i?i[he]:i;if(new Uint32Array(i.call(r,t,e,Math.min(50,n.width-t),Math.min(50,n.height-e)).data.buffer).some(e=>0!==e))return}return 1}(d)||(t.rr_dataURL=d.toDataURL(w.type,w.quality)):"__context"in d||(h=d.toDataURL(w.type,w.quality),(r=v.createElement("canvas")).width=d.width,r.height=d.height,i=r.toDataURL(w.type,w.quality),h!==i&&(t.rr_dataURL=h)));if("img"===A&&k){X||(X=v.createElement("canvas"),me=X.getContext("2d"));const R=d,L=R.currentSrc||R.getAttribute("src")||"<unknown-src>",x=R.crossOrigin,N=()=>{R.removeEventListener("load",N);try{X.width=R.naturalWidth,X.height=R.naturalHeight,me.drawImage(R,0,0),t.rr_dataURL=X.toDataURL(w.type,w.quality)}catch(e){if("anonymous"!==R.crossOrigin)return R.crossOrigin="anonymous",void(R.complete&&0!==R.naturalWidth?N():R.addEventListener("load",N));console.warn(`Cannot inline img src=${L}! Error: `+e)}"anonymous"===R.crossOrigin&&(x?t.crossOrigin=x:R.removeAttribute("crossorigin"))};R.complete&&0!==R.naturalWidth?N():R.addEventListener("load",N)}"audio"!==A&&"video"!==A||((i=t).rr_mediaState=d.paused?"paused":"played",i.rr_mediaCurrentTime=d.currentTime,i.rr_mediaPlaybackRate=d.playbackRate,i.rr_mediaMuted=d.muted,i.rr_mediaLoop=d.loop,i.rr_mediaVolume=d.volume);T||(d.scrollLeft&&(t.rr_scrollLeft=d.scrollLeft),d.scrollTop&&(t.rr_scrollTop=d.scrollTop));D&&({width:h,height:p}=d.getBoundingClientRect(),t={class:t.class,rr_width:h+"px",rr_height:p+"px"});"iframe"!==A||M(t.src)||(d.contentDocument||(t.rr_src=t.src),delete t.src);let e;try{customElements.get(A)&&(e=!0)}catch(e){}return{type:J.Element,tagName:A,attributes:t,childNodes:[],isSVG:function(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}(d)||void 0,needBlock:D,rootId:O,isCustom:e};return}case n.TEXT_NODE:{h=n;var p={doc:a,needsMask:u,maskTextFn:j,rootId:c};var{needsMask:Y,maskTextFn:m,rootId:H}=p,_=h.parentNode&&h.parentNode.tagName;let e=h.textContent;var f="STYLE"===_||void 0,_="SCRIPT"===_||void 0;if(f&&e){try{h.nextSibling||h.previousSibling||null!=(s=h.parentNode.sheet)&&s.cssRules&&(e=q(h.parentNode.sheet))}catch(e){console.warn("Cannot get CSS styles from text's parentNode. Error: "+e,h)}e=$(e,Q(p.doc))}_&&(e="SCRIPT_PLACEHOLDER");!f&&!_&&e&&Y&&(e=m?m(e,h.parentElement):e.replace(/[\S]/g,"*"));return{type:J.Text,textContent:e||"",isStyle:f,rootId:H};return}case n.CDATA_SECTION_NODE:return{type:J.CDATA,textContent:"",rootId:c};case n.COMMENT_NODE:return{type:J.Comment,textContent:n.textContent||"",rootId:c};default:return!1}}function F(e){return null==e?"":e.toLowerCase()}function ee(t,e){const{doc:n,mirror:r,blockClass:i,blockSelector:s,maskTextClass:a,maskTextSelector:o,skipChild:l=!1,inlineStylesheet:u=!0,maskInputOptions:c={},maskTextFn:d,maskInputFn:h,slimDOMOptions:g,dataURLOptions:p={},inlineImages:m=!1,recordCanvas:_=!1,onSerialize:f,onIframeLoad:v,iframeLoadTimeout:y=5e3,onStylesheetLoad:S,stylesheetLoadTimeout:b=5e3,keepIframeSrcFn:C=()=>!1,newlyAddedElement:I=!1}=e;let w=e["needsMask"],{preserveWhiteSpace:k=!0}=e;!w&&t.childNodes&&(e=void 0===w,w=H(t,a,o,e));e=ve(t,{doc:n,mirror:r,blockClass:i,blockSelector:s,needsMask:w,inlineStylesheet:u,maskInputOptions:c,maskTextFn:d,maskInputFn:h,dataURLOptions:p,inlineImages:m,recordCanvas:_,keepIframeSrcFn:C,newlyAddedElement:I});if(!e)return console.warn(t,"not serialized"),null;let E;E=r.hasNode(t)?r.getId(t):!function(e,t){if(t.comment&&e.type===J.Comment)return 1;if(e.type===J.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===K(e.attributes.href)))return 1;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(F(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===F(e.attributes.name)||"icon"===F(e.attributes.rel)||"apple-touch-icon"===F(e.attributes.rel)||"shortcut icon"===F(e.attributes.rel))))return 1;if("meta"===e.tagName){if(t.headMetaDescKeywords&&F(e.attributes.name).match(/^description|keywords$/))return 1;if(t.headMetaSocial&&(F(e.attributes.property).match(/^(og|twitter|fb):/)||F(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===F(e.attributes.name)))return 1;if(t.headMetaRobots&&("robots"===F(e.attributes.name)||"googlebot"===F(e.attributes.name)||"bingbot"===F(e.attributes.name)))return 1;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return 1;if(t.headMetaAuthorship&&("author"===F(e.attributes.name)||"generator"===F(e.attributes.name)||"framework"===F(e.attributes.name)||"publisher"===F(e.attributes.name)||"progid"===F(e.attributes.name)||F(e.attributes.property).match(/^article:/)||F(e.attributes.property).match(/^product:/)))return 1;if(t.headMetaVerification&&("google-site-verification"===F(e.attributes.name)||"yandex-verification"===F(e.attributes.name)||"csrf-token"===F(e.attributes.name)||"p:domain_verify"===F(e.attributes.name)||"verify-v1"===F(e.attributes.name)||"verification"===F(e.attributes.name)||"shopify-checkout-api-token"===F(e.attributes.name)))return 1}}}(e,g)&&(k||e.type!==J.Text||e.isStyle||e.textContent.replace(/^\s+|\s+$/gm,"").length)?Y++:P;var M=Object.assign(e,{id:E});if(r.add(t,M),E===P)return null;f&&f(t);let T=!l;if(M.type===J.Element&&(T=T&&!M.needBlock,delete M.needBlock,e=t.shadowRoot)&&N(e)&&(M.isShadowHost=!0),(M.type===J.Document||M.type===J.Element)&&T){g.headWhitespace&&M.type===J.Element&&"head"===M.tagName&&(k=!1);var O={doc:n,mirror:r,blockClass:i,blockSelector:s,needsMask:w,maskTextClass:a,maskTextSelector:o,skipChild:l,inlineStylesheet:u,maskInputOptions:c,maskTextFn:d,maskInputFn:h,slimDOMOptions:g,dataURLOptions:p,inlineImages:m,recordCanvas:_,preserveWhiteSpace:k,onSerialize:f,onIframeLoad:v,iframeLoadTimeout:y,onStylesheetLoad:S,stylesheetLoadTimeout:b,keepIframeSrcFn:C};if(M.type!==J.Element||"textarea"!==M.tagName||void 0===M.attributes.value)for(const R of Array.from(t.childNodes)){var D=ee(R,O);D&&M.childNodes.push(D)}if(t.nodeType===t.ELEMENT_NODE&&t.shadowRoot)for(const L of Array.from(t.shadowRoot.childNodes)){var A=ee(L,O);A&&(N(t.shadowRoot)&&(A.isShadow=!0),M.childNodes.push(A))}}return t.parentNode&&x(t.parentNode)&&N(t.parentNode)&&(M.isShadow=!0),M.type===J.Element&&"iframe"===M.tagName&&function(n,r,i){var s=n.contentWindow;if(s){let e=!1,t;try{t=s.document.readyState}catch(e){return}if("complete"!==t){const a=setTimeout(()=>{e||(r(),e=!0)},i);void n.addEventListener("load",()=>{clearTimeout(a),e=!0,r()})}else{i="about:blank";if(s.location.href!==i||n.src===i||""===n.src)return setTimeout(r,0),n.addEventListener("load",r);n.addEventListener("load",r)}}}(t,()=>{var e=t.contentDocument;e&&v&&(e=ee(e,{doc:e,mirror:r,blockClass:i,blockSelector:s,needsMask:w,maskTextClass:a,maskTextSelector:o,skipChild:!1,inlineStylesheet:u,maskInputOptions:c,maskTextFn:d,maskInputFn:h,slimDOMOptions:g,dataURLOptions:p,inlineImages:m,recordCanvas:_,preserveWhiteSpace:k,onSerialize:f,onIframeLoad:v,iframeLoadTimeout:y,onStylesheetLoad:S,stylesheetLoadTimeout:b,keepIframeSrcFn:C}))&&v(t,e)},y),M.type===J.Element&&"link"===M.tagName&&"string"==typeof M.attributes.rel&&("stylesheet"===M.attributes.rel||"preload"===M.attributes.rel&&"string"==typeof M.attributes.href&&"css"===K(M.attributes.href))&&function(e,t,n){let r=!1,i;try{i=e.sheet}catch(e){return}if(!i){const s=setTimeout(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{clearTimeout(s),r=!0,t()})}}(t,()=>{var e;S&&(e=ee(t,{doc:n,mirror:r,blockClass:i,blockSelector:s,needsMask:w,maskTextClass:a,maskTextSelector:o,skipChild:!1,inlineStylesheet:u,maskInputOptions:c,maskTextFn:d,maskInputFn:h,slimDOMOptions:g,dataURLOptions:p,inlineImages:m,recordCanvas:_,preserveWhiteSpace:k,onSerialize:f,onIframeLoad:v,iframeLoadTimeout:y,onStylesheetLoad:S,stylesheetLoadTimeout:b,keepIframeSrcFn:C}))&&S(t,e)},b),M}function te(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const r="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";var k={map:{},getId(){return console.error(r),-1},getNode(){return console.error(r),null},removeNodeFromMap(){console.error(r)},has(){return console.error(r),!1},reset(){console.error(r)}};function j(i,s,a={}){let o=null,l=0;return function(...e){var t=Date.now(),n=(l||!1!==a.leading||(l=t),s-(t-l));const r=this;n<=0||s<n?(o&&(clearTimeout(o),o=null),l=t,i.apply(r,e)):o||!1===a.trailing||(o=setTimeout(()=>{l=!1===a.leading?0:Date.now(),o=null,i.apply(r,e)},n))}}function U(e,t,n,r,i=window){const s=i.Object.getOwnPropertyDescriptor(e,t);return i.Object.defineProperty(e,t,r?n:{set(e){setTimeout(()=>{n.set.call(this,e)},0),s&&s.set&&s.set.call(this,e)}}),()=>U(e,t,s||{},!0)}function G(e,t,n){try{if(!(t in e))return()=>{};const i=e[t];var r=n(i);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:i}})),e[t]=r,()=>{e[t]=i}}catch{return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&new Proxy(k,{get(e,t,n){return"map"===t&&console.error(r),Reflect.get(e,t,n)}});let ne=Date.now;function ye(e){var t,n=e.document;return{left:n.scrollingElement?n.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:(null==n?void 0:n.documentElement.scrollLeft)||(null==(t=null==(t=null==n?void 0:n.body)?void 0:t.parentElement)?void 0:t.scrollLeft)||(null==(t=null==n?void 0:n.body)?void 0:t.scrollLeft)||0,top:n.scrollingElement?n.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==n?void 0:n.documentElement.scrollTop)||(null==(e=null==(t=null==n?void 0:n.body)?void 0:t.parentElement)?void 0:e.scrollTop)||(null==(t=null==n?void 0:n.body)?void 0:t.scrollTop)||0}}function Se(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function be(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function E(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function B(e,t,n,r){if(e){e=E(e);if(e){try{if("string"==typeof t){if(e.classList.contains(t))return!0;if(r&&null!==e.closest("."+t))return!0}else if(s(e,t,r))return!0}catch(e){}if(n){if(e.matches(n))return!0;if(r&&null!==e.closest(n))return!0}}}return!1}function M(e,t,n){return"TITLE"===e.tagName&&n.headTitleMutations||t.getId(e)===P}function Ce(e){return Boolean(e.changedTouches)}function Ie(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function we(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function ke(e){return Boolean(null==e?void 0:e.shadowRoot)}/[1-9][0-9]{12}/.test(Date.now().toString())||(ne=()=>(new Date).getTime());class T{constructor(){o(this,"id",1),o(this,"styleIDMap",new WeakMap),o(this,"idStyleMap",new Map)}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function O(e){var t;let n=null;return n=(null==(t=null==(t=e.getRootNode)?void 0:t.call(e))?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host?e.getRootNode().host:n}function D(e){var t=e.ownerDocument;return!!t&&(e=function(e){let t=e;for(var n;n=O(t);)t=n;return t}(e),t.contains(e))}function A(e){var t=e.ownerDocument;return t&&(t.contains(e)||D(e))}var re=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))({}),ie=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(ie||{}),d=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(d||{}),h=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(h||{}),g=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))({}),W=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(W||{});function R(e){return"__ln"in e}class L{constructor(){o(this,"length",0),o(this,"head",null),o(this,"tail",null)}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let e=0;e<t;e++)n=(null==n?void 0:n.next)||null;return n}addNode(e){var t,n={value:e,previous:null,next:null};e.__ln=n,e.previousSibling&&R(e.previousSibling)?(t=e.previousSibling.__ln.next,n.next=t,n.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=n,t&&(t.previous=n)):e.nextSibling&&R(e.nextSibling)&&e.nextSibling.__ln.previous?(t=e.nextSibling.__ln.previous,n.previous=t,n.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=n,t&&(t.next=n)):(this.head&&(this.head.previous=n),n.next=this.head,this.head=n),null===n.next&&(this.tail=n),this.length++}removeNode(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}class Ee{constructor(){o(this,"frozen",!1),o(this,"locked",!1),o(this,"texts",[]),o(this,"attributes",[]),o(this,"attributeMap",new WeakMap),o(this,"removes",[]),o(this,"mapRemoves",[]),o(this,"movedMap",{}),o(this,"addedSet",new Set),o(this,"movedSet",new Set),o(this,"droppedSet",new Set),o(this,"mutationCb"),o(this,"blockClass"),o(this,"blockSelector"),o(this,"maskTextClass"),o(this,"maskTextSelector"),o(this,"inlineStylesheet"),o(this,"maskInputOptions"),o(this,"maskTextFn"),o(this,"maskInputFn"),o(this,"keepIframeSrcFn"),o(this,"recordCanvas"),o(this,"inlineImages"),o(this,"slimDOMOptions"),o(this,"dataURLOptions"),o(this,"doc"),o(this,"mirror"),o(this,"iframeManager"),o(this,"stylesheetManager"),o(this,"shadowDomManager"),o(this,"canvasManager"),o(this,"processedNodeManager"),o(this,"unattachedDoc"),o(this,"processMutations",e=>{e.forEach(this.processMutation),this.emit()}),o(this,"emit",()=>{if(!this.frozen&&!this.locked){const l=[],u=new Set,c=new L,d=e=>{let t=e,n=P;for(;n===P;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n};for(var n,r,i=t=>{var e,n,r;if(t.parentNode&&A(t)&&"TEXTAREA"!==t.parentNode.tagName)return e=x(t.parentNode)?this.mirror.getId(O(t)):this.mirror.getId(t.parentNode),n=d(t),-1===e||-1===n?c.addNode(t):void((r=ee(t,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{Ie(e,this.mirror)&&this.iframeManager.addIframe(e),we(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),ke(t)&&this.shadowDomManager.addShadowRoot(t.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}}))&&(l.push({parentId:e,nextId:n,node:r}),u.add(r.id)))};this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const h of this.movedSet)Te(this.removes,h,this.mirror)&&!this.movedSet.has(h.parentNode)||i(h);for(const g of this.addedSet)!Oe(this.droppedSet,g)&&!Te(this.removes,g,this.mirror)||Oe(this.movedSet,g)?i(g):this.droppedSet.add(g);let e=null;for(;c.length;){let t=null;if(!(t=e&&(n=this.mirror.getId(e.value.parentNode),r=d(e.value),-1!==n)&&-1!==r?e:t)){let e=c.tail;for(;e;){var s=e;if(e=e.previous,s){var a=this.mirror.getId(s.value.parentNode),o=d(s.value);if(-1!==o){if(-1!==a){t=s;break}o=s.value;if(o.parentNode&&o.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){a=o.parentNode.host;if(-1!==this.mirror.getId(a)){t=s;break}}}}}}if(!t){for(;c.head;)c.removeNode(c.head.value);break}e=t.previous,c.removeNode(t.value),i(t.value)}var t={texts:this.texts.map(e=>{var t=e.node;return t.parentNode&&"TEXTAREA"===t.parentNode.tagName&&this.genTextAreaValueMutation(t.parentNode),{id:this.mirror.getId(t),value:e.value}}).filter(e=>!u.has(e.id)).filter(e=>this.mirror.has(e.id)),attributes:this.attributes.map(e=>{var t,n,r=e["attributes"];return"string"==typeof r.style&&(t=JSON.stringify(e.styleDiff),n=JSON.stringify(e._unchangedStyles),t.length<r.style.length)&&(t+n).split("var(").length===r.style.split("var(").length&&(r.style=e.styleDiff),{id:this.mirror.getId(e.node),attributes:r}}).filter(e=>!u.has(e.id)).filter(e=>this.mirror.has(e.id)),removes:this.removes,adds:l};(t.texts.length||t.attributes.length||t.removes.length||t.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(t))}}),o(this,"genTextAreaValueMutation",e=>{let t=this.attributeMap.get(e);t||(t={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(t),this.attributeMap.set(e,t)),t.attributes.value=Array.from(e.childNodes,e=>e.textContent||"").join("")}),o(this,"processMutation",r=>{if(!M(r.target,this.mirror,this.slimDOMOptions))switch(r.type){case"characterData":var i=r.target.textContent;B(r.target,this.blockClass,this.blockSelector,!1)||i===r.oldValue||this.texts.push({value:H(r.target,this.maskTextClass,this.maskTextSelector,!0)&&i?this.maskTextFn?this.maskTextFn(i,E(r.target)):i.replace(/[\S]/g,"*"):i,node:r.target});break;case"attributes":{var s=r.target;let e=r.attributeName,t=r.target.getAttribute(e);if("value"===e&&(i=ge(s),t=de({element:s,maskInputOptions:this.maskInputOptions,tagName:s.tagName,type:i,value:t,maskInputFn:this.maskInputFn})),B(r.target,this.blockClass,this.blockSelector,!1)||t===r.oldValue)return;let n=this.attributeMap.get(r.target);if("IFRAME"===s.tagName&&"src"===e&&!this.keepIframeSrcFn(t)){if(s.contentDocument)return;e="rr_src"}if(n||(n={node:r.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(n),this.attributeMap.set(r.target,n)),"type"===e&&"INPUT"===s.tagName&&"password"===(r.oldValue||"").toLowerCase()&&s.setAttribute("data-rr-is-password","true"),!fe(s.tagName,e)&&(n.attributes[e]=_e(this.doc,Z(s.tagName),Z(e),t),"style"===e)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}var a=this.unattachedDoc.createElement("span");r.oldValue&&a.setAttribute("style",r.oldValue);for(const u of Array.from(s.style)){var o=s.style.getPropertyValue(u),l=s.style.getPropertyPriority(u);o!==a.style.getPropertyValue(u)||l!==a.style.getPropertyPriority(u)?n.styleDiff[u]=""===l?o:[o,l]:n._unchangedStyles[u]=[o,l]}for(const c of Array.from(a.style))""===s.style.getPropertyValue(c)&&(n.styleDiff[c]=!1)}break}case"childList":B(r.target,this.blockClass,this.blockSelector,!0)||("TEXTAREA"!==r.target.tagName?(r.addedNodes.forEach(e=>this.genAdds(e,r.target)),r.removedNodes.forEach(e=>{var t=this.mirror.getId(e),n=x(r.target)?this.mirror.getId(r.target.host):this.mirror.getId(r.target);B(r.target,this.blockClass,this.blockSelector,!1)||M(e,this.mirror,this.slimDOMOptions)||-1===this.mirror.getId(e)||(this.addedSet.has(e)?(Me(this.addedSet,e),this.droppedSet.add(e)):this.addedSet.has(r.target)&&-1===t||function e(t,n){var r;return!x(t)&&(r=n.getId(t),!n.has(r)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||e(t.parentNode,n)))}(r.target,this.mirror)||(this.movedSet.has(e)&&this.movedMap[t+"@"+n]?Me(this.movedSet,e):this.removes.push({parentId:n,id:t,isShadow:!(!x(r.target)||!N(r.target))||void 0})),this.mapRemoves.push(e))})):this.genTextAreaValueMutation(r.target))}}),o(this,"genAdds",(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!this.addedSet.has(t)&&!this.movedSet.has(t)){if(this.mirror.hasNode(t)){if(M(t,this.mirror,this.slimDOMOptions))return;this.movedSet.add(t);let e=null;(e=n&&this.mirror.hasNode(n)?this.mirror.getId(n):e)&&-1!==e&&(this.movedMap[this.mirror.getId(t)+"@"+e]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);B(t,this.blockClass,this.blockSelector,!1)||(t.childNodes.forEach(e=>this.genAdds(e)),ke(t)&&t.shadowRoot.childNodes.forEach(e=>{this.processedNodeManager.add(e,this),this.genAdds(e,t)}))}})}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(e=>{this[e]=t[e]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Me(t,e){t.delete(e),e.childNodes.forEach(e=>Me(t,e))}function Te(t,n,r){if(0!==t.length){var i=t;t=n;var s=r;let e=t.parentNode;for(;e;){const a=s.getId(e);if(i.some(e=>e.id===a))return 1;e=e.parentNode}}}function Oe(e,t){return 0!==e.size&&function e(t,n){const r=n["parentNode"];if(!r)return!1;if(t.has(r))return!0;return e(t,r)}(e,t)}let se;const ae=t=>{return se?(...e)=>{try{return t(...e)}catch(e){if(!se||!0!==se(e))throw e}}:t},oe=[];function V(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function De(e,t){var n=new Ee;oe.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;var i=null==(i=null==(e=null==window?void 0:window.Zone)?void 0:e.__symbol__)?void 0:i.call(e,"MutationObserver"),e=new(r=i&&window[i]?window[i]:r)(ae(n.processMutations.bind(n)));return e.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),e}function Ae({mouseInteractionCb:a,doc:r,mirror:o,blockClass:l,blockSelector:u,sampling:e}){if(!1===e.mouseInteraction)return()=>{};const t=!0===e.mouseInteraction||void 0===e.mouseInteraction?{}:e.mouseInteraction,i=[];let c=null;return Object.keys(d).filter(e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==t[e]).forEach(e=>{let t=Z(e);s=e;var s,n=n=>{var r=V(n);if(!B(r,l,u,!0)){let e=null,t=s;if("pointerType"in n){switch(n.pointerType){case"mouse":e=h.Mouse;break;case"touch":e=h.Touch;break;case"pen":e=h.Pen}e===h.Touch?d[s]===d.MouseDown?t="TouchStart":d[s]===d.MouseUp&&(t="TouchEnd"):(e,h.Pen)}else Ce(n)&&(e=h.Touch);null!==e?(c=e,(t.startsWith("Touch")&&e===h.Touch||t.startsWith("Mouse")&&e===h.Mouse)&&(e=null)):d[s]===d.Click&&(e=c,c=null);var i,n=Ce(n)?n.changedTouches[0]:n;n&&(r=o.getId(r),{clientX:n,clientY:i}=n,ae(a)({type:d[t],id:r,x:n,y:i,...null!==e&&{pointerType:e}}))}};if(window.PointerEvent)switch(d[e]){case d.MouseDown:case d.MouseUp:t=t.replace("mouse","pointer");break;case d.TouchStart:case d.TouchEnd:return}i.push(te(t,n,r))}),ae(()=>{i.forEach(e=>e())})}function Re({scrollCb:r,doc:i,mirror:s,blockClass:a,blockSelector:o,sampling:e}){return te("scroll",ae(j(ae(e=>{var t,n,e=V(e);e&&!B(e,a,o,!0)&&(t=s.getId(e),e===i&&i.defaultView?(n=ye(i.defaultView),r({id:t,x:n.left,y:n.top})):r({id:t,x:e.scrollLeft,y:e.scrollTop}))}),e.scroll||100)),i)}const Le=["INPUT","TEXTAREA","SELECT"],xe=new WeakMap;function Ne(e){var t,n;return e=e,t=[],je("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||je("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||je("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||je("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule?(n=Array.from(e.parentRule.cssRules).indexOf(e),t.unshift(n)):e.parentStyleSheet&&(n=Array.from(e.parentStyleSheet.cssRules).indexOf(e),t.unshift(n)),t}function z(e,t,n){let r,i;return e?(e.ownerNode?r=t.getId(e.ownerNode):i=n.getId(e),{styleId:i,id:r}):{}}function Pe({mirror:e,stylesheetManager:n},t){let r=null;r="#document"===t.nodeName?e.getId(t):e.getId(t.host);e="#document"===t.nodeName?null==(e=t.defaultView)?void 0:e.Document:null==(e=null==(e=t.ownerDocument)?void 0:e.defaultView)?void 0:e.ShadowRoot;const i=null!=e&&e.prototype?Object.getOwnPropertyDescriptor(null==e?void 0:e.prototype,"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&e&&i?(Object.defineProperty(t,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){var e;return null==(e=i.get)?void 0:e.call(this)},set(e){var t=null==(t=i.set)?void 0:t.call(this,e);if(null!==r&&-1!==r)try{n.adoptStyleSheets(e,r)}catch(e){}return t}}),ae(()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})})):()=>{}}function Fe(e,t={}){var i,n=e.doc.defaultView;if(!n)return()=>{};{var r=e,s=t;const{mutationCb:S,mousemoveCb:b,mouseInteractionCb:C,scrollCb:I,viewportResizeCb:w,inputCb:k,mediaInteractionCb:E,styleSheetRuleCb:M,styleDeclarationCb:T,canvasMutationCb:O,fontCb:D,selectionCb:A,customElementCb:R}=r;r.mutationCb=(...e)=>{s.mutation&&s.mutation(...e),S(...e)},r.mousemoveCb=(...e)=>{s.mousemove&&s.mousemove(...e),b(...e)},r.mouseInteractionCb=(...e)=>{s.mouseInteraction&&s.mouseInteraction(...e),C(...e)},r.scrollCb=(...e)=>{s.scroll&&s.scroll(...e),I(...e)},r.viewportResizeCb=(...e)=>{s.viewportResize&&s.viewportResize(...e),w(...e)},r.inputCb=(...e)=>{s.input&&s.input(...e),k(...e)},r.mediaInteractionCb=(...e)=>{s.mediaInteaction&&s.mediaInteaction(...e),E(...e)},r.styleSheetRuleCb=(...e)=>{s.styleSheetRule&&s.styleSheetRule(...e),M(...e)},r.styleDeclarationCb=(...e)=>{s.styleDeclaration&&s.styleDeclaration(...e),T(...e)},r.canvasMutationCb=(...e)=>{s.canvasMutation&&s.canvasMutation(...e),O(...e)},r.fontCb=(...e)=>{s.font&&s.font(...e),D(...e)},r.selectionCb=(...e)=>{s.selection&&s.selection(...e),A(...e)},r.customElementCb=(...e)=>{s.customElement&&s.customElement(...e),R(...e)}}let a;e.recordDOM&&(a=De(e,e.doc));const o=function({mousemoveCb:n,sampling:e,doc:t,mirror:i}){if(!1===e.mousemove)return()=>{};var r="number"==typeof e.mousemove?e.mousemove:50,e="number"==typeof e.mousemoveCallback?e.mousemoveCallback:500;let s=[],a;const o=j(ae(e=>{const t=Date.now()-a;n(s.map(e=>(e.timeOffset-=t,e)),e),s=[],a=null}),e),l=[te("mousemove",e=ae(j(ae(e=>{var t=V(e),{clientX:n,clientY:r}=Ce(e)?e.changedTouches[0]:e;a=a||ne(),s.push({x:n,y:r,id:i.getId(t),timeOffset:ne()-a}),o("undefined"!=typeof DragEvent&&e instanceof DragEvent?ie.Drag:e instanceof MouseEvent?ie.MouseMove:ie.TouchMove)}),r,{trailing:!1})),t),te("touchmove",e,t),te("drag",e,t)];return ae(()=>{l.forEach(e=>e())})}(e),l=Ae(e),u=Re(e),c=function({viewportResizeCb:n},{win:e}){let r=-1,i=-1;return te("resize",ae(j(ae(()=>{var e=Se(),t=be();r===e&&i===t||(n({width:Number(t),height:Number(e)}),r=e,i=t)}),200)),e)}(e,{win:n}),d=function({inputCb:r,doc:a,mirror:i,blockClass:e,blockSelector:n,ignoreClass:o,ignoreSelector:l,maskInputOptions:u,maskInputFn:c,sampling:t,userTriggeredOnInput:d}){function s(t){let r=V(t);var t=t.isTrusted,i=r&&r.tagName;if((r=r&&"OPTION"===i?r.parentElement:r)&&i&&!(Le.indexOf(i)<0)&&!B(r,e,n,!0)&&!(r.classList.contains(o)||l&&r.matches(l))){let e=r.value,n=!1;var s=ge(r)||"",i=("radio"===s||"checkbox"===s?n=r.checked:(u[i.toLowerCase()]||u[s])&&(e=de({element:r,maskInputOptions:u,tagName:i,type:s,value:e,maskInputFn:c})),h(r,d?{text:e,isChecked:n,userTriggered:t}:{text:e,isChecked:n}),r.name);"radio"===s&&i&&n&&a.querySelectorAll(`input[type="radio"][name="${i}"]`).forEach(e=>{var t;e!==r&&(t=e.value,h(e,d?{text:t,isChecked:!n,userTriggered:!1}:{text:t,isChecked:!n}))})}}function h(e,t){var n=xe.get(e);n&&n.text===t.text&&n.isChecked===t.isChecked||(xe.set(e,t),n=i.getId(e),ae(r)({...t,id:n}))}var g;const p=("last"===t.input?["change"]:["input","change"]).map(e=>te(e,ae(s),a)),m=a.defaultView;return m?(t=m.Object.getOwnPropertyDescriptor(m.HTMLInputElement.prototype,"value"),g=[[m.HTMLInputElement.prototype,"value"],[m.HTMLInputElement.prototype,"checked"],[m.HTMLSelectElement.prototype,"value"],[m.HTMLTextAreaElement.prototype,"value"],[m.HTMLSelectElement.prototype,"selectedIndex"],[m.HTMLOptionElement.prototype,"selected"]],t&&t.set&&p.push(...g.map(e=>U(e[0],e[1],{set(){ae(s)({target:this,isTrusted:!1})}},!1,m))),ae(()=>{p.forEach(e=>e())})):()=>{p.forEach(e=>e())}}(e),h=function({mediaInteractionCb:o,blockClass:l,blockSelector:u,mirror:c,sampling:e,doc:t}){var n=ae(a=>j(ae(e=>{var t,n,r,i,s,e=V(e);e&&!B(e,l,u,!0)&&({currentTime:t,volume:n,muted:r,playbackRate:i,loop:s}=e,o({type:a,id:c.getId(e),currentTime:t,volume:n,muted:r,playbackRate:i,loop:s}))}),e.media||500));const r=[te("play",n(W.Play),t),te("pause",n(W.Pause),t),te("seeked",n(W.Seeked),t),te("volumechange",n(W.VolumeChange),t),te("ratechange",n(W.RateChange),t)];return ae(()=>{r.forEach(e=>e())})}(e);let g=()=>{},p=()=>{},m=()=>{},_=()=>{};e.recordDOM&&(g=function({styleSheetRuleCb:o,mirror:l,stylesheetManager:u},{win:e}){if(!e.CSSStyleSheet||!e.CSSStyleSheet.prototype)return()=>{};const t=e.CSSStyleSheet.prototype.insertRule,n=(e.CSSStyleSheet.prototype.insertRule=new Proxy(t,{apply:ae((e,t,n)=>{var[r,i]=n,{id:s,styleId:a}=z(t,l,u.styleMirror);return(s&&-1!==s||a&&-1!==a)&&o({id:s,styleId:a,adds:[{rule:r,index:i}]}),e.apply(t,n)})}),e.CSSStyleSheet.prototype.deleteRule);e.CSSStyleSheet.prototype.deleteRule=new Proxy(n,{apply:ae((e,t,n)=>{var[r]=n,{id:i,styleId:s}=z(t,l,u.styleMirror);return(i&&-1!==i||s&&-1!==s)&&o({id:i,styleId:s,removes:[{index:r}]}),e.apply(t,n)})});let r;e.CSSStyleSheet.prototype.replace&&(r=e.CSSStyleSheet.prototype.replace,e.CSSStyleSheet.prototype.replace=new Proxy(r,{apply:ae((e,t,n)=>{var[r]=n,{id:i,styleId:s}=z(t,l,u.styleMirror);return(i&&-1!==i||s&&-1!==s)&&o({id:i,styleId:s,replace:r}),e.apply(t,n)})}));let i;e.CSSStyleSheet.prototype.replaceSync&&(i=e.CSSStyleSheet.prototype.replaceSync,e.CSSStyleSheet.prototype.replaceSync=new Proxy(i,{apply:ae((e,t,n)=>{var[r]=n,{id:i,styleId:s}=z(t,l,u.styleMirror);return(i&&-1!==i||s&&-1!==s)&&o({id:i,styleId:s,replaceSync:r}),e.apply(t,n)})}));const s={},a=(Ue("CSSGroupingRule")?s.CSSGroupingRule=e.CSSGroupingRule:(Ue("CSSMediaRule")&&(s.CSSMediaRule=e.CSSMediaRule),Ue("CSSConditionRule")&&(s.CSSConditionRule=e.CSSConditionRule),Ue("CSSSupportsRule")&&(s.CSSSupportsRule=e.CSSSupportsRule)),{});return Object.entries(s).forEach(([e,t])=>{a[e]={insertRule:t.prototype.insertRule,deleteRule:t.prototype.deleteRule},t.prototype.insertRule=new Proxy(a[e].insertRule,{apply:ae((e,t,n)=>{var[r,i]=n,{id:s,styleId:a}=z(t.parentStyleSheet,l,u.styleMirror);return(s&&-1!==s||a&&-1!==a)&&o({id:s,styleId:a,adds:[{rule:r,index:[...Ne(t),i||0]}]}),e.apply(t,n)})}),t.prototype.deleteRule=new Proxy(a[e].deleteRule,{apply:ae((e,t,n)=>{var[r]=n,{id:i,styleId:s}=z(t.parentStyleSheet,l,u.styleMirror);return(i&&-1!==i||s&&-1!==s)&&o({id:i,styleId:s,removes:[{index:[...Ne(t),r]}]}),e.apply(t,n)})})}),ae(()=>{e.CSSStyleSheet.prototype.insertRule=t,e.CSSStyleSheet.prototype.deleteRule=n,r&&(e.CSSStyleSheet.prototype.replace=r),i&&(e.CSSStyleSheet.prototype.replaceSync=i),Object.entries(s).forEach(([e,t])=>{t.prototype.insertRule=a[e].insertRule,t.prototype.deleteRule=a[e].deleteRule})})}(e,{win:n}),p=Pe(e,e.doc),m=function({styleDeclarationCb:l,mirror:u,ignoreCSSAttributes:c,stylesheetManager:d},{win:e}){const h=e.CSSStyleDeclaration.prototype.setProperty,a=(e.CSSStyleDeclaration.prototype.setProperty=new Proxy(h,{apply:ae((e,t,n)=>{var r,i,[s,a,o]=n;return c.has(s)?h.apply(t,[s,a,o]):({id:r,styleId:i}=z(null==(r=t.parentRule)?void 0:r.parentStyleSheet,u,d.styleMirror),(r&&-1!==r||i&&-1!==i)&&l({id:r,styleId:i,set:{property:s,value:a,priority:o},index:Ne(t.parentRule)}),e.apply(t,n))})}),e.CSSStyleDeclaration.prototype.removeProperty);return e.CSSStyleDeclaration.prototype.removeProperty=new Proxy(a,{apply:ae((e,t,n)=>{var r,i,[s]=n;return c.has(s)?a.apply(t,[s]):({id:r,styleId:i}=z(null==(r=t.parentRule)?void 0:r.parentStyleSheet,u,d.styleMirror),(r&&-1!==r||i&&-1!==i)&&l({id:r,styleId:i,remove:{property:s},index:Ne(t.parentRule)}),e.apply(t,n))})}),ae(()=>{e.CSSStyleDeclaration.prototype.setProperty=h,e.CSSStyleDeclaration.prototype.removeProperty=a})}(e,{win:n}),e.collectFonts)&&(_=function({fontCb:n,doc:e}){const t=e.defaultView;if(!t)return()=>{};const r=[],i=new WeakMap,s=t.FontFace;return t.FontFace=function(e,t,n){var r=new s(e,t,n);return i.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r},e=G(e.fonts,"add",function(e){return function(t){return setTimeout(ae(()=>{var e=i.get(t);e&&(n(e),i.delete(t))}),0),e.apply(this,[t])}}),r.push(()=>{t.FontFace=s}),r.push(e),ae(()=>{r.forEach(e=>e())})}(e));const f=function(e){const{doc:l,mirror:u,blockClass:c,blockSelector:d,selectionCb:h}=e;let g=!0;return(e=ae(()=>{var t=l.getSelection();if(!(!t||g&&null!=t&&t.isCollapsed)){g=t.isCollapsed||!1;var n=[],r=t.rangeCount||0;for(let e=0;e<r;e++){var{startContainer:i,startOffset:s,endContainer:a,endOffset:o}=t.getRangeAt(e);B(i,c,d,!0)||B(a,c,d,!0)||n.push({start:u.getId(i),startOffset:s,end:u.getId(a),endOffset:o})}h({ranges:n})}}))(),te("selectionchange",e)}(e),v=({doc:t,customElementCb:i}=[e][0],(t=t.defaultView)&&t.customElements?G(t.customElements,"define",function(r){return function(t,e,n){try{i({define:{name:t}})}catch(e){console.warn("Custom element callback failed for "+t)}return r.apply(this,[t,e,n])}}):()=>{}),y=[];for(const L of e.plugins)y.push(L.observer(L.callback,n,L.options));return ae(()=>{oe.forEach(e=>e.reset()),null!=a&&a.disconnect(),o(),l(),u(),c(),d(),h(),g(),p(),m(),_(),f(),v(),y.forEach(e=>e())})}function je(e){return void 0!==window[e]}function Ue(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Ge{constructor(e){o(this,"iframeIdToRemoteIdMap",new WeakMap),o(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e}getId(e,t,n,r){n=n||this.getIdToRemoteIdMap(e),r=r||this.getRemoteIdToIdMap(e);let i=n.get(t);return i||(i=this.generateIdFn(),n.set(t,i),r.set(i,t)),i}getIds(t,e){const n=this.getIdToRemoteIdMap(t),r=this.getRemoteIdToIdMap(t);return e.map(e=>this.getId(t,e,n,r))}getRemoteId(e,t,n){n=n||this.getRemoteIdToIdMap(e);return"number"!=typeof t?t:n.get(t)||-1}getRemoteIds(t,e){const n=this.getRemoteIdToIdMap(t);return e.map(e=>this.getRemoteId(t,e,n))}reset(e){e?(this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)):(this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class Be{constructor(e){o(this,"iframes",new WeakMap),o(this,"crossOriginIframeMap",new WeakMap),o(this,"crossOriginIframeMirror",new Ge(_)),o(this,"crossOriginIframeStyleMirror"),o(this,"crossOriginIframeRootIdMap",new WeakMap),o(this,"mirror"),o(this,"mutationCb"),o(this,"wrappedEmit"),o(this,"loadListener"),o(this,"stylesheetManager"),o(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Ge(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&null!=(t=e.contentWindow)&&t.addEventListener("message",this.handleMessage.bind(this)),null!=(t=this.loadListener)&&t.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&0<e.contentDocument.adoptedStyleSheets.length&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){var t=e;"rrweb"===t.data.type&&t.origin===t.data.origin&&e.source&&(e=(e=this.crossOriginIframeMap.get(e.source))&&this.transformCrossOriginEvent(e,t.data.event))&&this.wrappedEmit(e,t.data.isCheckout)}transformCrossOriginEvent(n,e){var t;switch(e.type){case re.FullSnapshot:this.crossOriginIframeMirror.reset(n),this.crossOriginIframeStyleMirror.reset(n),this.replaceIdOnNode(e.data.node,n);var r=e.data.node.id;return this.crossOriginIframeRootIdMap.set(n,r),this.patchRootIdOnNode(e.data.node,r),{timestamp:e.timestamp,type:re.IncrementalSnapshot,data:{source:ie.Mutation,adds:[{parentId:this.mirror.getId(n),nextId:null,node:e.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case re.Meta:case re.Load:case re.DomContentLoaded:return!1;case re.Plugin:return e;case re.Custom:return this.replaceIds(e.data.payload,n,["id","parentId","previousId","nextId"]),e;case re.IncrementalSnapshot:switch(e.data.source){case ie.Mutation:return e.data.adds.forEach(e=>{this.replaceIds(e,n,["parentId","nextId","previousId"]),this.replaceIdOnNode(e.node,n);var t=this.crossOriginIframeRootIdMap.get(n);t&&this.patchRootIdOnNode(e.node,t)}),e.data.removes.forEach(e=>{this.replaceIds(e,n,["parentId","id"])}),e.data.attributes.forEach(e=>{this.replaceIds(e,n,["id"])}),e.data.texts.forEach(e=>{this.replaceIds(e,n,["id"])}),e;case ie.Drag:case ie.TouchMove:case ie.MouseMove:return e.data.positions.forEach(e=>{this.replaceIds(e,n,["id"])}),e;case ie.ViewportResize:return!1;case ie.MediaInteraction:case ie.MouseInteraction:case ie.Scroll:case ie.CanvasMutation:case ie.Input:return this.replaceIds(e.data,n,["id"]),e;case ie.StyleSheetRule:case ie.StyleDeclaration:return this.replaceIds(e.data,n,["id"]),this.replaceStyleIds(e.data,n,["styleId"]),e;case ie.Font:return e;case ie.Selection:return e.data.ranges.forEach(e=>{this.replaceIds(e,n,["start","end"])}),e;case ie.AdoptedStyleSheet:return this.replaceIds(e.data,n,["id"]),this.replaceStyleIds(e.data,n,["styleIds"]),null!=(t=e.data.styles)&&t.forEach(e=>{this.replaceStyleIds(e,n,["styleId"])}),e}}return!1}replace(e,t,n,r){for(const i of r)!Array.isArray(t[i])&&"number"!=typeof t[i]||(Array.isArray(t[i])?t[i]=e.getIds(n,t[i]):t[i]=e.getId(n,t[i]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(e=>{this.replaceIdOnNode(e,t)})}patchRootIdOnNode(e,t){e.type===J.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(e=>{this.patchRootIdOnNode(e,t)})}}class We{constructor(e){o(this,"shadowDoms",new WeakSet),o(this,"mutationCb"),o(this,"scrollCb"),o(this,"bypassOptions"),o(this,"mirror"),o(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(N(e)&&!this.shadowDoms.has(e)){this.shadowDoms.add(e);const n=De({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(Re({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout(()=>{e.adoptedStyleSheets&&0<e.adoptedStyleSheets.length&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Pe({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,n){const r=this;this.restoreHandlers.push(G(e.prototype,"attachShadow",function(t){return function(e){e=t.call(this,e);return this.shadowRoot&&A(this)&&r.addShadowRoot(this.shadowRoot,n),e}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch(e){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ve="undefined"==typeof Uint8Array?[]:new Uint8Array(256),ze=0;ze<a.length;ze++)Ve[a.charCodeAt(ze)]=ze;function Ke(e){for(var t=new Uint8Array(e),n=t.length,r="",i=0;i<n;i+=3)r=(r=(r=(r+=a[t[i]>>2])+a[(3&t[i])<<4|t[i+1]>>4])+a[(15&t[i+1])<<2|t[i+2]>>6])+a[63&t[i+2]];return n%3==2?r=r.substring(0,r.length-1)+"=":n%3==1&&(r=r.substring(0,r.length-2)+"=="),r}const Ye=new Map;const He=(t,n,r)=>{if(t&&(qe(t,n)||"object"==typeof t)){n=function(e,t){let n=Ye.get(e);return n||(n=new Map,Ye.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(r,t.constructor.name);let e=n.indexOf(t);return-1===e&&(e=n.length,n.push(t)),e}};const Je=(e,t,n)=>e.map(e=>function t(e,n,r){var i;return e instanceof Array?e.map(e=>t(e,n,r)):null===e?e:e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray?{rr_type:e.constructor.name,args:[Object.values(e)]}:e instanceof ArrayBuffer?{rr_type:e.constructor.name,base64:Ke(e)}:e instanceof DataView?{rr_type:e.constructor.name,args:[t(e.buffer,n,r),e.byteOffset,e.byteLength]}:e instanceof HTMLImageElement?(i=e.src,{rr_type:e.constructor.name,src:i}):e instanceof HTMLCanvasElement?{rr_type:"HTMLImageElement",src:e.toDataURL()}:e instanceof ImageData?{rr_type:e.constructor.name,args:[t(e.data,n,r),e.width,e.height]}:qe(e,n)||"object"==typeof e?{rr_type:e.constructor.name,index:He(e,n,r)}:e}(e,t,n)),qe=(t,n)=>{var e=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(e=>"function"==typeof n[e]);return Boolean(e.find(e=>t instanceof n[e]))};function Ze(e,i,s,a){const t=[];try{var n=G(e.HTMLCanvasElement.prototype,"getContext",function(r){return function(e,...t){var n;return B(this,i,s,!0)||(n="experimental-webgl"===(n=e)?"webgl":n,"__context"in this||(this.__context=n),a&&["webgl","webgl2"].includes(n)&&(t[0]&&"object"==typeof t[0]?(n=t[0]).preserveDrawingBuffer||(n.preserveDrawingBuffer=!0):t.splice(0,1,{preserveDrawingBuffer:!0}))),r.apply(this,[e,...t])}});t.push(n)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{t.forEach(e=>e())}}function Xe(e,r,i,s,a,t,o){var n,l=[];for(const c of Object.getOwnPropertyNames(e))if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(c))try{"function"==typeof e[c]&&(n=G(e,c,function(n){return function(...e){var t=n.apply(this,e);return He(t,o,this),"tagName"in this.canvas&&!B(this.canvas,s,a,!0)&&(e=Je(e,o,this),e={type:r,property:c,args:e},i(this.canvas,e)),t}}),l.push(n))}catch{var u=U(e,c,{set(e){i(this.canvas,{type:r,property:c,args:[e],setter:!0})}});l.push(u)}return l}const $e="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpCiAgICAgICAgcmV0dXJuIHRyYW5zcGFyZW50QmxvYk1hcC5nZXQoaWQpOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIHRyYW5zcGFyZW50QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICAgIHJldHVybiBiYXNlNjQ7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gIiI7CiAgICB9CiAgfQogIGNvbnN0IHdvcmtlciA9IHNlbGY7CiAgd29ya2VyLm9ubWVzc2FnZSA9IGFzeW5jIGZ1bmN0aW9uKGUpIHsKICAgIGlmICgiT2Zmc2NyZWVuQ2FudmFzIiBpbiBnbG9iYWxUaGlzKSB7CiAgICAgIGNvbnN0IHsgaWQsIGJpdG1hcCwgd2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMgfSA9IGUuZGF0YTsKICAgICAgY29uc3QgdHJhbnNwYXJlbnRCYXNlNjQgPSBnZXRUcmFuc3BhcmVudEJsb2JGb3IoCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0LAogICAgICAgIGRhdGFVUkxPcHRpb25zCiAgICAgICk7CiAgICAgIGNvbnN0IG9mZnNjcmVlbiA9IG5ldyBPZmZzY3JlZW5DYW52YXMod2lkdGgsIGhlaWdodCk7CiAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCIyZCIpOwogICAgICBjdHguZHJhd0ltYWdlKGJpdG1hcCwgMCwgMCk7CiAgICAgIGJpdG1hcC5jbG9zZSgpOwogICAgICBjb25zdCBibG9iID0gYXdhaXQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOwogICAgICBjb25zdCB0eXBlID0gYmxvYi50eXBlOwogICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKTsKICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsKICAgICAgaWYgKCFsYXN0QmxvYk1hcC5oYXMoaWQpICYmIGF3YWl0IHRyYW5zcGFyZW50QmFzZTY0ID09PSBiYXNlNjQpIHsKICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOwogICAgICB9CiAgICAgIGlmIChsYXN0QmxvYk1hcC5nZXQoaWQpID09PSBiYXNlNjQpCiAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOwogICAgICB3b3JrZXIucG9zdE1lc3NhZ2UoewogICAgICAgIGlkLAogICAgICAgIHR5cGUsCiAgICAgICAgYmFzZTY0LAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodAogICAgICB9KTsKICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkOiBlLmRhdGEuaWQgfSk7CiAgICB9CiAgfTsKfSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW1hZ2UtYml0bWFwLWRhdGEtdXJsLXdvcmtlci1CWjFyN1JKRC5qcy5tYXAK";var Qe;const et="undefined"!=typeof window&&window.Blob&&new Blob([(k=$e,Uint8Array.from(atob(k),e=>e.charCodeAt(0)))],{type:"text/javascript;charset=utf-8"});function tt(t){let e;try{var n;if(e=et&&(window.URL||window.webkitURL).createObjectURL(et))return(n=new Worker(e,{name:null==t?void 0:t.name})).addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(e)}),n;throw""}catch(e){return new Worker("data:text/javascript;base64,"+$e,{name:null==t?void 0:t.name})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}class nt{constructor(e){o(this,"pendingCanvasMutations",new Map),o(this,"rafStamps",{latestId:0,invokeId:null}),o(this,"mirror"),o(this,"mutationCb"),o(this,"resetObservers"),o(this,"frozen",!1),o(this,"locked",!1),o(this,"processMutation",(e,t)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)});var{sampling:t="all",win:n,blockClass:r,blockSelector:i,recordCanvas:s,dataURLOptions:a}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,s&&"all"===t&&this.initCanvasMutationObserver(n,r,i),s&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,i,{dataURLOptions:a})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,n,r,i,s){const t=Ze(n,r,i,!0),a=new Map,o=new tt,l=(o.onmessage=e=>{var t,n,r,i=e.data["id"];a.set(i,!1),"base64"in e.data&&({base64:e,type:t,width:n,height:r}=e.data,this.mutationCb({id:i,type:g["2D"],commands:[{property:"clearRect",args:[0,0,n,r]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:e}],type:t}]},0,0]}]}))},1e3/e);let u=0,c;const d=()=>{const t=[];return n.document.querySelectorAll("canvas").forEach(e=>{B(e,r,i,!0)||t.push(e)}),t},h=e=>{c=(u&&e-u<l||(u=e,d().forEach(async e=>{var t,n,r=this.mirror.getId(e);a.get(r)||0!==e.width&&0!==e.height&&(a.set(r,!0),["webgl","webgl2"].includes(e.__context)&&!1===(null==(n=null==(t=e.getContext(e.__context))?void 0:t.getContextAttributes())?void 0:n.preserveDrawingBuffer)&&t.clear(t.COLOR_BUFFER_BIT),n=await createImageBitmap(e),o.postMessage({id:r,bitmap:n,width:e.width,height:e.height,dataURLOptions:s.dataURLOptions},[n]))})),requestAnimationFrame(h))};c=requestAnimationFrame(h),this.resetObservers=()=>{t(),cancelAnimationFrame(c)}}initCanvasMutationObserver(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const r=Ze(e,t,n,!1),i=function(n,r,i,s){const e=[];var t;for(const o of Object.getOwnPropertyNames(r.CanvasRenderingContext2D.prototype))try{"function"==typeof r.CanvasRenderingContext2D.prototype[o]&&(t=G(r.CanvasRenderingContext2D.prototype,o,function(e){return function(...t){return B(this.canvas,i,s,!0)||setTimeout(()=>{var e=Je(t,r,this);n(this.canvas,{type:g["2D"],property:o,args:e})},0),e.apply(this,t)}}),e.push(t))}catch{var a=U(r.CanvasRenderingContext2D.prototype,o,{set(e){n(this.canvas,{type:g["2D"],property:o,args:[e],setter:!0})}});e.push(a)}return()=>{e.forEach(e=>e())}}(this.processMutation.bind(this),e,t,n),s=function(e,t,n,r){const i=[];return i.push(...Xe(t.WebGLRenderingContext.prototype,g.WebGL,e,n,r,0,t)),void 0!==t.WebGL2RenderingContext&&i.push(...Xe(t.WebGL2RenderingContext.prototype,g.WebGL2,e,n,r,0,t)),()=>{i.forEach(e=>e())}}(this.processMutation.bind(this),e,t,n,this.mirror);this.resetObservers=()=>{r(),i(),s()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=e=>{this.rafStamps.latestId=e,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,t)=>{var n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,t){var n,r;this.frozen||this.locked||(r=this.pendingCanvasMutations.get(e))&&-1!==t&&(n=r.map(e=>{const{type:t,...n}=e;return n}),r=r[0]["type"],this.mutationCb({id:t,type:r,commands:n}),this.pendingCanvasMutations.delete(e))}}class rt{constructor(e){o(this,"trackedLinkElements",new WeakSet),o(this,"mutationCb"),o(this,"adoptedStyleSheetCb"),o(this,"styleMirror",new T),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0!==e.length){var n={id:t,styleIds:[]},r=[];for(const i of e){let e;this.styleMirror.has(i)?e=this.styleMirror.getId(i):(e=this.styleMirror.add(i),r.push({styleId:e,rules:Array.from(i.rules||CSSRule,(e,t)=>({rule:m(e),index:t}))})),n.styleIds.push(e)}0<r.length&&(n.styles=r),this.adoptedStyleSheetCb(n)}}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class it{constructor(){o(this,"nodeMap",new WeakMap),o(this,"active",!1)}inOtherBuffer(e,t){e=this.nodeMap.get(e);return e&&Array.from(e).some(e=>e!==t)}add(e,t){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let le,st,at,ot=!1;try{2!==Array.from([1],e=>2*e)[0]&&(Qe=document.createElement("iframe"),document.body.appendChild(Qe),Array.from=(null==(i=Qe.contentWindow)?void 0:i.Array.from)||Array.from,document.body.removeChild(Qe))}catch(e){console.debug("Unable to override Array.from",e)}const ue=new ce;function e(e={}){const{emit:r,checkoutEveryNms:i,checkoutEveryNth:s,blockClass:n="rr-block",blockSelector:a=null,ignoreClass:P="rr-ignore",ignoreSelector:F=null,maskTextClass:o="rr-mask",maskTextSelector:l=null,inlineStylesheet:u=!0,maskAllInputs:j,maskInputOptions:t,slimDOMOptions:c,maskInputFn:d,maskTextFn:h,hooks:U,packFn:g,sampling:p={},dataURLOptions:m={},mousemoveWait:_,recordDOM:f=!0,recordCanvas:v=!1,recordCrossOriginIframes:G=!1,recordAfter:B="DOMContentLoaded"===e.recordAfter?e.recordAfter:"load",userTriggeredOnInput:W=!1,collectFonts:V=!1,inlineImages:y=!1,plugins:S,keepIframeSrcFn:b=()=>!1,ignoreCSSAttributes:z=new Set([]),errorHandler:K}=e;e=K,se=e;const C=!G||window.parent===window;let I=!1;if(!C)try{window.parent.document&&(I=!1)}catch(e){I=!0}if(C&&!r)throw new Error("emit function is required");if(!C&&!I)return()=>{};void 0!==_&&void 0===p.mousemove&&(p.mousemove=_),ue.reset();const w=!0===j?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==t?t:{password:!0},k=!0===c||"all"===c?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===c,headMetaDescKeywords:"all"===c,headTitleMutations:"all"===c}:c||{};!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let Y,E=0;const H=e=>{for(const t of S||[])t.eventProcessor&&(e=t.eventProcessor(e));return e=g&&!I?g(e):e},M=(le=(e,t)=>{var n;e.timestamp=ne(),null==(n=oe[0])||!n.isFrozen()||e.type===re.FullSnapshot||e.type===re.IncrementalSnapshot&&e.data.source===ie.Mutation||oe.forEach(e=>e.unfreeze()),C?null!=r&&r(H(e),t):I&&(n={type:"rrweb",event:H(e),origin:window.location.origin,isCheckout:t},window.parent.postMessage(n,"*")),e.type===re.FullSnapshot?(Y=e,E=0):e.type!==re.IncrementalSnapshot||e.data.source===ie.Mutation&&e.data.isAttachIframe||(E++,t=s&&E>=s,n=i&&e.timestamp-Y.timestamp>i,(t||n)&&st(!0))},e=>{le({type:re.IncrementalSnapshot,data:{source:ie.Mutation,...e}})}),J=e=>le({type:re.IncrementalSnapshot,data:{source:ie.Scroll,...e}}),q=e=>le({type:re.IncrementalSnapshot,data:{source:ie.CanvasMutation,...e}});const T=new rt({mutationCb:M,adoptedStyleSheetCb:e=>le({type:re.IncrementalSnapshot,data:{source:ie.AdoptedStyleSheet,...e}})}),O=new Be({mirror:ue,mutationCb:M,stylesheetManager:T,recordCrossOriginIframes:G,wrappedEmit:le});for(const R of S||[])R.getMirror&&R.getMirror({nodeMirror:ue,crossOriginIframeMirror:O.crossOriginIframeMirror,crossOriginIframeStyleMirror:O.crossOriginIframeStyleMirror});const D=new it,A=(at=new nt({recordCanvas:v,mutationCb:q,win:window,blockClass:n,blockSelector:a,mirror:ue,sampling:p.canvas,dataURLOptions:m}),new We({mutationCb:M,scrollCb:J,bypassOptions:{blockClass:n,blockSelector:a,maskTextClass:o,maskTextSelector:l,inlineStylesheet:u,maskInputOptions:w,dataURLOptions:m,maskTextFn:h,maskInputFn:d,recordCanvas:v,inlineImages:y,sampling:p,slimDOMOptions:k,iframeManager:O,stylesheetManager:T,canvasManager:at,keepIframeSrcFn:b,processedNodeManager:D},mirror:ue}));st=(e=!1)=>{if(f){le({type:re.Meta,data:{href:window.location.href,width:be(),height:Se()}},e),T.reset(),A.init(),oe.forEach(e=>e.lock());var t=function(e,t){var{mirror:t=new ce,blockClass:n="rr-block",blockSelector:r=null,maskTextClass:i="rr-mask",maskTextSelector:s=null,inlineStylesheet:a=!0,inlineImages:o=!1,recordCanvas:l=!1,maskAllInputs:u=!1,maskTextFn:c,maskInputFn:d,slimDOM:h=!1,dataURLOptions:g,preserveWhiteSpace:p,onSerialize:m,onIframeLoad:_,iframeLoadTimeout:f,onStylesheetLoad:v,stylesheetLoadTimeout:y,keepIframeSrcFn:S=()=>!1}=t||{};return ee(e,{doc:e,mirror:t,blockClass:n,blockSelector:r,maskTextClass:i,maskTextSelector:s,skipChild:!1,inlineStylesheet:a,maskInputOptions:!0===u?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===u?{password:!0}:u,maskTextFn:c,maskInputFn:d,slimDOMOptions:!0===h||"all"===h?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===h,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===h?{}:h,dataURLOptions:g,inlineImages:o,recordCanvas:l,preserveWhiteSpace:p,onSerialize:m,onIframeLoad:_,iframeLoadTimeout:f,onStylesheetLoad:v,stylesheetLoadTimeout:y,keepIframeSrcFn:S,newlyAddedElement:!1})}(document,{mirror:ue,blockClass:n,blockSelector:a,maskTextClass:o,maskTextSelector:l,inlineStylesheet:u,maskAllInputs:w,maskTextFn:h,slimDOM:k,dataURLOptions:m,recordCanvas:v,inlineImages:y,onSerialize:e=>{Ie(e,ue)&&O.addIframe(e),we(e,ue)&&T.trackLinkElement(e),ke(e)&&A.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{O.attachIframe(e,t),A.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{T.attachLinkElement(e,t)},keepIframeSrcFn:b});if(!t)return console.warn("Failed to snapshot the document");le({type:re.FullSnapshot,data:{node:t,initialOffset:ye(window)}},e),oe.forEach(e=>e.unlock()),document.adoptedStyleSheets&&0<document.adoptedStyleSheets.length&&T.adoptStyleSheets(document.adoptedStyleSheets,ue.getId(document))}};try{const L=[],x=e=>{return ae(Fe)({mutationCb:M,mousemoveCb:(e,t)=>le({type:re.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>le({type:re.IncrementalSnapshot,data:{source:ie.MouseInteraction,...e}}),scrollCb:J,viewportResizeCb:e=>le({type:re.IncrementalSnapshot,data:{source:ie.ViewportResize,...e}}),inputCb:e=>le({type:re.IncrementalSnapshot,data:{source:ie.Input,...e}}),mediaInteractionCb:e=>le({type:re.IncrementalSnapshot,data:{source:ie.MediaInteraction,...e}}),styleSheetRuleCb:e=>le({type:re.IncrementalSnapshot,data:{source:ie.StyleSheetRule,...e}}),styleDeclarationCb:e=>le({type:re.IncrementalSnapshot,data:{source:ie.StyleDeclaration,...e}}),canvasMutationCb:q,fontCb:e=>le({type:re.IncrementalSnapshot,data:{source:ie.Font,...e}}),selectionCb:e=>{le({type:re.IncrementalSnapshot,data:{source:ie.Selection,...e}})},customElementCb:e=>{le({type:re.IncrementalSnapshot,data:{source:ie.CustomElement,...e}})},blockClass:n,ignoreClass:P,ignoreSelector:F,maskTextClass:o,maskTextSelector:l,maskInputOptions:w,inlineStylesheet:u,sampling:p,recordDOM:f,recordCanvas:v,inlineImages:y,userTriggeredOnInput:W,collectFonts:V,doc:e,maskInputFn:d,maskTextFn:h,keepIframeSrcFn:b,blockSelector:a,slimDOMOptions:k,dataURLOptions:m,mirror:ue,iframeManager:O,stylesheetManager:T,shadowDomManager:A,processedNodeManager:D,canvasManager:at,ignoreCSSAttributes:z,plugins:(null==(e=null==S?void 0:S.filter(e=>e.observer))?void 0:e.map(t=>({observer:t.observer,options:t.options,callback:e=>le({type:re.Plugin,data:{plugin:t.name,payload:e}})})))||[]},U)},N=(O.addLoadListener(e=>{try{L.push(x(e.contentDocument))}catch(e){console.warn(e)}}),()=>{st(),L.push(x(document)),ot=!0});return"interactive"===document.readyState||"complete"===document.readyState?N():(L.push(te("DOMContentLoaded",()=>{le({type:re.DomContentLoaded,data:{}}),"DOMContentLoaded"===B&&N()})),L.push(te("load",()=>{le({type:re.Load,data:{}}),"load"===B&&N()},window))),()=>{L.forEach(e=>e()),D.destroy(),ot=!1,se=void 0}}catch(e){console.warn(e)}}e.addCustomEvent=(e,t)=>{if(!ot)throw new Error("please add custom event after start recording");le({type:re.Custom,data:{tag:e,payload:t}})},e.freezePage=()=>{oe.forEach(e=>e.freeze())},e.takeFullSnapshot=e=>{if(!ot)throw new Error("please take full snapshot after start recording");st(e)},e.mirror=ue,n.record=e},8572:function(e,t){!function(e){"use strict";let i=-1;const l=t=>{addEventListener("pageshow",e=>{e.persisted&&(i=e.timeStamp,t(e))},!0)},u=(t,n,r,i)=>{let s,a;return e=>{n.value>=0&&(e||i)&&(a=n.value-(s??0),(a||void 0===s)&&(s=n.value,n.delta=a,n.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(n.value,r),t(n)))}},c=e=>{requestAnimationFrame(()=>requestAnimationFrame(()=>e()))},s=()=>{const e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},d=()=>{const e=s();return e?.activationStart??0},h=(e,t=-1)=>{const n=s();let r="navigate";i>=0?r="back-forward-cache":n&&(document.prerendering||d()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-")));return{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},n=new WeakMap;function g(e,t){return n.get(e)||n.set(e,new t),n.get(e)}class o{t;i=0;o=[];h(e){if(e.hadRecentInput)return;const t=this.o[0],n=this.o.at(-1);this.i&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),this.t?.(e)}}const p=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(e=>{Promise.resolve().then(()=>{t(e.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},m=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let r=-1;const a=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,t=e=>{"hidden"===document.visibilityState&&r>-1&&(r="visibilitychange"===e.type?e.timeStamp:0,f())},_=()=>{addEventListener("visibilitychange",t,!0),addEventListener("prerenderingchange",t,!0)},f=()=>{removeEventListener("visibilitychange",t,!0),removeEventListener("prerenderingchange",t,!0)},v=()=>{if(r<0){const t=d(),e=document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(e=>"hidden"===e.name&&e.startTime>t)[0]?.startTime;r=e??a(),_(),l(()=>{setTimeout(()=>{r=a(),_()})})}return{get firstHiddenTime(){return r}}},y=e=>{document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},S=[1800,3e3],b=(t,a={})=>{y(()=>{const n=v();let r,i=h("FCP");const s=p("paint",e=>{for(const t of e)"first-contentful-paint"===t.name&&(s.disconnect(),t.startTime<n.firstHiddenTime&&(i.value=Math.max(t.startTime-d(),0),i.entries.push(t),r(!0)))});s&&(r=u(t,i,S,a.reportAllChanges),l(e=>{i=h("FCP"),r=u(t,i,S,a.reportAllChanges),c(()=>{i.value=performance.now()-e.timeStamp,r(!0)})}))})},C=[.1,.25];let I=0,w=1/0,k=0;const E=e=>{for(const t of e)t.interactionId&&(w=Math.min(w,t.interactionId),k=Math.max(k,t.interactionId),I=k?(k-w)/7+1:0)};let M;const T=()=>M?I:performance.interactionCount??0,O=()=>{"interactionCount"in performance||M||(M=p("event",E,{type:"event",buffered:!0,durationThreshold:0}))};let D=0;class P{u=[];l=new Map;m;p;v(){D=T(),this.u.length=0,this.l.clear()}T(){const e=Math.min(this.u.length-1,Math.floor((T()-D)/50));return this.u[e]}h(e){if(this.m?.(e),!e.interactionId&&"first-input"!==e.entryType)return;const t=this.u.at(-1);let n=this.l.get(e.interactionId);if(n||this.u.length<10||e.duration>t.P){if(n?e.duration>n.P?(n.entries=[e],n.P=e.duration):e.duration===n.P&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],P:e.duration},this.l.set(n.id,n),this.u.push(n)),this.u.sort((e,t)=>t.P-e.P),this.u.length>10){const e=this.u.splice(10);for(const t of e)this.l.delete(t.id)}this.p?.(n)}}}const A=e=>{const t=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(e=m(e),document.addEventListener("visibilitychange",e,{once:!0}),t(()=>{e(),document.removeEventListener("visibilitychange",e)}))},R=[200,500];class F{m;h(e){this.m?.(e)}}const L=[2500,4e3],x=[800,1800],N=e=>{document.prerendering?y(()=>N(e)):"complete"!==document.readyState?addEventListener("load",()=>N(e),!0):setTimeout(e)};e.CLSThresholds=C,e.FCPThresholds=S,e.INPThresholds=R,e.LCPThresholds=L,e.TTFBThresholds=x,e.onCLS=(s,a={})=>{b(m(()=>{let n,r=h("CLS",0);const i=g(a,o),e=e=>{for(const t of e)i.h(t);i.i>r.value&&(r.value=i.i,r.entries=i.o,n())},t=p("layout-shift",e);t&&(n=u(s,r,C,a.reportAllChanges),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&(e(t.takeRecords()),n(!0))}),l(()=>{i.i=0,r=h("CLS",0),n=u(s,r,C,a.reportAllChanges),c(()=>n())}),setTimeout(n))}))},e.onFCP=b,e.onINP=(s,a={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&y(()=>{O();let n,r=h("INP");const i=g(a,P),e=t=>{A(()=>{for(const e of t)i.h(e);const e=i.T();e&&e.P!==r.value&&(r.value=e.P,r.entries=e.entries,n())})},t=p("event",e,{durationThreshold:a.durationThreshold??40});n=u(s,r,R,a.reportAllChanges),t&&(t.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&(e(t.takeRecords()),n(!0))}),l(()=>{i.v(),r=h("INP"),n=u(s,r,R,a.reportAllChanges)}))})},e.onLCP=(a,o={})=>{y(()=>{const t=v();let n,r=h("LCP");const i=g(o,F),e=e=>{o.reportAllChanges||(e=e.slice(-1));for(const o of e)i.h(o),o.startTime<t.firstHiddenTime&&(r.value=Math.max(o.startTime-d(),0),r.entries=[o],n())},s=p("largest-contentful-paint",e);if(s){n=u(a,r,L,o.reportAllChanges);const t=m(()=>{e(s.takeRecords()),s.disconnect(),n(!0)});for(const a of["keydown","click","visibilitychange"])addEventListener(a,()=>A(t),{capture:!0,once:!0});l(e=>{r=h("LCP"),n=u(a,r,L,o.reportAllChanges),c(()=>{r.value=performance.now()-e.timeStamp,n(!0)})})}})},e.onTTFB=(t,n={})=>{let r=h("TTFB"),i=u(t,r,x,n.reportAllChanges);N(()=>{const e=s();e&&(r.value=Math.max(e.responseStart-d(),0),r.entries=[e],i(!0),l(()=>{r=h("TTFB",0),i=u(t,r,x,n.reportAllChanges),i(!0)}))})}}(t)}},r={},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a={},(()=>{"use strict";var e=a,t=s(6914);const n=s(3447),r=s(1964);var i=s(2016),t=(0,t._getStatsigGlobal)();e.default=t,i.AutoInit.attempt(({client:e})=>{new n.SessionReplay(e),new r.AutoCapture(e)})})(),a.default;function s(e){var t=r[e];return void 0!==t||(t=r[e]={exports:{}},n[e].call(t.exports,t,t.exports,s)),t.exports}var n,r,a});